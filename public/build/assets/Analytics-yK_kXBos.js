import{d as ft,r as d,c as K,o as _t,w as W,a as n,b as rt,u as kt,h as wt,e as dt,f as t,n as D,g as i,i as _,t as l,j as X,F as w,k as C,l as Y,v as ct,m as St}from"./app-BprepAJr.js";import{_ as Tt}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-DEzFKaek.js";import{a as F}from"./api-Dh9O2hPh.js";const Ut={class:"py-12"},Dt={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},Ct={class:"border-b border-gray-200 mb-6"},Lt={class:"-mb-px flex space-x-8"},Mt={key:0,class:"space-y-8"},Nt={class:"space-y-6"},$t={class:"flex flex-wrap items-center justify-between gap-3"},At={key:0,class:"text-sm text-gray-500"},Et={class:"flex items-center gap-2"},Ht=["disabled"],Bt={key:0,class:"h-3 w-3 animate-spin rounded-full border-2 border-indigo-500 border-t-transparent"},Pt={key:0,class:"bg-white shadow rounded-lg p-10 text-center text-sm text-gray-500"},Rt={key:1,class:"bg-red-50 border border-red-200 text-red-700 rounded-lg p-6 flex flex-col gap-4"},Wt={class:"text-sm"},Ft={key:2,class:"space-y-8"},Vt={class:"grid gap-4 md:grid-cols-2 xl:grid-cols-3"},jt={class:"text-sm font-semibold uppercase tracking-wide text-gray-500"},It={class:"mt-2 text-3xl font-bold"},Ot={class:"mt-2 text-sm text-gray-600"},qt={class:"grid gap-6 lg:grid-cols-2"},Zt={class:"rounded-xl bg-white shadow-sm"},zt={class:"border-b border-gray-100 px-5 py-4"},Gt={class:"text-sm text-gray-500"},Qt={key:0,class:"divide-y divide-gray-100"},Jt={class:"font-medium text-gray-900"},Kt={class:"text-sm text-gray-500"},Xt={key:0,class:"ml-1 text-gray-400"},Yt={class:"text-right"},te={class:"text-sm font-semibold text-indigo-600"},ee={class:"text-xs text-gray-500"},se={key:1,class:"px-5 py-6 text-sm text-gray-500"},ae={class:"rounded-xl bg-white shadow-sm"},oe={class:"space-y-4 px-5 py-6"},le={class:"text-sm font-medium text-gray-600"},ne={class:"text-sm font-semibold text-gray-900 text-right"},ie={key:1,class:"space-y-6"},re={class:"bg-white shadow rounded-lg p-4"},de={class:"grid gap-4 sm:grid-cols-3"},ce=["value"],ue={class:"flex items-end gap-2"},me=["disabled"],ve=["disabled"],xe={class:"bg-white shadow rounded-lg p-5"},ge={class:"grid gap-4 sm:grid-cols-3 lg:grid-cols-5 text-sm"},pe={class:"font-semibold"},ye={class:"font-semibold"},be={class:"font-semibold"},he={class:"font-semibold"},fe={class:"bg-white shadow rounded-lg"},_e={class:"overflow-x-auto"},ke={class:"min-w-full divide-y divide-gray-200"},we={class:"divide-y divide-gray-200"},Se={class:"px-4 py-4 text-sm text-gray-900"},Te={class:"px-4 py-4 text-sm text-gray-500"},Ue={class:"px-4 py-4 text-sm text-gray-500"},De={class:"px-4 py-4 text-sm text-gray-900 font-semibold"},Ce={class:"px-4 py-4 text-sm text-gray-500"},Le={class:"px-4 py-4 text-sm text-gray-500"},Me={key:0},Ne={key:0,class:"text-center py-8"},$e={key:2,class:"space-y-6"},Ae={class:"bg-white shadow rounded-lg p-4"},Ee={class:"flex justify-between items-center mb-4"},He={class:"flex items-center gap-2"},Be={class:"grid gap-4 sm:grid-cols-2"},Pe={class:"bg-white shadow rounded-lg"},Re={class:"overflow-x-auto"},We={class:"min-w-full divide-y divide-gray-200"},Fe={class:"divide-y divide-gray-200 bg-white"},Ve={class:"px-4 py-4 whitespace-nowrap"},je={class:"flex items-center"},Ie={class:"flex-shrink-0 h-10 w-10"},Oe={class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},qe={class:"text-indigo-600 font-medium"},Ze={class:"ml-4"},ze={class:"text-sm font-medium text-gray-900"},Ge={class:"text-sm text-gray-500"},Qe={class:"px-4 py-4 whitespace-nowrap"},Je={class:"px-4 py-4"},Ke={class:"text-sm text-gray-900"},Xe={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-500"},Ye={class:"text-xs text-gray-400"},ts={key:0},es={key:0,class:"text-center py-8"},ss="Asia/Manila",is=ft({__name:"Analytics",setup(as){const u=d(null),V=d(!0),H=d(null),L=d(!1),j=async()=>{var a,e;try{H.value=null;const{data:s}=await F.get("/admin/analytics/summary");u.value=s}catch(s){console.error(s),H.value=((e=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:e.error)||"Unable to load analytics summary.",u.value=null}finally{V.value=!1,L.value=!1}},tt=async()=>{L.value=!0,await j()},I=a=>`${a.toFixed(2)} h`,M=a=>a.toLocaleString(),O=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),et=a=>new Date(a).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),ut=a=>{if(a===null)return"--";const e=Math.floor(a/60),s=a%60;return e===0?`${s}m`:`${e}h ${s}m`},mt=a=>a?new Date(a).toLocaleString("en-US",{hour:"numeric",minute:"2-digit"}):"--",vt=K(()=>{if(!u.value)return[];const a=u.value.totals;return[{title:"Hours Logged Today",value:I(a.hours_today),subtitle:"Completed work hours",accent:"border-blue-500 bg-blue-50 text-blue-700"},{title:"Hours Logged This Week",value:I(a.hours_week),subtitle:"Monâ€“Sun total",accent:"border-indigo-500 bg-indigo-50 text-indigo-700"},{title:"Active Users Today",value:M(a.active_users_today),subtitle:"Unique employees with activity",accent:"border-emerald-500 bg-emerald-50 text-emerald-700"},{title:"Active Users This Week",value:M(a.active_users_week),subtitle:"Unique employees this week",accent:"border-teal-500 bg-teal-50 text-teal-700"},{title:"Avg Hours / User (Week)",value:I(a.average_hours_per_user_week),subtitle:"Hours per active user",accent:"border-purple-500 bg-purple-50 text-purple-700"},{title:"Open Clock-ins",value:M(a.open_entries),subtitle:"Users still on the clock",accent:"border-amber-500 bg-amber-50 text-amber-700"}]}),xt=K(()=>{if(!u.value)return[];const a=u.value.totals;return[{label:"Late clock-ins today",value:M(a.late_clock_ins_today)},{label:"Completed entries today",value:M(a.total_entries_today)},{label:"Week window",value:`${O(u.value.dates.week_start)} â†’ ${O(u.value.dates.week_end)}`},{label:"Report generated",value:et(u.value.generated_at)}]}),st=K(()=>{var a;return(((a=u.value)==null?void 0:a.open_entries.length)??0)>0}),x=d("overview"),r=d(null),g=d(""),S=d([]),at=d([]),B=d(!1),p=d([]),y=d({workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0});d([]);const q=d([]),P=d(!1),N=d(""),gt=d(Date.now()),$=a=>{const e=typeof a=="number"&&isFinite(a)?Math.max(0,Math.floor(a)):0,s=Math.floor(e/3600),v=Math.floor(e%3600/60),b=e%60,m=h=>h<10?`0${h}`:`${h}`;return`${m(s)}:${m(v)}:${m(b)}`},Z=a=>{if(!a)return"--";try{const s=new Date(a);if(!isNaN(s.getTime()))return s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:ss})}catch{}const e=a.match(/\b(\d{1,2}):(\d{2})(?::(\d{2}))?/);if(e){let s=parseInt(e[1],10);const v=e[2],b=s>=12?"PM":"AM";return s=s%12,s===0&&(s=12),`${s}:${v} ${b}`}return"--"},T=a=>{if(!a)return null;const e=a.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?/);if(e){const b=Number(e[1]),m=Number(e[2])-1,h=Number(e[3]),G=Number(e[4]),Q=Number(e[5]),J=Number(e[6]||"0");return new Date(Date.UTC(b,m,h,G-8,Q,J))}const s=a.includes("T")?a:a.replace(" ","T"),v=new Date(s);return isNaN(v.getTime())?null:v},pt=async()=>{try{const a=await F.get("/admin/analytics/users");S.value=a.data,!r.value&&S.value.length>0&&(r.value=S.value[0].id)}catch(a){console.error("Error loading users:",a)}},z=async()=>{var a;if(r.value){B.value=!0;try{const e=await F.get(`/admin/analytics/user/${r.value}`,{params:{start_date:g.value,end_date:g.value}}),s=((a=e.data)==null?void 0:a.entries)||e.data||[];at.value=s,p.value=[];let v=0,b=0,m=null;s.forEach(o=>{var lt,nt;if(o.entry_type==="break"||o.is_break){const k=T(o.clock_in),E=T(o.clock_out);if(k&&E){const U=Math.max(0,Math.floor((E.getTime()-k.getTime())/1e3));b+=U,p.value.push({name:"Break",start:o.clock_in_formatted||o.clock_in,end:o.clock_out_formatted||o.clock_out,durationSeconds:U,breakDurationSeconds:U,notes:"-"})}return}const c=T(o.clock_in),f=T(o.clock_out);c&&(!m||c<m)&&(m=c);const A=!!o.task&&(o.task.title||o.task.name);if(c&&f&&!A){const k=Math.max(0,Math.floor((f.getTime()-c.getTime())/1e3));v+=k;const E=T(o.lunch_start),U=T(o.lunch_end);let it=0;E&&U&&(it=Math.max(0,Math.floor((U.getTime()-E.getTime())/1e3)));const ht=Math.max(0,k-it);p.value.push({name:"Work Hours",start:o.clock_in_formatted||o.clock_in,end:o.clock_out_formatted||o.clock_out,durationSeconds:ht,breakDurationSeconds:0,notes:"-"})}if(A&&c&&f){const k=Math.max(0,Math.floor((f.getTime()-c.getTime())/1e3));p.value.push({name:((lt=o.task)==null?void 0:lt.title)||((nt=o.task)==null?void 0:nt.name)||"Task",start:o.clock_in_formatted||o.clock_in,end:o.clock_out_formatted||o.clock_out,durationSeconds:k,breakDurationSeconds:0,notes:"-"})}}),p.value.sort((o,c)=>{const f=new Date(o.start??"").getTime(),A=new Date(c.start??"").getTime();return(isNaN(A)?0:A)-(isNaN(f)?0:f)});const h=p.value.filter(o=>o.name==="Work Hours").reduce((o,c)=>o+(c.durationSeconds||0),0),G=p.value.filter(o=>o.name==="Break").reduce((o,c)=>o+(c.durationSeconds||0),0),Q=8*3600,J=Math.max(0,h-Q);let ot="No Entry";if(m){const o=m,c=(o.getUTCHours()+8)%24,f=o.getUTCMinutes();ot=c<8||c===8&&f<=30?"Perfect":"Late"}y.value={workSeconds:h,breakSeconds:G,lunchSeconds:0,tasksCount:p.value.length,status:ot,overtimeSeconds:J}}catch(e){console.error("Error loading user daily analytics",e),at.value=[],y.value={workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}}finally{B.value=!1}}},R=async(a=!1)=>{a||(P.value=!0);try{const e={limit:100};N.value&&(e.action=N.value);const s=await F.get("/admin/analytics/activity-logs",{params:e});q.value=s.data.data,gt.value=Date.now()}catch(e){console.error("Error loading activity logs:",e),a||alert("Failed to load activity logs")}finally{P.value=!1}},yt=()=>{if(!r.value){alert("Please select a user first");return}const a=new URLSearchParams({user_id:String(r.value),start_date:g.value,end_date:g.value});window.location.href=`/api/admin/analytics/user-summary/export/csv?${a.toString()}`},bt=()=>{if(!r.value){alert("Please select a user first");return}const a=new URLSearchParams({user_id:String(r.value),start_date:g.value,end_date:g.value});window.location.href=`/api/admin/analytics/user-summary/export/pdf?${a.toString()}`};return _t(()=>{const a=new Date;g.value=a.toISOString().split("T")[0],pt(),R(),j()}),W(x,a=>{a==="overview"?j():a==="summary"?(!r.value&&S.value.length>0&&(r.value=S.value[0].id),r.value&&z()):a==="activity"&&R(!0)}),W(r,a=>{x.value==="summary"&&a&&z()}),W(g,()=>{x.value==="summary"&&r.value&&z()}),W(N,()=>{x.value==="activity"&&R(!0)}),(a,e)=>(i(),n(w,null,[rt(kt(wt),{title:"Analytics"}),rt(Tt,null,{header:dt(()=>[...e[7]||(e[7]=[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Analytics & Reports ",-1)])]),default:dt(()=>[t("div",Ut,[t("div",Dt,[t("div",Ct,[t("nav",Lt,[t("button",{onClick:e[0]||(e[0]=s=>x.value="overview"),class:D(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",x.value==="overview"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Overview ",2),t("button",{onClick:e[1]||(e[1]=s=>x.value="summary"),class:D(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",x.value==="summary"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," User Summary ",2),t("button",{onClick:e[2]||(e[2]=s=>x.value="activity"),class:D(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",x.value==="activity"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Activity Log ",2)])]),x.value==="overview"?(i(),n("div",Mt,[t("section",Nt,[t("div",$t,[t("div",null,[e[8]||(e[8]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Company Health Overview",-1)),u.value?(i(),n("p",At," As of "+l(et(u.value.generated_at)),1)):_("",!0)]),t("div",Et,[t("button",{type:"button",onClick:tt,disabled:L.value||V.value,class:"inline-flex items-center gap-2 rounded-md border border-indigo-200 bg-white px-4 py-2 text-sm font-medium text-indigo-600 shadow-sm transition hover:bg-indigo-50 disabled:cursor-not-allowed disabled:border-gray-200 disabled:text-gray-400"},[L.value?(i(),n("span",Bt)):_("",!0),t("span",null,l(L.value?"Refreshingâ€¦":"Refresh"),1)],8,Ht)])]),V.value?(i(),n("div",Pt,[...e[9]||(e[9]=[t("div",{class:"mx-auto mb-3 h-8 w-8 animate-spin rounded-full border-b-2 border-indigo-600"},null,-1),X(" Loading analytics summaryâ€¦ ",-1)])])):H.value?(i(),n("div",Rt,[t("div",null,[e[10]||(e[10]=t("h4",{class:"font-semibold text-red-800"},"We couldnâ€™t load the analytics overview.",-1)),t("p",Wt,l(H.value),1)]),t("div",null,[t("button",{type:"button",onClick:tt,class:"inline-flex items-center rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-red-500"}," Try again ")])])):u.value?(i(),n("div",Ft,[t("div",Vt,[(i(!0),n(w,null,C(vt.value,s=>(i(),n("div",{key:s.title,class:D(["rounded-xl border bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:shadow-md",s.accent])},[t("h4",jt,l(s.title),1),t("p",It,l(s.value),1),t("p",Ot,l(s.subtitle),1)],2))),128))]),t("div",qt,[t("div",Zt,[t("div",zt,[e[11]||(e[11]=t("h4",{class:"text-base font-semibold text-gray-800"},"Whoâ€™s still on the clock",-1)),t("p",Gt,l(st.value?"Top 10 current sessions":"No one is clocked in right now."),1)]),st.value?(i(),n("div",Qt,[(i(!0),n(w,null,C(u.value.open_entries,s=>(i(),n("div",{key:s.entry_id,class:"flex items-center justify-between gap-3 px-5 py-4"},[t("div",null,[t("p",Jt,l(s.user.name||"Unknown User"),1),t("p",Kt,[X(l(s.user.email||"No email listed")+" ",1),s.user.team?(i(),n("span",Xt,"Â· "+l(s.user.team),1)):_("",!0)])]),t("div",Yt,[t("p",te,l(ut(s.minutes_running)),1),t("p",ee,"since "+l(mt(s.clock_in)),1)])]))),128))])):(i(),n("div",se," All clocks are cleared for today. Great job! "))]),t("div",ae,[e[12]||(e[12]=t("div",{class:"border-b border-gray-100 px-5 py-4"},[t("h4",{class:"text-base font-semibold text-gray-800"},"At a glance"),t("p",{class:"text-sm text-gray-500"},"Quick context for today and the week.")],-1)),t("dl",oe,[(i(!0),n(w,null,C(xt.value,s=>(i(),n("div",{key:s.label,class:"flex items-center justify-between gap-4"},[t("dt",le,l(s.label),1),t("dd",ne,l(s.value),1)]))),128))])])])])):_("",!0)])])):x.value==="summary"?(i(),n("div",ie,[t("div",re,[t("div",de,[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"User",-1)),Y(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>r.value=s),class:"w-full rounded-md border-gray-300 shadow-sm"},[e[13]||(e[13]=t("option",{value:null},"Select User",-1)),(i(!0),n(w,null,C(S.value,s=>(i(),n("option",{key:s.id,value:s.id},l(s.name),9,ce))),128))],512),[[ct,r.value]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),Y(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>g.value=s),type:"date",class:"w-full rounded-md border-gray-300 shadow-sm"},null,512),[[St,g.value]])]),t("div",ue,[t("button",{onClick:yt,disabled:!r.value,class:"flex-1 rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed"}," Export CSV ",8,me),t("button",{onClick:bt,disabled:!r.value,class:"flex-1 rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-500 disabled:bg-gray-400 disabled:cursor-not-allowed"}," Export PDF ",8,ve)])])]),t("div",xe,[e[21]||(e[21]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Daily Summary",-1)),t("div",ge,[t("div",null,[e[16]||(e[16]=t("div",{class:"text-gray-500"},"ðŸ•’ Time In Hours",-1)),t("div",pe,l($(y.value.workSeconds)),1)]),t("div",null,[e[17]||(e[17]=t("div",{class:"text-gray-500"},"â˜• Total Breaks",-1)),t("div",ye,l($(y.value.breakSeconds)),1)]),t("div",null,[e[18]||(e[18]=t("div",{class:"text-gray-500"},"ðŸ“‹ Entries",-1)),t("div",be,l(y.value.tasksCount),1)]),t("div",null,[e[19]||(e[19]=t("div",{class:"text-gray-500"},"â° Status",-1)),t("div",{class:D(["font-semibold",{"text-green-700":y.value.status==="Perfect","text-yellow-700":y.value.status==="Late","text-gray-700":y.value.status==="No Entry"}])},l(y.value.status),3)]),t("div",null,[e[20]||(e[20]=t("div",{class:"text-gray-500"},"âš¡ Overtime",-1)),t("div",he,l($(y.value.overtimeSeconds)),1)])])]),t("div",fe,[t("div",_e,[t("table",ke,[e[23]||(e[23]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),t("tbody",we,[(i(!0),n(w,null,C(p.value,(s,v)=>(i(),n("tr",{key:v},[t("td",Se,l(s.name),1),t("td",Te,l(Z(s.start)),1),t("td",Ue,l(Z(s.end)),1),t("td",De,l($(s.durationSeconds)),1),t("td",Ce,l($(s.breakDurationSeconds||0)),1),t("td",Le,l(s.notes||"-"),1)]))),128)),p.value.length===0&&!B.value?(i(),n("tr",Me,[...e[22]||(e[22]=[t("td",{colspan:"6",class:"px-4 py-4 text-center text-sm text-gray-500"},"No entries for selected day",-1)])])):_("",!0)])])]),B.value?(i(),n("div",Ne,[...e[24]||(e[24]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):_("",!0)])])):(i(),n("div",$e,[t("div",Ae,[t("div",Ee,[e[26]||(e[26]=t("h3",{class:"text-lg font-medium text-gray-900"},"Real-Time Activity Log",-1)),t("div",He,[e[25]||(e[25]=t("div",{class:"flex items-center gap-2 text-sm text-gray-600"},[t("span",{class:"inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t("span",null,"Live Updates")],-1)),t("button",{onClick:e[5]||(e[5]=s=>R()),class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-indigo-500"}," Refresh ")])]),t("div",Be,[t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter by Action",-1)),Y(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>N.value=s),class:"w-full rounded-md border-gray-300 shadow-sm"},[...e[27]||(e[27]=[t("option",{value:""},"All Actions",-1),t("option",{value:"clock_in"},"Clock In",-1),t("option",{value:"clock_out"},"Clock Out",-1),t("option",{value:"break_start"},"Break Start",-1),t("option",{value:"break_end"},"Break End",-1),t("option",{value:"lunch_start"},"Lunch Start",-1),t("option",{value:"lunch_end"},"Lunch End",-1)])],512),[[ct,N.value]])])])]),t("div",Pe,[t("div",Re,[t("table",We,[e[30]||(e[30]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"User"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Action"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Description"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Time")])],-1)),t("tbody",Fe,[(i(!0),n(w,null,C(q.value,s=>{var v,b,m;return i(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",Ve,[t("div",je,[t("div",Ie,[t("div",Oe,[t("span",qe,l((v=s.user)!=null&&v.name?s.user.name.charAt(0).toUpperCase():"?"),1)])]),t("div",Ze,[t("div",ze,l(((b=s.user)==null?void 0:b.name)||"Unknown User"),1),t("div",Ge,l((m=s.user)==null?void 0:m.email),1)])])]),t("td",Qe,[t("span",{class:D(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":s.action==="clock_in","bg-red-100 text-red-800":s.action==="clock_out","bg-yellow-100 text-yellow-800":s.action.includes("break"),"bg-blue-100 text-blue-800":s.action.includes("lunch")}])},l(s.action.replace("_"," ").replace(/\b\w/g,h=>h.toUpperCase())),3)]),t("td",Je,[t("div",Ke,l(s.description),1)]),t("td",Xe,[X(l(O(s.created_at))+" ",1),t("div",Ye,l(Z(s.created_at)),1)])])}),128)),q.value.length===0&&!P.value?(i(),n("tr",ts,[...e[29]||(e[29]=[t("td",{colspan:"4",class:"px-4 py-4 text-center text-sm text-gray-500"},"No activity logs found",-1)])])):_("",!0)])])]),P.value?(i(),n("div",es,[...e[31]||(e[31]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):_("",!0)])]))])])]),_:1})],64))}});export{is as default};
