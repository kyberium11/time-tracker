import{d as Ce,r as g,c as M,o as Ne,A as $e,B as Ee,a as r,b as Jt,u as Le,h as Ie,e as Kt,f as e,i as f,g as d,n as A,t as l,j as bt,l as Y,F as L,k as U,v as _t,m as wt}from"./app-rL9m2D0P.js";import{_ as Be}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-BAgQ4HDK.js";import{a as w}from"./api-D1uBjruB.js";const Pe={class:"py-12"},Ue={class:"mx-auto max-w-[95%] sm:px-6 lg:px-8"},He={key:0,class:"border-b border-gray-200 mb-6"},je={class:"-mb-px flex space-x-8"},We={key:1},Oe={key:0,class:"mb-6 grid gap-4 md:grid-cols-3"},Ae={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Ve={class:"px-4 py-5 sm:p-6"},Fe={class:"mt-2 text-3xl font-bold text-gray-900"},Re={class:"text-xs text-gray-500"},qe={key:0,class:"mt-2"},ze={class:"text-sm text-gray-600"},Ye={class:"font-semibold"},Ze={class:"mt-4 flex flex-wrap gap-2"},Ge=["disabled"],Je=["disabled"],Ke={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Qe={class:"px-4 py-5 sm:p-6"},Xe={key:0,class:"mt-2"},ts={class:"text-2xl font-bold text-gray-900 mt-1"},es={key:0,class:"text-sm font-normal text-gray-500"},ss={class:"mt-3"},as=["disabled"],os={key:1,class:"mt-2"},ns={class:"flex items-center gap-2 w-full"},ls=["value"],is=["disabled"],rs={key:0,class:"text-sm text-gray-500 mt-2"},ds={class:"overflow-hidden bg-white shadow sm:rounded-lg"},us={class:"px-4 py-5 sm:p-6"},cs={class:"mt-2 text-3xl font-bold text-gray-900"},ms={key:1,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},ps={class:"px-4 py-5 sm:p-6"},xs={class:"flex items-center justify-between mb-4"},gs=["disabled"],vs={class:"overflow-x-auto"},ys={class:"min-w-full divide-y divide-gray-200"},fs={class:"divide-y divide-gray-200 bg-white"},hs={class:"px-4 py-4 text-sm text-gray-900"},ks={class:"px-4 py-4 text-sm text-gray-500"},bs={class:"px-4 py-4 text-sm text-gray-500"},_s={class:"px-4 py-4 text-sm text-gray-500"},ws={key:0},Ts={key:2,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},Ss={class:"px-4 py-5 sm:p-6"},Ds={class:"flex items-center justify-between mb-3"},Ms={class:"flex items-center gap-2"},Cs=["disabled"],Ns={key:0,class:"h-3 w-3 rounded-full border-2 border-white border-t-transparent animate-spin"},$s=["value"],Es={class:"overflow-x-auto"},Ls={class:"min-w-full divide-y divide-gray-200"},Is={class:"divide-y divide-gray-200 bg-white"},Bs={class:"whitespace-nowrap px-6 py-4 text-sm text-indigo-600"},Ps=["onClick"],Us={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},Hs={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},js={class:"whitespace-nowrap px-6 py-4 text-sm"},Ws={key:1,class:"text-sm text-gray-700"},Os={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},As={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Vs={class:"whitespace-nowrap px-6 py-4 text-sm"},Fs={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},Rs={class:"flex items-center space-x-2"},qs=["onClick","disabled","aria-label"],zs={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},Ys={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},Zs=["value","onChange"],Gs=["value"],Js={key:0,value:"complete"},Ks={key:1,value:"done"},Qs={class:"flex items-center justify-between px-6 py-3 text-sm text-gray-600"},Xs={class:"space-x-2"},ta=["disabled"],ea=["disabled"],sa={class:"overflow-hidden bg-white shadow sm:rounded-lg"},aa={class:"px-4 py-5 sm:p-6"},oa={key:0,class:"text-center py-8 text-gray-500"},na={key:1,class:"overflow-x-auto"},la={class:"min-w-full divide-y divide-gray-200"},ia={class:"divide-y divide-gray-200"},ra={class:"px-4 py-4 text-sm text-gray-900"},da={class:"px-4 py-4 text-sm text-gray-500"},ua={class:"px-4 py-4 text-sm text-gray-500"},ca={class:"px-4 py-4 text-sm text-gray-900 font-semibold"},ma={class:"px-4 py-4 text-sm text-gray-500"},pa={class:"px-4 py-4 text-sm text-gray-500"},xa={key:2,class:"space-y-6"},ga={class:"bg-white shadow rounded-lg p-4"},va={class:"grid gap-4 sm:grid-cols-2"},ya={class:"bg-white shadow rounded-lg p-5"},fa={class:"grid gap-4 sm:grid-cols-3 lg:grid-cols-5 text-sm"},ha={class:"font-semibold"},ka={class:"font-semibold"},ba={class:"font-semibold"},_a={class:"font-semibold"},wa={class:"bg-white shadow rounded-lg"},Ta={class:"overflow-x-auto"},Sa={class:"min-w-full divide-y divide-gray-200"},Da={class:"divide-y divide-gray-200"},Ma={class:"px-4 py-4 text-sm text-gray-900"},Ca={class:"px-4 py-4 text-sm text-gray-500"},Na={class:"px-4 py-4 text-sm text-gray-500"},$a={class:"px-4 py-4 text-sm text-gray-900 font-semibold"},Ea={class:"px-4 py-4 text-sm text-gray-500"},La={class:"px-4 py-4 text-sm text-gray-500"},Ia={key:0},Ba={key:0,class:"text-center py-8"},Pa={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Ua={class:"w-full max-w-2xl rounded-lg bg-white shadow-lg"},Ha={class:"flex items-center justify-between border-b px-4 py-3"},ja={class:"p-4"},Wa={key:0,class:"text-gray-500 text-sm"},Oa={key:1,class:"overflow-x-auto"},Aa={class:"min-w-full divide-y divide-gray-200"},Va={class:"divide-y divide-gray-200 bg-white"},Fa={class:"px-4 py-2 text-sm text-gray-900"},Ra={class:"px-4 py-2 text-sm text-gray-700"},qa={class:"px-4 py-2 text-sm text-gray-700"},za={class:"px-4 py-2 text-sm text-gray-700 font-semibold"},Ya={class:"px-4 py-2 text-sm text-gray-700"},Za={class:"px-4 py-2 text-sm text-gray-700"},Ga={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Ja={class:"w-full max-w-3xl rounded-lg bg-white shadow-lg"},Ka={class:"p-5 text-sm text-gray-700 space-y-5"},Qa={class:"space-y-1"},Xa={key:0,class:"text-xs text-gray-500"},to={class:"font-medium text-gray-600"},eo={class:"grid gap-3 sm:grid-cols-2 lg:grid-cols-5"},so={class:"rounded-md bg-indigo-50 px-4 py-3"},ao={class:"text-xl font-semibold text-indigo-900"},oo={class:"rounded-md bg-green-50 px-4 py-3"},no={class:"text-xl font-semibold text-green-900"},lo={class:"rounded-md bg-blue-50 px-4 py-3"},io={class:"text-xl font-semibold text-blue-900"},ro={class:"rounded-md bg-gray-100 px-4 py-3"},uo={class:"text-xl font-semibold text-gray-900"},co={class:"rounded-md bg-amber-50 px-4 py-3"},mo={class:"text-xl font-semibold text-amber-900"},po={key:0,class:"space-y-2"},xo={class:"max-h-48 overflow-y-auto space-y-2 pr-1"},go={class:"flex items-start justify-between gap-3"},vo={class:"font-medium text-green-900 leading-tight"},yo={class:"text-xs text-green-700 whitespace-nowrap"},fo={class:"mt-1 flex flex-wrap gap-3 text-xs text-green-800"},ho={key:0},ko={key:1},bo={key:1,class:"space-y-2"},_o={class:"max-h-48 overflow-y-auto space-y-2 pr-1"},wo={class:"flex items-start justify-between gap-3"},To={class:"font-medium text-blue-900 leading-tight"},So={class:"text-xs text-blue-700 whitespace-nowrap"},Do={class:"mt-1 flex flex-wrap gap-3 text-xs text-blue-800"},Mo={key:0},Co={key:1},No={key:2,class:"space-y-2"},$o={class:"max-h-40 overflow-y-auto space-y-1 pr-1"},Eo={class:"flex items-start justify-between gap-3"},Lo={class:"font-medium leading-tight"},Io={class:"text-amber-700"},Bo={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Po={class:"w-full max-w-3xl max-h-[90vh] rounded-lg bg-white shadow-lg flex flex-col"},Uo={class:"flex items-center justify-between border-b px-4 py-3 flex-shrink-0"},Ho={key:0,class:"p-6 text-sm text-gray-700 overflow-y-auto flex-1"},jo={class:"mb-4 pb-4 border-b"},Wo={class:"font-semibold text-lg text-gray-900 mb-2"},Oo={class:"flex items-center gap-3 flex-wrap"},Ao={key:0,class:"text-sm"},Vo={key:1,class:"ml-1 text-gray-700"},Fo={key:1},Ro=["href"],qo={key:0,class:"task-content"},zo=["innerHTML"],Yo={key:1,class:"text-gray-500 italic"},Qo=Ce({__name:"Dashboard",setup(Zo){const x=g(null),T=g(!1),K=g(""),Z=g(new Date),H=g("employee"),V=g([]),et=g(null),_=g(null),Tt=g(!1),Pt=g([]),St=g(0),F=g([]),$=g(null),rt=g(!1),Dt=g(!1),st=g(!1),S=g(null),Q=g("dashboard"),G=g(""),Ut=g([]),dt=g(!1),I=g({workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}),N=g([]),Mt=g(""),J=g(1),at=g(10),ut=g("all"),ct=M(()=>{const s=new Set;return(V.value||[]).forEach(t=>{const o=(t.status||"").toString().trim();o&&s.add(o)}),Array.from(s).sort((t,o)=>t.localeCompare(o))}),mt=g("all"),pt=g(""),xt=g(""),Ct=M(()=>{const s=Mt.value.trim().toLowerCase();let t=V.value;if(ut.value!=="all"){const o=ut.value.toLowerCase();t=t.filter(n=>(n.status||"").toLowerCase()===o)}if(mt.value!=="all"){const o=mt.value;t=t.filter(n=>(n.priority||"none").toLowerCase()===o)}if(pt.value){const o=new Date(pt.value).getTime();t=t.filter(n=>n.due_date?new Date(n.due_date).getTime()>=o:!1)}if(xt.value){const o=new Date(xt.value).getTime();t=t.filter(n=>n.due_date?new Date(n.due_date).getTime()<=o:!1)}return s?t.filter(o=>(o.title||"").toLowerCase().includes(s)):t}),gt=M(()=>Math.max(1,Math.ceil(Ct.value.length/at.value))),Qt=M(()=>{const t=(Math.min(J.value,gt.value)-1)*at.value;return Ct.value.slice(t,t+at.value)}),R=s=>{const t=Math.max(1,Math.min(s,gt.value));J.value=t},vt=g([]),yt=g(!1),Nt=async()=>{var s;yt.value=!0;try{const t=await w.get("/admin/analytics/activity-logs",{params:{limit:100}});vt.value=((s=t.data)==null?void 0:s.data)||[]}catch{vt.value=[]}finally{yt.value=!1}};let $t=null,ot=null;const ft=g(!1),ht=g(!1),nt=g(!1),Et=g(!1),j=M(()=>{var s,t;return!!((s=x.value)!=null&&s.clock_in)&&!((t=x.value)!=null&&t.clock_out)}),B=M(()=>{var s,t;return!!((s=x.value)!=null&&s.break_start)&&!((t=x.value)!=null&&t.break_end)}),Xt=M(()=>{var s,t;return((s=x.value)==null?void 0:s.lunch_start)&&!((t=x.value)!=null&&t.lunch_end)}),kt=M(()=>{const s=[];if(!x.value)return s;const t=x.value;if(t.clock_in&&t.clock_out){const o=Math.max(0,Math.floor((new Date(t.clock_out).getTime()-new Date(t.clock_in).getTime())/1e3)),n=t.break_start?new Date(t.break_start):null,i=t.break_end?new Date(t.break_end):null;let u=0;n&&i&&(u=Math.max(0,Math.floor((i.getTime()-n.getTime())/1e3)));const y=Math.max(0,o-u);s.push({name:"Work Hours",start:t.clock_in,end:t.clock_out,durationSeconds:y,breakDurationSeconds:u,notes:"-"})}if(t.break_start&&t.break_end){const o=Math.max(0,Math.floor((new Date(t.break_end).getTime()-new Date(t.break_start).getTime())/1e3));s.push({name:"Break",start:t.break_start,end:t.break_end,durationSeconds:o,breakDurationSeconds:o,notes:"-"})}return F.value.forEach(o=>{var n;if(o.clock_in&&o.clock_out){const i=Math.max(0,Math.floor((new Date(o.clock_out).getTime()-new Date(o.clock_in).getTime())/1e3));s.push({name:((n=o.task)==null?void 0:n.title)||`Task #${o.task_id}`,start:o.clock_in,end:o.clock_out,durationSeconds:i,breakDurationSeconds:0,notes:"-"})}}),s.sort((o,n)=>{const i=new Date(o.start).getTime(),u=new Date(n.start).getTime();return(isNaN(u)?0:u)-(isNaN(i)?0:i)}),s}),te=async()=>{"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission()},Lt=(s,t,o)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(s,{body:t,icon:"/favicon.ico",badge:"/favicon.ico",tag:"time-tracker-notification",requireInteraction:!1,...o})},ee=()=>{var s;if(B.value&&((s=x.value)!=null&&s.break_start)){const t=new Date(x.value.break_start),o=Z.value,n=Math.floor((o.getTime()-t.getTime())/1e3),i=Math.floor(n/60);i>=13&&!ft.value&&(Lt("Break Reminder","You're approaching the 15-minute break limit. Please end your break soon.",{tag:"break-13-min"}),ft.value=!0),i>=15&&!ht.value&&(Lt("Break Over Limit","You've exceeded the 15-minute break limit. Please end your break now.",{tag:"break-15-min",requireInteraction:!0}),ht.value=!0)}else B.value||(ft.value=!1,ht.value=!1)},Ht=async()=>{var s,t;if(!(Et.value||nt.value)&&!j.value&&(s=x.value)!=null&&s.clock_out&&(t=x.value)!=null&&t.clock_in){const o=new Date(x.value.clock_in),n=new Date(x.value.clock_out);Math.floor((n.getTime()-o.getTime())/1e3)/3600>=1&&!x.value.lunch_start&&!nt.value&&(Lt("Lunch Reminder","You've been working for 1 hour without taking lunch. Please remember to take your lunch break.",{tag:"lunch-reminder",requireInteraction:!0}),nt.value=!0,Et.value=!0)}},se=()=>{ot&&clearInterval(ot),ot=window.setInterval(()=>{ee(),nt.value||Ht()},6e4)},jt=s=>{if(j.value)return s.preventDefault(),s.returnValue="",""};Ne(async()=>{const s=new Date;G.value=s.toISOString().split("T")[0],await te(),lt(),oe(),q(),Bt(),X(),$t=window.setInterval(()=>{Z.value=new Date},1e3),se(),window.addEventListener("beforeunload",jt)}),$e(()=>{$t&&window.clearInterval($t),ot&&clearInterval(ot),window.removeEventListener("beforeunload",jt)});const lt=async()=>{try{const s=await w.get("/time-entries/current");x.value=s.data,he(),B.value||(ft.value=!1,ht.value=!1);const t=new Date().toISOString().split("T")[0];G.value!==t&&(nt.value=!1,Et.value=!1)}catch(s){x.value=null,K.value="No entry today",console.error("Error fetching current entry:",s)}},ae=Ee(),oe=async()=>{var t,o;const s=(t=ae.props.auth)==null?void 0:t.user;if(s!=null&&s.role){const n=s.role;["admin","manager","employee","developer"].includes(n)&&(H.value=n)}else try{const i=(((o=(await w.get("/admin/users")).data)==null?void 0:o.data)||[]).find(u=>(u==null?void 0:u.id)&&(u==null?void 0:u.email));if(i!=null&&i.role){const u=i.role;["admin","manager","employee","developer"].includes(u)&&(H.value=u)}}catch{}H.value==="admin"&&(await Nt(),setInterval(()=>{Nt()},5e3))},q=async()=>{try{const s=await w.get("/my/tasks");V.value=s.data}catch{}},ne=()=>{Dt.value=!1,S.value=null},le=async()=>{var s,t,o,n,i,u,y;st.value=!0;try{const m=await w.post("/my/clickup/sync-tasks");await q();const p=((s=m.data)==null?void 0:s.summary)??{};S.value={summary:{total:p.total??0,created:p.created??0,updated:p.updated??0,unchanged:p.unchanged??0,skipped:p.skipped??0},created:((t=m.data)==null?void 0:t.created)??[],updated:((o=m.data)==null?void 0:o.updated)??[],skipped:((n=m.data)==null?void 0:n.skipped)??[],sources:((i=m.data)==null?void 0:i.sources)??[]},Dt.value=!0}catch(m){alert(((y=(u=m==null?void 0:m.response)==null?void 0:u.data)==null?void 0:y.error)||"Failed to sync tasks from ClickUp")}finally{st.value=!1}},Wt=async()=>{try{await ke()}catch{}},ie=async()=>{try{await be()}catch{}},re=async()=>{try{await _e()}catch{}},It=async()=>{try{await we()}catch{}},Bt=async()=>{try{const s=await w.get("/tasks/today-entries");F.value=s.data||[];const t=(F.value||[]).find(o=>o.clock_in&&!o.clock_out);_.value=t?t.task_id:null}catch{F.value=[]}},Ot=async s=>{try{const t=await w.get(`/tasks/${s}/sync`);$.value=t.data,rt.value=!0}catch{rt.value=!1}},de=async()=>{if(B.value){await It();return}j.value?await ie():await Wt()},ue=async()=>{if(_.value){alert("Pause or stop the running task first.");return}B.value?await It():(j.value||await Wt(),await re())},O=s=>s<10?`0${s}`:`${s}`,ce=M(()=>{var s;return j.value&&((s=x.value)!=null&&s.clock_in)?new Date(x.value.clock_in):null}),me=M(()=>{var s;return B.value&&((s=x.value)!=null&&s.break_start)?new Date(x.value.break_start):null}),pe=M(()=>{const s=F.value.find(t=>t.clock_in&&!t.clock_out);return s?new Date(s.clock_in):null}),xe=M(()=>{const s=ce.value;if(!s)return"00:00:00";const t=Z.value.getTime()-s.getTime(),o=Math.max(0,Math.floor(t/1e3)),n=Math.floor(o/3600),i=Math.floor(o%3600/60),u=o%60;return`${O(n)}:${O(i)}:${O(u)}`}),ge=M(()=>{const s=me.value;if(!s)return"00:00:00";const t=Z.value.getTime()-s.getTime(),o=Math.max(0,Math.floor(t/1e3)),n=Math.floor(o/3600),i=Math.floor(o%3600/60),u=o%60;return`${O(n)}:${O(i)}:${O(u)}`}),ve=M(()=>{const s=pe.value;if(!s)return"00:00:00";const t=Z.value.getTime()-s.getTime(),o=Math.max(0,Math.floor(t/1e3)),n=Math.floor(o/3600),i=Math.floor(o%3600/60),u=o%60;return`${O(n)}:${O(i)}:${O(u)}`}),ye=M(()=>{var o,n;let s=St.value||0;if(j.value&&((o=x.value)!=null&&o.clock_in)&&!((n=x.value)!=null&&n.clock_out)){const i=new Date(x.value.clock_in),u=Z.value,y=Math.max(0,Math.floor((u.getTime()-i.getTime())/1e3));let m=0;if(x.value.break_start)if(x.value.break_end){const v=new Date(x.value.break_start),c=new Date(x.value.break_end);m=Math.max(0,Math.floor((c.getTime()-v.getTime())/1e3))}else{const v=new Date(x.value.break_start);m=Math.max(0,Math.floor((u.getTime()-v.getTime())/1e3))}let p=0;if(x.value.lunch_start)if(x.value.lunch_end){const v=new Date(x.value.lunch_start),c=new Date(x.value.lunch_end);p=Math.max(0,Math.floor((c.getTime()-v.getTime())/1e3))}else{const v=new Date(x.value.lunch_start);p=Math.max(0,Math.floor((u.getTime()-v.getTime())/1e3))}const a=Math.max(0,y-m-p);s+=a}return F.value&&F.value.length>0&&F.value.forEach(i=>{if(i.clock_in&&!i.clock_out){const u=new Date(i.clock_in),y=Z.value,m=Math.max(0,Math.floor((y.getTime()-u.getTime())/1e3));s+=m}}),(s/3600).toFixed(2)}),fe=async()=>{await X(),Tt.value=!0},X=async()=>{var s;try{const t=new Date().toISOString().split("T")[0],n=((s=(await w.get("/my/time-entries",{params:{start_date:t,end_date:t}})).data)==null?void 0:s.entries)||[],i=[];let u=0,y=0;const m=new Date;n.forEach(p=>{const a=p.clock_in_formatted||p.clock_in,v=p.clock_out_formatted||p.clock_out,c=z(p.clock_in),h=z(p.clock_out);if(p.is_break||p.entry_type==="break"){if(!c)return;const k=!!h;let P=0;k&&h?(P=Math.max(0,Math.floor((h.getTime()-c.getTime())/1e3)),y+=P):P=Math.max(0,Math.floor((m.getTime()-c.getTime())/1e3)),i.push({name:"Break",start:a,end:k?v:null,durationSeconds:P,breakDurationSeconds:P,notes:k?"-":"In progress"});return}if(!c)return;const E=p.task&&(p.task.title||p.task.name),b=!!h;if(!E)if(b&&h){const k=Math.max(0,Math.floor((h.getTime()-c.getTime())/1e3)),P=z(p.lunch_start),it=z(p.lunch_end);let C=0;P&&it&&(C=Math.max(0,Math.floor((it.getTime()-P.getTime())/1e3)));const D=Math.max(0,k-C);u+=D,i.push({name:"Work Hours",start:a,end:v,durationSeconds:D,breakDurationSeconds:0,notes:"-"})}else{const k=Math.max(0,Math.floor((m.getTime()-c.getTime())/1e3));i.push({name:"Work Hours",start:a,end:null,durationSeconds:k,breakDurationSeconds:0,notes:"In progress"})}if(E)if(b&&h){const k=Math.max(0,Math.floor((h.getTime()-c.getTime())/1e3));i.push({name:p.task.title||p.task.name,start:a,end:v,durationSeconds:k,breakDurationSeconds:0,notes:"-"})}else{const k=Math.max(0,Math.floor((m.getTime()-c.getTime())/1e3));i.push({name:p.task.title||p.task.name,start:a,end:null,durationSeconds:k,breakDurationSeconds:0,notes:"In progress"})}}),i.sort((p,a)=>{const v=new Date(p.start).getTime(),c=new Date(a.start).getTime();return(isNaN(c)?0:c)-(isNaN(v)?0:v)}),Pt.value=i,St.value=u}catch{Pt.value=[],St.value=0}},he=()=>{!x.value||!x.value.clock_in?K.value="Not clocked in":x.value.clock_out?K.value="Clocked out":Xt.value?K.value="On lunch":B.value?K.value="On break":K.value="Clocked in"},ke=async s=>{var t,o;T.value=!0;try{const n={};await w.post("/time-entries/clock-in",n),await lt(),await q(),await X()}catch(n){alert(((o=(t=n.response)==null?void 0:t.data)==null?void 0:o.message)||"Error clocking in")}finally{T.value=!1}},be=async()=>{var s,t;T.value=!0;try{if(_.value){alert("Pause or stop the running task first."),T.value=!1;return}await w.post("/time-entries/clock-out"),await lt(),await q(),await X(),setTimeout(()=>{Ht()},1e3)}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error clocking out")}finally{T.value=!1}},_e=async()=>{var s,t;T.value=!0;try{await w.post("/time-entries/break-start"),await lt(),await q(),await X()}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error starting break")}finally{T.value=!1}},we=async()=>{var s,t;T.value=!0;try{await w.post("/time-entries/break-end"),await lt(),await q(),await X()}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error ending break")}finally{T.value=!1}},At=async s=>{var t,o;if(!j.value){alert("Please Time In first before starting a task.");return}if(B.value&&await It(),_.value&&_.value!==s)try{await w.post("/tasks/stop")}catch{}try{await w.post("/tasks/start",{task_id:s}),_.value=s,await Bt()}catch(n){alert(((o=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:o.message)||"Failed to start task")}},Vt=async()=>{try{await w.post("/tasks/stop")}catch{}_.value=null,await Bt()},Te=async(s,t)=>{var n,i;if(!t)return;if(!confirm(`Are you sure you want to set this task to "${t}"?`)){await q();return}T.value=!0;try{await w.post(`/tasks/${s}/status`,{status:t}),await q()}catch(u){alert(((i=(n=u==null?void 0:u.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to update task status")}finally{T.value=!1}},Ft=async()=>{var s,t;if(G.value){dt.value=!0;try{const o=await w.get("/my/time-entries",{params:{start_date:G.value,end_date:G.value}}),n=((s=o.data)==null?void 0:s.entries)||[];Ut.value=n,N.value=[];let i=0,u=0,y=null,m=null;const p=new Date;n.forEach(c=>{const h=c.clock_in_formatted||c.clock_in,E=c.clock_out_formatted||c.clock_out,b=z(c.clock_in),k=z(c.clock_out);if(b&&(!y||b<y)&&(y=b,m=h),c.is_break||c.entry_type==="break"){if(!b)return;const C=!!k;let D=0;C&&k?(D=Math.max(0,Math.floor((k.getTime()-b.getTime())/1e3)),u+=D):D=Math.max(0,Math.floor((p.getTime()-b.getTime())/1e3)),N.value.push({name:"Break",start:h,end:C?E:null,durationSeconds:D,breakDurationSeconds:D,notes:C?"-":"In progress"});return}if(!b)return;const P=c.task&&(c.task.title||c.task.name),it=!!k;if(!P)if(it&&k){const C=Math.max(0,Math.floor((k.getTime()-b.getTime())/1e3));i+=C;const D=z(c.lunch_start),Zt=z(c.lunch_end);let Gt=0;D&&Zt&&(Gt=Math.max(0,Math.floor((Zt.getTime()-D.getTime())/1e3)));const Me=Math.max(0,C-Gt);N.value.push({name:"Work Hours",start:h,end:E,durationSeconds:Me,breakDurationSeconds:0,notes:"-"})}else{const C=Math.max(0,Math.floor((p.getTime()-b.getTime())/1e3));N.value.push({name:"Work Hours",start:h,end:null,durationSeconds:C,breakDurationSeconds:0,notes:"In progress"})}if(P){const C=c.task.title||c.task.name;if(it&&k){const D=Math.max(0,Math.floor((k.getTime()-b.getTime())/1e3));N.value.push({name:C,start:h,end:E,durationSeconds:D,breakDurationSeconds:0,notes:"-"})}else{const D=Math.max(0,Math.floor((p.getTime()-b.getTime())/1e3));N.value.push({name:C,start:h,end:null,durationSeconds:D,breakDurationSeconds:0,notes:"In progress"})}}}),N.value.sort((c,h)=>{const E=new Date(c.start).getTime(),b=new Date(h.start).getTime();return(isNaN(b)?0:b)-(isNaN(E)?0:E)});const a=N.value.filter(c=>c.name==="Work Hours").reduce((c,h)=>c+(h.durationSeconds||0),0),v=N.value.filter(c=>c.name==="Break").reduce((c,h)=>c+(h.durationSeconds||0),0);if((t=o.data)!=null&&t.daily_totals)I.value={workSeconds:a,breakSeconds:v,lunchSeconds:o.data.daily_totals.lunch_seconds||0,tasksCount:o.data.daily_totals.tasks_count||0,status:o.data.daily_totals.status||"No Entry",overtimeSeconds:o.data.daily_totals.overtime_seconds||0};else{const h=Math.max(0,a-28800);let E="No Entry";if(y){const b=(y.getUTCHours()+8)%24,k=y.getUTCMinutes();E=b<8||b===8&&k<=30?"Perfect":"Late"}I.value={workSeconds:a,breakSeconds:v,lunchSeconds:0,tasksCount:N.value.length,status:E,overtimeSeconds:h}}}catch(o){console.error("Error loading time entries",o),Ut.value=[],N.value=[],I.value={workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}}finally{dt.value=!1}}},z=s=>{if(!s)return null;const t=s.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?/);if(t){const i=Number(t[1]),u=Number(t[2])-1,y=Number(t[3]),m=Number(t[4]),p=Number(t[5]),a=Number(t[6]||"0");return new Date(Date.UTC(i,u,y,m-8,p,a))}const o=s.includes("T")?s:s.replace(" ","T"),n=new Date(o);return isNaN(n.getTime())?null:n},tt=s=>{if(!s)return"--";try{const o=new Date(s);if(!isNaN(o.getTime()))return o.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Manila"})}catch{}const t=s.match(/\b(\d{1,2}):(\d{2})(?::(\d{2}))?/);if(t){let o=parseInt(t[1],10);const n=t[2],i=o>=12?"PM":"AM";return o=o%12,o===0&&(o=12),`${o}:${n} ${i}`}return"--"},W=s=>{const t=typeof s=="number"&&isFinite(s)?Math.max(0,Math.floor(s)):0,o=Math.floor(t/3600),n=Math.floor(t%3600/60),i=t%60,u=y=>y<10?`0${y}`:`${y}`;return`${u(o)}:${u(n)}:${u(i)}`},Rt=s=>{if(!s)return"--";const t=new Date(s);return isNaN(t.getTime())?s:t.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})},qt=s=>{if(!s||s===0)return"--";const t=Math.floor(s/1e3);return W(t)},zt=s=>{if(!s)return"";const t=s.toLowerCase().trim();return t==="to do"||t==="todo"?"text-gray-700":t.includes("complete")||t.includes("done")||t.includes("finished")?"bg-green-100 text-green-800":t.includes("progress")||t.includes("doing")||t.includes("in progress")||t.includes("working")?"bg-blue-100 text-blue-800":t.includes("pending")||t.includes("waiting")?"bg-yellow-100 text-yellow-800":t.includes("blocked")||t.includes("stuck")?"bg-red-100 text-red-800":t.includes("review")||t.includes("testing")?"bg-purple-100 text-purple-800":t.includes("cancel")||t.includes("closed")?"bg-gray-100 text-gray-800":"bg-indigo-100 text-indigo-800"},Se=s=>{if(!s)return"bg-gray-100 text-gray-800";const t=s.toLowerCase().trim();return t==="urgent"||t==="critical"?"bg-red-100 text-red-800":t==="high"?"bg-orange-100 text-orange-800":t==="normal"||t==="medium"?"bg-yellow-100 text-yellow-800":t==="low"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"},Yt=s=>{if(!s)return!1;const t=s.toLowerCase().trim();return t!=="to do"&&t!=="todo"},De=s=>{if(!s)return"";const t=s.split(`
`),o=[];let n=!1,i=[];for(let y=0;y<t.length;y++){const m=t[y].trim();if(!m){n&&i.length>0&&(o.push(`<ul class="list-disc ml-6 mb-3 space-y-1">${i.join("")}</ul>`),i=[],n=!1),o.length>0&&!o[o.length-1].startsWith("<")&&o.push('</p><p class="mb-2">');continue}if(m.match(/^#{1,3}\s+/)){n&&i.length>0&&(o.push(`<ul class="list-disc ml-6 mb-3 space-y-1">${i.join("")}</ul>`),i=[],n=!1),m.startsWith("###")?o.push(`<h3 class="font-semibold text-gray-900 mt-4 mb-2 text-base">${m.replace(/^###\s+/,"")}</h3>`):m.startsWith("##")?o.push(`<h2 class="font-bold text-gray-900 mt-5 mb-3 text-lg">${m.replace(/^##\s+/,"")}</h2>`):m.startsWith("#")&&o.push(`<h1 class="font-bold text-gray-900 mt-6 mb-4 text-xl">${m.replace(/^#\s+/,"")}</h1>`);continue}if(m.match(/^[\-\*â€¢]\s+/)){n||(n=!0);const a=m.replace(/^[\-\*â€¢]\s+/,"").trim();i.push(`<li class="mb-1">${a}</li>`);continue}if(m.match(/^\d+\.\s+/)){n||(n=!0);const a=m.replace(/^\d+\.\s+/,"").trim();i.push(`<li class="mb-1 list-decimal">${a}</li>`);continue}n&&i.length>0&&(o.push(`<ul class="list-disc ml-6 mb-3 space-y-1">${i.join("")}</ul>`),i=[],n=!1);let p=m.replace(/\*\*(.+?)\*\*/g,'<strong class="font-semibold">$1</strong>').replace(/\*(.+?)\*/g,'<em class="italic">$1</em>');o.push(p)}n&&i.length>0&&o.push(`<ul class="list-disc ml-6 mb-3 space-y-1">${i.join("")}</ul>`);let u=o.join("<br>");return u.startsWith("<")||(u='<p class="mb-2">'+u),u.endsWith(">")||(u=u+"</p>"),u};return(s,t)=>(d(),r(L,null,[Jt(Le(Ie),{title:"Dashboard"}),Jt(Be,null,{header:Kt(()=>[...t[23]||(t[23]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Time Tracker Dashboard ",-1)])]),default:Kt(()=>{var o,n,i,u,y,m,p;return[e("div",Pe,[e("div",Ue,[H.value!=="admin"?(d(),r("div",He,[e("nav",je,[e("button",{onClick:t[0]||(t[0]=a=>Q.value="dashboard"),class:A(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",Q.value==="dashboard"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Dashboard ",2),e("button",{onClick:t[1]||(t[1]=a=>{Q.value="time-entries",Ft()}),class:A(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",Q.value==="time-entries"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Time Entries ",2)])])):f("",!0),Q.value==="dashboard"||H.value==="admin"||H.value==="developer"?(d(),r("div",We,[H.value!=="admin"?(d(),r("div",Oe,[e("div",Ae,[e("div",Ve,[t[25]||(t[25]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Work Day Timer",-1)),e("p",Fe,l(xe.value),1),e("p",Re,l(j.value?"Working":"Idle"),1),B.value?(d(),r("div",qe,[e("p",ze,[t[24]||(t[24]=bt("Break Timer: ",-1)),e("span",Ye,l(ge.value),1)])])):f("",!0),e("div",Ze,[e("button",{onClick:de,disabled:T.value,class:A(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",j.value?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"])},l(j.value?"Time Out":"Time In"),11,Ge),e("button",{onClick:ue,disabled:T.value,class:A(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",B.value?"bg-orange-600 hover:bg-orange-700":"bg-yellow-600 hover:bg-yellow-700"])},l(B.value?"Break Out":"Break In"),11,Je)])])]),e("div",Ke,[e("div",Qe,[t[27]||(t[27]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Running Task",-1)),_.value?(d(),r("div",Xe,[e("button",{onClick:t[2]||(t[2]=a=>Ot(_.value)),class:"text-indigo-600 hover:underline text-sm"},l(((o=V.value.find(a=>a.id===_.value))==null?void 0:o.title)||"#"+_.value),1),e("p",ts,[bt(l(ve.value),1),(n=V.value.find(a=>a.id===_.value))!=null&&n.estimated_time?(d(),r("span",es," / "+l(qt((i=V.value.find(a=>a.id===_.value))==null?void 0:i.estimated_time)),1)):f("",!0)]),e("div",ss,[e("button",{onClick:t[3]||(t[3]=a=>Vt()),disabled:T.value,class:"rounded-md bg-yellow-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-yellow-700"},"Pause",8,as)])])):(d(),r("div",os,[e("div",ns,[Y(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>et.value=a),class:"w-full rounded-md border-gray-300 text-sm shadow-sm"},[t[26]||(t[26]=e("option",{value:null},"Select a task",-1)),(d(!0),r(L,null,U(V.value,a=>(d(),r("option",{key:a.id,value:a.id},l(a.title),9,ls))),128))],512),[[_t,et.value]]),e("button",{onClick:t[5]||(t[5]=a=>et.value?At(et.value):void 0),disabled:T.value||!et.value,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700 disabled:opacity-50"},"Start",8,is)]),V.value.length?f("",!0):(d(),r("p",rs,"No tasks available."))]))])]),e("div",ds,[e("div",us,[t[29]||(t[29]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Daily Logs",-1)),e("p",cs,[bt(l(ye.value),1),t[28]||(t[28]=e("span",{class:"text-sm font-normal text-gray-500"}," / 8 Hours",-1))]),e("div",{class:"mt-4 flex space-x-2"},[e("button",{onClick:fe,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-700"},"Daily Logs")])])])])):f("",!0),H.value==="admin"?(d(),r("div",ms,[e("div",ps,[e("div",xs,[t[30]||(t[30]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Real-Time Activity Log",-1)),e("button",{onClick:Nt,disabled:yt.value,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-500"},"Refresh",8,gs)]),e("div",vs,[e("table",ys,[t[32]||(t[32]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"User"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Action"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Description"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Time")])],-1)),e("tbody",fs,[(d(!0),r(L,null,U(vt.value,a=>{var v;return d(),r("tr",{key:a.id},[e("td",hs,l(((v=a.user)==null?void 0:v.name)||"Unknown"),1),e("td",ks,l(a.action),1),e("td",bs,l(a.description),1),e("td",_s,l(new Date(a.created_at).toLocaleString()),1)])}),128)),vt.value.length===0&&!yt.value?(d(),r("tr",ws,[...t[31]||(t[31]=[e("td",{colspan:"4",class:"px-4 py-4 text-center text-sm text-gray-500"},"No activity logs found",-1)])])):f("",!0)])])])])])):f("",!0),H.value!=="admin"?(d(),r("div",Ts,[e("div",Ss,[e("div",Ds,[t[36]||(t[36]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"My Tasks",-1)),e("div",Ms,[e("button",{onClick:le,disabled:st.value,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700 disabled:opacity-60 disabled:cursor-not-allowed flex items-center gap-2"},[st.value?(d(),r("span",Ns)):f("",!0),e("span",null,l(st.value?"Syncingâ€¦":"Refresh from ClickUp"),1)],8,Cs),Y(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>Mt.value=a),onInput:t[7]||(t[7]=a=>R(1)),type:"text",placeholder:"Search tasks",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[wt,Mt.value]]),Y(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>ut.value=a),onChange:t[9]||(t[9]=a=>R(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[t[33]||(t[33]=e("option",{value:"all"},"All",-1)),(d(!0),r(L,null,U(ct.value,a=>(d(),r("option",{key:a,value:a},l(a),9,$s))),128))],544),[[_t,ut.value]]),Y(e("select",{"onUpdate:modelValue":t[10]||(t[10]=a=>mt.value=a),onChange:t[11]||(t[11]=a=>R(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...t[34]||(t[34]=[e("option",{value:"all"},"All priorities",-1),e("option",{value:"urgent"},"Urgent",-1),e("option",{value:"high"},"High",-1),e("option",{value:"normal"},"Normal",-1),e("option",{value:"low"},"Low",-1),e("option",{value:"none"},"None",-1)])],544),[[_t,mt.value]]),Y(e("input",{"onUpdate:modelValue":t[12]||(t[12]=a=>pt.value=a),onChange:t[13]||(t[13]=a=>R(1)),type:"date",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[wt,pt.value]]),Y(e("input",{"onUpdate:modelValue":t[14]||(t[14]=a=>xt.value=a),onChange:t[15]||(t[15]=a=>R(1)),type:"date",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[wt,xt.value]]),Y(e("select",{"onUpdate:modelValue":t[16]||(t[16]=a=>at.value=a),onChange:t[17]||(t[17]=a=>R(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...t[35]||(t[35]=[e("option",{value:5},"5",-1),e("option",{value:10},"10",-1),e("option",{value:20},"20",-1),e("option",{value:50},"50",-1)])],544),[[_t,at.value,void 0,{number:!0}]])])]),e("div",Es,[e("table",Ls,[t[40]||(t[40]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Campaign"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Parent Task"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Due Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Estimated Time"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Priority"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Actions")])],-1)),e("tbody",Is,[(d(!0),r(L,null,U(Qt.value,a=>(d(),r("tr",{key:a.id},[e("td",Bs,[e("button",{onClick:v=>Ot(a.id),class:"hover:underline"},l(a.title),9,Ps)]),e("td",Us,l(a.clickup_list_name||"--"),1),e("td",Hs,l(a.parent_task_name||"N/A"),1),e("td",js,[Yt(a.status)?(d(),r("span",{key:0,class:A(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold",zt(a.status)])},l(a.status||"â€”"),3)):(d(),r("span",Ws,l(a.status||"â€”"),1))]),e("td",Os,l(a.due_date?new Date(a.due_date).toLocaleDateString():"--"),1),e("td",As,l(qt(a.estimated_time)),1),e("td",Vs,[e("span",{class:A(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold",Se(a.priority||null)])},l(a.priority||"None"),3)]),e("td",Fs,[e("div",Rs,[e("button",{onClick:v=>_.value===a.id?Vt():At(a.id),disabled:T.value,class:A(["rounded-full p-2 text-white",_.value===a.id?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"]),"aria-label":_.value===a.id?"Pause":"Play"},[_.value!==a.id?(d(),r("svg",zs,[...t[37]||(t[37]=[e("path",{d:"M8 5v14l11-7z"},null,-1)])])):(d(),r("svg",Ys,[...t[38]||(t[38]=[e("path",{d:"M6 5h4v14H6zM14 5h4v14h-4z"},null,-1)])]))],10,qs),e("select",{value:a.status||"",onChange:v=>Te(a.id,v.target.value),class:"rounded-md border-gray-300 text-xs shadow-sm"},[t[39]||(t[39]=e("option",{disabled:"",value:""},"Set statusâ€¦",-1)),(d(!0),r(L,null,U(ct.value,v=>(d(),r("option",{key:v+a.id,value:v},l(v),9,Gs))),128)),ct.value.includes("complete")?f("",!0):(d(),r("option",Js,"complete")),ct.value.includes("done")?f("",!0):(d(),r("option",Ks,"done"))],40,Zs)])])]))),128))])]),e("div",Qs,[e("div",null," Page "+l(J.value)+" of "+l(gt.value)+" â€¢ "+l(Ct.value.length)+" total ",1),e("div",Xs,[e("button",{onClick:t[18]||(t[18]=a=>R(J.value-1)),disabled:J.value<=1,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Prev",8,ta),e("button",{onClick:t[19]||(t[19]=a=>R(J.value+1)),disabled:J.value>=gt.value,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Next",8,ea)])])])])])):f("",!0),e("div",sa,[e("div",aa,[t[42]||(t[42]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Today's Time Events",-1)),kt.value.length===0?(d(),r("div",oa," No time entries recorded today. Clock in to start tracking time. ")):(d(),r("div",na,[e("table",la,[t[41]||(t[41]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),e("tbody",ia,[(d(!0),r(L,null,U(kt.value,(a,v)=>(d(),r("tr",{key:v},[e("td",ra,l(a.name),1),e("td",da,l(tt(a.start)),1),e("td",ua,l(tt(a.end)),1),e("td",ca,l(W(a.durationSeconds)),1),e("td",ma,l(W(a.breakDurationSeconds||0)),1),e("td",pa,l(a.notes||"-"),1)]))),128))])])]))])])])):f("",!0),Q.value==="time-entries"&&H.value!=="admin"?(d(),r("div",xa,[e("div",ga,[e("div",va,[e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),Y(e("input",{"onUpdate:modelValue":t[20]||(t[20]=a=>G.value=a),onChange:Ft,type:"date",class:"w-full rounded-md border-gray-300 shadow-sm"},null,544),[[wt,G.value]])])])]),e("div",ya,[t[49]||(t[49]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Daily Summary",-1)),e("div",fa,[e("div",null,[t[44]||(t[44]=e("div",{class:"text-gray-500"},"ðŸ•’ Time In Hours",-1)),e("div",ha,l(W(I.value.workSeconds)),1)]),e("div",null,[t[45]||(t[45]=e("div",{class:"text-gray-500"},"â˜• Total Breaks",-1)),e("div",ka,l(W(I.value.breakSeconds)),1)]),e("div",null,[t[46]||(t[46]=e("div",{class:"text-gray-500"},"ðŸ“‹ Entries",-1)),e("div",ba,l(I.value.tasksCount),1)]),e("div",null,[t[47]||(t[47]=e("div",{class:"text-gray-500"},"â° Status",-1)),e("div",{class:A(["font-semibold",{"text-green-700":I.value.status==="Perfect","text-yellow-700":I.value.status==="Late","text-gray-700":I.value.status==="No Entry"}])},l(I.value.status),3)]),e("div",null,[t[48]||(t[48]=e("div",{class:"text-gray-500"},"âš¡ Overtime",-1)),e("div",_a,l(W(I.value.overtimeSeconds)),1)])])]),e("div",wa,[e("div",Ta,[e("table",Sa,[t[51]||(t[51]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),e("tbody",Da,[(d(!0),r(L,null,U(N.value,(a,v)=>(d(),r("tr",{key:v},[e("td",Ma,l(a.name),1),e("td",Ca,l(tt(a.start)),1),e("td",Na,l(tt(a.end)),1),e("td",$a,l(W(a.durationSeconds)),1),e("td",Ea,l(W(a.breakDurationSeconds||0)),1),e("td",La,l(a.notes||"-"),1)]))),128)),N.value.length===0&&!dt.value?(d(),r("tr",Ia,[...t[50]||(t[50]=[e("td",{colspan:"6",class:"px-4 py-4 text-center text-sm text-gray-500"},"No entries for selected day",-1)])])):f("",!0)])])]),dt.value?(d(),r("div",Ba,[...t[52]||(t[52]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),e("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):f("",!0)])])):f("",!0)]),Tt.value?(d(),r("div",Pa,[e("div",Ua,[e("div",Ha,[t[53]||(t[53]=e("h4",{class:"text-md font-semibold"},"Daily Logs",-1)),e("button",{onClick:t[21]||(t[21]=a=>Tt.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs"},"Close")]),e("div",ja,[kt.value.length===0?(d(),r("div",Wa,"No entry today.")):(d(),r("div",Oa,[e("table",Aa,[t[54]||(t[54]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),e("tbody",Va,[(d(!0),r(L,null,U(kt.value,(a,v)=>(d(),r("tr",{key:v},[e("td",Fa,l(a.name),1),e("td",Ra,l(tt(a.start)),1),e("td",qa,l(tt(a.end)),1),e("td",za,l(W(a.durationSeconds)),1),e("td",Ya,l(W(a.breakDurationSeconds||0)),1),e("td",Za,l(a.notes||"-"),1)]))),128))])])]))])])])):f("",!0),Dt.value&&S.value?(d(),r("div",Ga,[e("div",Ja,[e("div",{class:"flex items-center justify-between border-b px-4 py-3"},[t[55]||(t[55]=e("h4",{class:"text-md font-semibold"},"ClickUp Sync Summary",-1)),e("button",{onClick:ne,class:"rounded-md bg-gray-100 px-2 py-1 text-xs hover:bg-gray-200"},"Close")]),e("div",Ka,[e("div",Qa,[t[57]||(t[57]=e("p",null,"Latest sync completed successfully.",-1)),S.value.sources.length?(d(),r("p",Xa,[t[56]||(t[56]=bt(" Sources: ",-1)),e("span",to,l(S.value.sources.join(", ")),1)])):f("",!0)]),e("div",eo,[e("div",so,[t[58]||(t[58]=e("div",{class:"text-xs uppercase tracking-wide text-indigo-600"},"Total Processed",-1)),e("div",ao,l(S.value.summary.total),1)]),e("div",oo,[t[59]||(t[59]=e("div",{class:"text-xs uppercase tracking-wide text-green-600"},"Created",-1)),e("div",no,l(S.value.summary.created),1)]),e("div",lo,[t[60]||(t[60]=e("div",{class:"text-xs uppercase tracking-wide text-blue-600"},"Updated",-1)),e("div",io,l(S.value.summary.updated),1)]),e("div",ro,[t[61]||(t[61]=e("div",{class:"text-xs uppercase tracking-wide text-gray-600"},"No Changes",-1)),e("div",uo,l(S.value.summary.unchanged),1)]),e("div",co,[t[62]||(t[62]=e("div",{class:"text-xs uppercase tracking-wide text-amber-600"},"Skipped",-1)),e("div",mo,l(S.value.summary.skipped),1)])]),S.value.created.length?(d(),r("div",po,[t[63]||(t[63]=e("h5",{class:"text-sm font-semibold text-gray-900"},"New tasks",-1)),e("ul",xo,[(d(!0),r(L,null,U(S.value.created,a=>(d(),r("li",{key:"created-"+a.id,class:"rounded-md border border-green-200 bg-green-50 px-3 py-2"},[e("div",go,[e("span",vo,l(a.title),1),e("span",yo,l(Rt(a.due_date)),1)]),e("div",fo,[a.status?(d(),r("span",ho,"Status: "+l(a.status),1)):f("",!0),a.priority?(d(),r("span",ko,"Priority: "+l(a.priority),1)):f("",!0)])]))),128))])])):f("",!0),S.value.updated.length?(d(),r("div",bo,[t[64]||(t[64]=e("h5",{class:"text-sm font-semibold text-gray-900"},"Updated tasks",-1)),e("ul",_o,[(d(!0),r(L,null,U(S.value.updated,a=>(d(),r("li",{key:"updated-"+a.id,class:"rounded-md border border-blue-200 bg-blue-50 px-3 py-2"},[e("div",wo,[e("span",To,l(a.title),1),e("span",So,l(Rt(a.due_date)),1)]),e("div",Do,[a.status?(d(),r("span",Mo,"Status: "+l(a.status),1)):f("",!0),a.priority?(d(),r("span",Co,"Priority: "+l(a.priority),1)):f("",!0)])]))),128))])])):f("",!0),S.value.skipped.length?(d(),r("div",No,[t[65]||(t[65]=e("h5",{class:"text-sm font-semibold text-gray-900"},"Skipped items",-1)),e("ul",$o,[(d(!0),r(L,null,U(S.value.skipped,a=>(d(),r("li",{key:"skipped-"+a.id,class:"rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-900"},[e("div",Eo,[e("span",Lo,l(a.id),1),e("span",Io,l(a.reason),1)])]))),128))])])):f("",!0)])])])):f("",!0),rt.value?(d(),r("div",Bo,[e("div",Po,[e("div",Uo,[t[66]||(t[66]=e("h4",{class:"text-md font-semibold"},"Task Details",-1)),e("button",{onClick:t[22]||(t[22]=a=>rt.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs hover:bg-gray-200"},"Close")]),$.value?(d(),r("div",Ho,[e("div",jo,[e("h2",Wo,l((u=$.value.task)==null?void 0:u.title),1),e("div",Oo,[(y=$.value.task)!=null&&y.status?(d(),r("span",Ao,[t[67]||(t[67]=e("span",{class:"text-gray-600"},"Status:",-1)),Yt($.value.task.status)?(d(),r("span",{key:0,class:A(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold ml-1",zt($.value.task.status)])},l($.value.task.status),3)):(d(),r("span",Vo,l($.value.task.status),1))])):f("",!0),(m=$.value.clickup)!=null&&m.url?(d(),r("span",Fo,[e("a",{href:$.value.clickup.url,target:"_blank",class:"text-indigo-600 hover:underline text-sm font-medium"},"Open in ClickUp â†’",8,Ro)])):f("",!0)])]),(p=$.value.clickup)!=null&&p.text_content?(d(),r("div",qo,[e("div",{innerHTML:De($.value.clickup.text_content),class:"prose prose-sm max-w-none"},null,8,zo)])):(d(),r("div",Yo," No additional details available. "))])):f("",!0)])])):f("",!0)])]}),_:1})],64))}});export{Qo as default};
