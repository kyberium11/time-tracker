import{d as Ft,r as d,c as ct,o as Wt,w as st,a as r,b as wt,u as Bt,h as It,e as St,f as t,g as f,n as C,i as l,t as n,j as at,F as b,k as _,l as B,v as mt,m as vt}from"./app-CKSkNePE.js";import{_ as Pt}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-CPltkRs0.js";import{a as I}from"./api-CsQ0yHD7.js";const Rt={class:"py-12"},Vt={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},Ot={class:"border-b border-gray-200 mb-6"},jt={class:"-mb-px flex space-x-8"},qt={key:0,class:"space-y-8"},zt={class:"space-y-6"},Zt={class:"flex flex-wrap items-center justify-between gap-3"},Gt={key:0,class:"text-sm text-gray-500"},Qt={class:"flex items-center gap-2"},Jt=["disabled"],Kt={key:0,class:"h-3 w-3 animate-spin rounded-full border-2 border-indigo-500 border-t-transparent"},Xt={key:0,class:"bg-white shadow rounded-lg p-10 text-center text-sm text-gray-500"},Yt={key:1,class:"bg-red-50 border border-red-200 text-red-700 rounded-lg p-6 flex flex-col gap-4"},te={class:"text-sm"},ee={key:2,class:"space-y-8"},se={class:"grid gap-4 md:grid-cols-2 xl:grid-cols-3"},ae={class:"text-sm font-semibold uppercase tracking-wide text-gray-500"},oe={class:"mt-2 text-3xl font-bold"},re={class:"mt-2 text-sm text-gray-600"},le={class:"grid gap-6 lg:grid-cols-2"},ne={class:"rounded-xl bg-white shadow-sm"},ie={class:"border-b border-gray-100 px-5 py-4"},de={class:"text-sm text-gray-500"},ue={key:0,class:"divide-y divide-gray-100"},ce={class:"font-medium text-gray-900"},me={class:"text-sm text-gray-500"},ve={key:0,class:"ml-1 text-gray-400"},xe={class:"text-right"},ge={class:"text-sm font-semibold text-indigo-600"},pe={class:"text-xs text-gray-500"},ye={key:1,class:"px-5 py-6 text-sm text-gray-500"},be={class:"rounded-xl bg-white shadow-sm"},he={class:"space-y-4 px-5 py-6"},fe={class:"text-sm font-medium text-gray-600"},_e={class:"text-sm font-semibold text-gray-900 text-right"},ke={key:1,class:"space-y-6"},we={class:"bg-white shadow rounded-lg p-4"},Se={class:"grid gap-4 sm:grid-cols-3"},Te=["value"],Ue={class:"flex items-end gap-2"},De=["disabled"],He=["disabled"],Ce={class:"bg-white shadow rounded-lg p-5"},Me={class:"grid gap-4 sm:grid-cols-3 lg:grid-cols-5 text-sm"},Ne={class:"font-semibold"},Le={class:"font-semibold"},Ae={class:"font-semibold"},Ee={class:"font-semibold"},$e={class:"bg-white shadow rounded-lg"},Fe={class:"overflow-x-auto"},We={class:"min-w-full divide-y divide-gray-200"},Be={class:"divide-y divide-gray-200"},Ie={class:"px-4 py-4 text-sm text-gray-900"},Pe={class:"px-4 py-4 text-sm text-gray-500"},Re={class:"px-4 py-4 text-sm text-gray-500"},Ve={class:"px-4 py-4 text-sm text-gray-900 font-semibold"},Oe={class:"px-4 py-4 text-sm text-gray-500"},je={class:"px-4 py-4 text-sm text-gray-500"},qe={key:0},ze={key:0,class:"text-center py-8"},Ze={key:2,class:"space-y-6"},Ge={class:"bg-white shadow rounded-lg p-4"},Qe={class:"flex justify-between items-center mb-4"},Je={class:"flex items-center gap-2"},Ke={class:"grid gap-4 sm:grid-cols-2"},Xe={class:"bg-white shadow rounded-lg"},Ye={class:"overflow-x-auto"},ts={class:"min-w-full divide-y divide-gray-200"},es={class:"divide-y divide-gray-200 bg-white"},ss={class:"px-4 py-4 whitespace-nowrap"},as={class:"flex items-center"},os={class:"flex-shrink-0 h-10 w-10"},rs={class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},ls={class:"text-indigo-600 font-medium"},ns={class:"ml-4"},is={class:"text-sm font-medium text-gray-900"},ds={class:"text-sm text-gray-500"},us={class:"px-4 py-4 whitespace-nowrap"},cs={class:"px-4 py-4"},ms={class:"text-sm text-gray-900"},vs={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-500"},xs={class:"text-xs text-gray-400"},gs={key:0},ps={key:0,class:"text-center py-8"},ys={key:3,class:"space-y-6"},bs={class:"bg-white shadow rounded-lg p-4 flex flex-wrap items-end gap-4"},hs={class:"ml-auto flex flex-wrap items-end gap-3"},fs={key:0},_s=["value"],ks=["disabled"],ws={key:0,class:"h-3 w-3 animate-spin rounded-full border-2 border-white border-t-transparent"},Ss={key:0,class:"bg-red-50 border border-red-200 text-red-700 rounded-lg p-4"},Ts={class:"text-sm"},Us={key:1,class:"bg-white shadow rounded-lg"},Ds={key:0,class:"p-8 text-center text-sm text-gray-500"},Hs={key:1,class:"p-8 text-center text-sm text-gray-500"},Cs={key:2,class:"overflow-x-auto"},Ms={class:"min-w-full divide-y divide-gray-200"},Ns={class:"bg-gray-50"},Ls={class:"divide-y divide-gray-200 bg-white"},As={class:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap"},Es={key:0},$s={class:"font-medium text-indigo-700"},Fs={class:"text-gray-600"},Ws={key:1,class:"text-gray-300"},Bs={class:"bg-gray-50 border-t border-gray-200"},Is={class:"font-semibold text-indigo-700"},Ps={class:"text-gray-700"},Rs="Asia/Manila",zs=Ft({__name:"Analytics",setup(Vs){const p=d(null),ot=d(!0),Q=d(null),P=d(!1),rt=async()=>{var a,e;try{Q.value=null;const{data:s}=await I.get("/admin/analytics/summary");p.value=s}catch(s){console.error(s),Q.value=((e=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:e.error)||"Unable to load analytics summary.",p.value=null}finally{ot.value=!1,P.value=!1}},xt=async()=>{P.value=!0,await rt()},lt=a=>`${a.toFixed(2)} h`,R=a=>a.toLocaleString(),nt=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),gt=a=>new Date(a).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),Tt=a=>{if(a===null)return"--";const e=Math.floor(a/60),s=a%60;return e===0?`${s}m`:`${e}h ${s}m`},Ut=a=>a?new Date(a).toLocaleString("en-US",{hour:"numeric",minute:"2-digit"}):"--",Dt=ct(()=>{if(!p.value)return[];const a=p.value.totals;return[{title:"Hours Logged Today",value:lt(a.hours_today),subtitle:"Completed work hours",accent:"border-blue-500 bg-blue-50 text-blue-700"},{title:"Hours Logged This Week",value:lt(a.hours_week),subtitle:"Monâ€“Sun total",accent:"border-indigo-500 bg-indigo-50 text-indigo-700"},{title:"Active Users Today",value:R(a.active_users_today),subtitle:"Unique employees with activity",accent:"border-emerald-500 bg-emerald-50 text-emerald-700"},{title:"Active Users This Week",value:R(a.active_users_week),subtitle:"Unique employees this week",accent:"border-teal-500 bg-teal-50 text-teal-700"},{title:"Avg Hours / User (Week)",value:lt(a.average_hours_per_user_week),subtitle:"Hours per active user",accent:"border-purple-500 bg-purple-50 text-purple-700"},{title:"Open Clock-ins",value:R(a.open_entries),subtitle:"Users still on the clock",accent:"border-amber-500 bg-amber-50 text-amber-700"}]}),Ht=ct(()=>{if(!p.value)return[];const a=p.value.totals;return[{label:"Late clock-ins today",value:R(a.late_clock_ins_today)},{label:"Completed entries today",value:R(a.total_entries_today)},{label:"Week window",value:`${nt(p.value.dates.week_start)} â†’ ${nt(p.value.dates.week_end)}`},{label:"Report generated",value:gt(p.value.generated_at)}]}),pt=ct(()=>{var a;return(((a=p.value)==null?void 0:a.open_entries.length)??0)>0}),g=d("overview"),m=d(null),k=d(""),M=d([]),yt=d([]),J=d(!1),h=d([]),w=d({workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0});d([]);const it=d([]),K=d(!1),V=d(""),Ct=d(Date.now()),N=d(""),L=d(""),A=d([]),O=d([]),X=d({}),j=d([]),Y=d(null),E=d(!1),tt=d(null),bt=()=>{const a=new Date,e=new Date;e.setDate(a.getDate()-13),N.value=e.toISOString().split("T")[0],L.value=a.toISOString().split("T")[0]},Mt=async()=>{try{const{data:a}=await I.get("/admin/teams",{params:{per_page:1e3}});Array.isArray(a)?j.value=a.map(e=>({id:e.id,name:e.name})):j.value=[]}catch(a){console.error("Error loading teams for user hours matrix",a),j.value=[]}},Nt=a=>a?a.split("T")[0]||a:"",ht=async()=>{var a,e;E.value=!0,tt.value=null;try{const s={};N.value&&(s.start_date=N.value),L.value&&(s.end_date=L.value),Y.value&&(s.team_id=Y.value);const{data:u}=await I.get("/admin/analytics/utilization/gaps",{params:s}),v=(u==null?void 0:u.data)||[];if(!v.length){A.value=[],O.value=[],X.value={};return}const x=new Set,y=new Set;v.forEach(o=>{o.user&&x.add(o.user),o.date&&y.add(o.date)});const z=Array.from(x).sort((o,i)=>o.localeCompare(i)),F=Array.from(y).sort((o,i)=>o.localeCompare(i)),D={},T={};F.forEach(o=>{D[o]={date:o,cells:{}}}),v.forEach(o=>{const i=D[o.date];if(!i)return;const c=o.user||"Unknown";i.cells[c]||(i.cells[c]={taskHours:0,workHours:0});const S=i.cells[c],Z=Number.isFinite(o.worked_hours)?o.worked_hours:0,G=Number.isFinite(o.task_hours)?o.task_hours:0;S.workHours+=Z,S.taskHours+=G,T[c]||(T[c]={taskHours:0,workHours:0}),T[c].workHours+=Z,T[c].taskHours+=G}),A.value=z,O.value=F.map(o=>D[o]),X.value=T}catch(s){console.error("Error loading user hours matrix",s),tt.value=((e=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:e.error)||"Unable to load user hours.",A.value=[],O.value=[]}finally{E.value=!1}},q=a=>{const e=typeof a=="number"&&isFinite(a)?Math.max(0,Math.floor(a)):0,s=Math.floor(e/3600),u=Math.floor(e%3600/60),v=e%60,x=y=>y<10?`0${y}`:`${y}`;return`${x(s)}:${x(u)}:${x(v)}`},dt=a=>{if(!a)return"--";try{const s=new Date(a);if(!isNaN(s.getTime()))return s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:Rs})}catch{}const e=a.match(/\b(\d{1,2}):(\d{2})(?::(\d{2}))?/);if(e){let s=parseInt(e[1],10);const u=e[2],v=s>=12?"PM":"AM";return s=s%12,s===0&&(s=12),`${s}:${u} ${v}`}return"--"},$=a=>{if(!a)return null;const e=a.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?/);if(e){const v=Number(e[1]),x=Number(e[2])-1,y=Number(e[3]),z=Number(e[4]),F=Number(e[5]),D=Number(e[6]||"0");return new Date(Date.UTC(v,x,y,z-8,F,D))}const s=a.includes("T")?a:a.replace(" ","T"),u=new Date(s);return isNaN(u.getTime())?null:u},Lt=async()=>{try{const a=await I.get("/admin/analytics/users");M.value=a.data,!m.value&&M.value.length>0&&(m.value=M.value[0].id)}catch(a){console.error("Error loading users:",a)}},ut=async()=>{var a;if(m.value){J.value=!0;try{const e=await I.get(`/admin/analytics/user/${m.value}`,{params:{start_date:k.value,end_date:k.value}}),s=((a=e.data)==null?void 0:a.entries)||e.data||[];yt.value=s,h.value=[];let u=0,v=0,x=null;s.forEach(o=>{var Z,G,ft,_t;if(o.entry_type==="break"||o.is_break){const U=$(o.clock_in),H=$(o.clock_out);if(U&&H){const W=Math.max(0,Math.floor((H.getTime()-U.getTime())/1e3));v+=W,h.value.push({name:"Break",start:o.clock_in_formatted||o.clock_in,end:o.clock_out_formatted||o.clock_out,durationSeconds:W,breakDurationSeconds:W,notes:"-"})}return}const i=$(o.clock_in),c=$(o.clock_out);i&&(!x||i<x)&&(x=i);const S=!!o.task&&(o.task.title||o.task.name);if(i&&c&&!S){const U=Math.max(0,Math.floor((c.getTime()-i.getTime())/1e3));u+=U;const H=$(o.lunch_start),W=$(o.lunch_end);let kt=0;H&&W&&(kt=Math.max(0,Math.floor((W.getTime()-H.getTime())/1e3)));const $t=Math.max(0,U-kt);h.value.push({name:"Work Hours",start:o.clock_in_formatted||o.clock_in,end:o.clock_out_formatted||o.clock_out,durationSeconds:$t,breakDurationSeconds:0,notes:"-"})}if(S&&i&&c){const U=Math.max(0,Math.floor((c.getTime()-i.getTime())/1e3));h.value.push({name:((Z=o.task)==null?void 0:Z.title)||((G=o.task)==null?void 0:G.name)||"Task",start:o.clock_in_formatted||o.clock_in,end:o.clock_out_formatted||o.clock_out,durationSeconds:U,breakDurationSeconds:0,notes:"-"})}else if(S&&i&&!c){const H=Math.max(0,Math.floor((new Date().getTime()-i.getTime())/1e3));h.value.push({name:((ft=o.task)==null?void 0:ft.title)||((_t=o.task)==null?void 0:_t.name)||"Task",start:o.clock_in_formatted||o.clock_in,end:null,durationSeconds:H,breakDurationSeconds:0,notes:"In progress"})}}),h.value.sort((o,i)=>{const c=new Date(o.start??"").getTime(),S=new Date(i.start??"").getTime();return(isNaN(S)?0:S)-(isNaN(c)?0:c)});const y=h.value.filter(o=>o.name==="Work Hours").reduce((o,i)=>o+(i.durationSeconds||0),0),z=h.value.filter(o=>o.name==="Break").reduce((o,i)=>o+(i.durationSeconds||0),0),F=8*3600,D=Math.max(0,y-F);let T="No Entry";if(x){const o=x,i=(o.getUTCHours()+8)%24,c=o.getUTCMinutes();T=i<8||i===8&&c<=30?"Perfect":"Late"}w.value={workSeconds:y,breakSeconds:z,lunchSeconds:0,tasksCount:h.value.length,status:T,overtimeSeconds:D}}catch(e){console.error("Error loading user daily analytics",e),yt.value=[],w.value={workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}}finally{J.value=!1}}},et=async(a=!1)=>{a||(K.value=!0);try{const e={limit:100};V.value&&(e.action=V.value);const s=await I.get("/admin/analytics/activity-logs",{params:e});it.value=s.data.data,Ct.value=Date.now()}catch(e){console.error("Error loading activity logs:",e),a||alert("Failed to load activity logs")}finally{K.value=!1}},At=()=>{if(!m.value){alert("Please select a user first");return}const a=new URLSearchParams({user_id:String(m.value),start_date:k.value,end_date:k.value});window.location.href=`/api/admin/analytics/user-summary/export/csv?${a.toString()}`},Et=()=>{if(!m.value){alert("Please select a user first");return}const a=new URLSearchParams({user_id:String(m.value),start_date:k.value,end_date:k.value});window.location.href=`/api/admin/analytics/user-summary/export/pdf?${a.toString()}`};return Wt(()=>{const a=new Date;k.value=a.toISOString().split("T")[0],Lt(),et(),rt(),bt(),Mt()}),st(g,a=>{a==="overview"?rt():a==="summary"?(!m.value&&M.value.length>0&&(m.value=M.value[0].id),m.value&&ut()):a==="activity"?et(!0):a==="user-hours"&&((!N.value||!L.value)&&bt(),ht())}),st(m,a=>{g.value==="summary"&&a&&ut()}),st(k,()=>{g.value==="summary"&&m.value&&ut()}),st(V,()=>{g.value==="activity"&&et(!0)}),(a,e)=>(l(),r(b,null,[wt(Bt(It),{title:"Analytics"}),wt(Pt,null,{header:St(()=>[...e[11]||(e[11]=[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Analytics & Reports ",-1)])]),default:St(()=>[t("div",Rt,[t("div",Vt,[t("div",Ot,[t("nav",jt,[t("button",{onClick:e[0]||(e[0]=s=>g.value="overview"),class:C(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",g.value==="overview"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Overview ",2),t("button",{onClick:e[1]||(e[1]=s=>g.value="summary"),class:C(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",g.value==="summary"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," User Summary ",2),t("button",{onClick:e[2]||(e[2]=s=>g.value="user-hours"),class:C(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",g.value==="user-hours"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," User Hours ",2),t("button",{onClick:e[3]||(e[3]=s=>g.value="activity"),class:C(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",g.value==="activity"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Activity Log ",2)])]),g.value==="overview"?(l(),r("div",qt,[t("section",zt,[t("div",Zt,[t("div",null,[e[12]||(e[12]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Company Health Overview",-1)),p.value?(l(),r("p",Gt," As of "+n(gt(p.value.generated_at)),1)):f("",!0)]),t("div",Qt,[t("button",{type:"button",onClick:xt,disabled:P.value||ot.value,class:"inline-flex items-center gap-2 rounded-md border border-indigo-200 bg-white px-4 py-2 text-sm font-medium text-indigo-600 shadow-sm transition hover:bg-indigo-50 disabled:cursor-not-allowed disabled:border-gray-200 disabled:text-gray-400"},[P.value?(l(),r("span",Kt)):f("",!0),t("span",null,n(P.value?"Refreshingâ€¦":"Refresh"),1)],8,Jt)])]),ot.value?(l(),r("div",Xt,[...e[13]||(e[13]=[t("div",{class:"mx-auto mb-3 h-8 w-8 animate-spin rounded-full border-b-2 border-indigo-600"},null,-1),at(" Loading analytics summaryâ€¦ ",-1)])])):Q.value?(l(),r("div",Yt,[t("div",null,[e[14]||(e[14]=t("h4",{class:"font-semibold text-red-800"},"We couldnâ€™t load the analytics overview.",-1)),t("p",te,n(Q.value),1)]),t("div",null,[t("button",{type:"button",onClick:xt,class:"inline-flex items-center rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-red-500"}," Try again ")])])):p.value?(l(),r("div",ee,[t("div",se,[(l(!0),r(b,null,_(Dt.value,s=>(l(),r("div",{key:s.title,class:C(["rounded-xl border bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:shadow-md",s.accent])},[t("h4",ae,n(s.title),1),t("p",oe,n(s.value),1),t("p",re,n(s.subtitle),1)],2))),128))]),t("div",le,[t("div",ne,[t("div",ie,[e[15]||(e[15]=t("h4",{class:"text-base font-semibold text-gray-800"},"Whoâ€™s still on the clock",-1)),t("p",de,n(pt.value?"Top 10 current sessions":"No one is clocked in right now."),1)]),pt.value?(l(),r("div",ue,[(l(!0),r(b,null,_(p.value.open_entries,s=>(l(),r("div",{key:s.entry_id,class:"flex items-center justify-between gap-3 px-5 py-4"},[t("div",null,[t("p",ce,n(s.user.name||"Unknown User"),1),t("p",me,[at(n(s.user.email||"No email listed")+" ",1),s.user.team?(l(),r("span",ve,"Â· "+n(s.user.team),1)):f("",!0)])]),t("div",xe,[t("p",ge,n(Tt(s.minutes_running)),1),t("p",pe,"since "+n(Ut(s.clock_in)),1)])]))),128))])):(l(),r("div",ye," All clocks are cleared for today. Great job! "))]),t("div",be,[e[16]||(e[16]=t("div",{class:"border-b border-gray-100 px-5 py-4"},[t("h4",{class:"text-base font-semibold text-gray-800"},"At a glance"),t("p",{class:"text-sm text-gray-500"},"Quick context for today and the week.")],-1)),t("dl",he,[(l(!0),r(b,null,_(Ht.value,s=>(l(),r("div",{key:s.label,class:"flex items-center justify-between gap-4"},[t("dt",fe,n(s.label),1),t("dd",_e,n(s.value),1)]))),128))])])])])):f("",!0)])])):g.value==="summary"?(l(),r("div",ke,[t("div",we,[t("div",Se,[t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"User",-1)),B(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>m.value=s),class:"w-full rounded-md border-gray-300 shadow-sm"},[e[17]||(e[17]=t("option",{value:null},"Select User",-1)),(l(!0),r(b,null,_(M.value,s=>(l(),r("option",{key:s.id,value:s.id},n(s.name),9,Te))),128))],512),[[mt,m.value]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),B(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>k.value=s),type:"date",class:"w-full rounded-md border-gray-300 shadow-sm"},null,512),[[vt,k.value]])]),t("div",Ue,[t("button",{onClick:At,disabled:!m.value,class:"flex-1 rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed"}," Export CSV ",8,De),t("button",{onClick:Et,disabled:!m.value,class:"flex-1 rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-500 disabled:bg-gray-400 disabled:cursor-not-allowed"}," Export PDF ",8,He)])])]),t("div",Ce,[e[25]||(e[25]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Daily Summary",-1)),t("div",Me,[t("div",null,[e[20]||(e[20]=t("div",{class:"text-gray-500"},"ðŸ•’ Time In Hours",-1)),t("div",Ne,n(q(w.value.workSeconds)),1)]),t("div",null,[e[21]||(e[21]=t("div",{class:"text-gray-500"},"â˜• Total Breaks",-1)),t("div",Le,n(q(w.value.breakSeconds)),1)]),t("div",null,[e[22]||(e[22]=t("div",{class:"text-gray-500"},"ðŸ“‹ Entries",-1)),t("div",Ae,n(w.value.tasksCount),1)]),t("div",null,[e[23]||(e[23]=t("div",{class:"text-gray-500"},"â° Status",-1)),t("div",{class:C(["font-semibold",{"text-green-700":w.value.status==="Perfect","text-yellow-700":w.value.status==="Late","text-gray-700":w.value.status==="No Entry"}])},n(w.value.status),3)]),t("div",null,[e[24]||(e[24]=t("div",{class:"text-gray-500"},"âš¡ Overtime",-1)),t("div",Ee,n(q(w.value.overtimeSeconds)),1)])])]),t("div",$e,[t("div",Fe,[t("table",We,[e[27]||(e[27]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),t("tbody",Be,[(l(!0),r(b,null,_(h.value,(s,u)=>(l(),r("tr",{key:u},[t("td",Ie,n(s.name),1),t("td",Pe,n(dt(s.start)),1),t("td",Re,n(dt(s.end)),1),t("td",Ve,n(q(s.durationSeconds)),1),t("td",Oe,n(q(s.breakDurationSeconds||0)),1),t("td",je,n(s.notes||"-"),1)]))),128)),h.value.length===0&&!J.value?(l(),r("tr",qe,[...e[26]||(e[26]=[t("td",{colspan:"6",class:"px-4 py-4 text-center text-sm text-gray-500"},"No entries for selected day",-1)])])):f("",!0)])])]),J.value?(l(),r("div",ze,[...e[28]||(e[28]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):f("",!0)])])):g.value==="activity"?(l(),r("div",Ze,[t("div",Ge,[t("div",Qe,[e[30]||(e[30]=t("h3",{class:"text-lg font-medium text-gray-900"},"Real-Time Activity Log",-1)),t("div",Je,[e[29]||(e[29]=t("div",{class:"flex items-center gap-2 text-sm text-gray-600"},[t("span",{class:"inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t("span",null,"Live Updates")],-1)),t("button",{onClick:e[6]||(e[6]=s=>et()),class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-indigo-500"}," Refresh ")])]),t("div",Ke,[t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter by Action",-1)),B(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>V.value=s),class:"w-full rounded-md border-gray-300 shadow-sm"},[...e[31]||(e[31]=[t("option",{value:""},"All Actions",-1),t("option",{value:"clock_in"},"Clock In",-1),t("option",{value:"clock_out"},"Clock Out",-1),t("option",{value:"break_start"},"Break Start",-1),t("option",{value:"break_end"},"Break End",-1),t("option",{value:"lunch_start"},"Lunch Start",-1),t("option",{value:"lunch_end"},"Lunch End",-1)])],512),[[mt,V.value]])])])]),t("div",Xe,[t("div",Ye,[t("table",ts,[e[34]||(e[34]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"User"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Action"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Description"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Time")])],-1)),t("tbody",es,[(l(!0),r(b,null,_(it.value,s=>{var u,v,x;return l(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",ss,[t("div",as,[t("div",os,[t("div",rs,[t("span",ls,n((u=s.user)!=null&&u.name?s.user.name.charAt(0).toUpperCase():"?"),1)])]),t("div",ns,[t("div",is,n(((v=s.user)==null?void 0:v.name)||"Unknown User"),1),t("div",ds,n((x=s.user)==null?void 0:x.email),1)])])]),t("td",us,[t("span",{class:C(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":s.action==="clock_in","bg-red-100 text-red-800":s.action==="clock_out","bg-yellow-100 text-yellow-800":s.action.includes("break"),"bg-blue-100 text-blue-800":s.action.includes("lunch")}])},n(s.action.replace("_"," ").replace(/\b\w/g,y=>y.toUpperCase())),3)]),t("td",cs,[t("div",ms,n(s.description),1)]),t("td",vs,[at(n(nt(s.created_at))+" ",1),t("div",xs,n(dt(s.created_at)),1)])])}),128)),it.value.length===0&&!K.value?(l(),r("tr",gs,[...e[33]||(e[33]=[t("td",{colspan:"4",class:"px-4 py-4 text-center text-sm text-gray-500"},"No activity logs found",-1)])])):f("",!0)])])]),K.value?(l(),r("div",ps,[...e[35]||(e[35]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):f("",!0)])])):g.value==="user-hours"?(l(),r("div",ys,[t("div",bs,[e[40]||(e[40]=t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900"},"User Hours Matrix"),t("p",{class:"text-sm text-gray-500"}," Each cell shows Task Hours / Work Hours for that user and date. Totals per user are shown in the bottom row. ")],-1)),t("div",hs,[j.value.length?(l(),r("div",fs,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Team",-1)),B(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>Y.value=s),class:"rounded-md border-gray-300 shadow-sm text-sm min-w-[10rem]"},[e[36]||(e[36]=t("option",{value:null},"All Teams",-1)),(l(!0),r(b,null,_(j.value,s=>(l(),r("option",{key:s.id,value:s.id},n(s.name),9,_s))),128))],512),[[mt,Y.value,void 0,{number:!0}]])])):f("",!0),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Start Date",-1)),B(t("input",{type:"date","onUpdate:modelValue":e[9]||(e[9]=s=>N.value=s),class:"rounded-md border-gray-300 shadow-sm text-sm"},null,512),[[vt,N.value]])]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"End Date",-1)),B(t("input",{type:"date","onUpdate:modelValue":e[10]||(e[10]=s=>L.value=s),class:"rounded-md border-gray-300 shadow-sm text-sm"},null,512),[[vt,L.value]])]),t("button",{type:"button",onClick:ht,disabled:E.value,class:"inline-flex items-center gap-2 rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-500 disabled:opacity-60 disabled:cursor-not-allowed"},[E.value?(l(),r("span",ws)):f("",!0),t("span",null,n(E.value?"Loadingâ€¦":"Apply"),1)],8,ks)])]),tt.value?(l(),r("div",Ss,[t("p",Ts,n(tt.value),1)])):(l(),r("div",Us,[E.value?(l(),r("div",Ds,[...e[41]||(e[41]=[t("div",{class:"mx-auto mb-3 h-8 w-8 animate-spin rounded-full border-b-2 border-indigo-600"},null,-1),at(" Loading user hoursâ€¦ ",-1)])])):O.value.length?(l(),r("div",Cs,[t("table",Ms,[t("thead",Ns,[t("tr",null,[e[42]||(e[42]=t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Date ",-1)),(l(!0),r(b,null,_(A.value,s=>(l(),r("th",{key:s,class:"px-4 py-3 text-center text-xs font-medium uppercase tracking-wider text-gray-500"},n(s),1))),128))])]),t("tbody",Ls,[(l(!0),r(b,null,_(O.value,s=>(l(),r("tr",{key:s.date},[t("td",As,n(Nt(s.date)),1),(l(!0),r(b,null,_(A.value,u=>(l(),r("td",{key:u+s.date,class:"px-4 py-3 text-xs text-gray-700 text-center align-top"},[s.cells[u]?(l(),r("div",Es,[t("div",$s," Task: "+n(s.cells[u].taskHours.toFixed(2))+" h ",1),t("div",Fs," Work: "+n(s.cells[u].workHours.toFixed(2))+" h ",1)])):(l(),r("div",Ws,"â€”"))]))),128))]))),128))]),t("tfoot",Bs,[t("tr",null,[e[43]||(e[43]=t("th",{class:"px-4 py-3 text-sm font-semibold text-gray-900 text-right"}," Totals ",-1)),(l(!0),r(b,null,_(A.value,s=>{var u,v;return l(),r("td",{key:s+"-total",class:"px-4 py-3 text-xs text-gray-900 text-center"},[t("div",Is," Task: "+n((((u=X.value[s])==null?void 0:u.taskHours)??0).toFixed(2))+" h ",1),t("div",Ps," Work: "+n((((v=X.value[s])==null?void 0:v.workHours)??0).toFixed(2))+" h ",1)])}),128))])])])])):(l(),r("div",Hs," No data for selected range. "))]))])):f("",!0)])])]),_:1})],64))}});export{zs as default};
