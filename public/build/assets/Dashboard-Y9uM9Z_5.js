import{d as St,r as u,q as g,o as It,z as Bt,c as l,a as rt,u as Et,h as Lt,w as dt,b as e,e as k,f as n,t as i,n as st,g as G,F as w,i as M,v as at,k as Pt,j as Ot}from"./app-CugchNe3.js";import{_ as At}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-By2mHGFa.js";import{a as m}from"./api-BdhZ5tnB.js";const Nt={class:"py-12"},Ut={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},jt={key:0,class:"mb-6 grid gap-4 md:grid-cols-3"},Vt={class:"overflow-hidden bg-white shadow sm:rounded-lg"},zt={class:"px-4 py-5 sm:p-6"},Ft={class:"mt-2 text-3xl font-bold text-gray-900"},Rt={class:"text-xs text-gray-500"},Ht={class:"mt-4 flex flex-wrap gap-2"},Wt=["disabled"],qt=["disabled"],Gt={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Jt={class:"px-4 py-5 sm:p-6"},Kt={key:0,class:"mt-2"},Qt={class:"text-2xl font-bold text-gray-900 mt-1"},Xt={class:"mt-3"},Yt=["disabled"],Zt={key:1,class:"mt-2"},te={class:"flex items-center gap-2 w-full"},ee=["value"],se=["disabled"],ae={key:0,class:"text-sm text-gray-500 mt-2"},oe={class:"overflow-hidden bg-white shadow sm:rounded-lg"},le={class:"px-4 py-5 sm:p-6"},ne={class:"mt-2 text-3xl font-bold text-gray-900"},ie={key:1,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},re={class:"px-4 py-5 sm:p-6"},de={class:"flex items-center justify-between mb-4"},ce=["disabled"],ue={class:"overflow-x-auto"},pe={class:"min-w-full divide-y divide-gray-200"},xe={class:"divide-y divide-gray-200 bg-white"},ve={class:"px-4 py-4 text-sm text-gray-900"},me={class:"px-4 py-4 text-sm text-gray-500"},ye={class:"px-4 py-4 text-sm text-gray-500"},ge={class:"px-4 py-4 text-sm text-gray-500"},he={key:0},_e={key:2,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},ke={class:"px-4 py-5 sm:p-6"},fe={class:"flex items-center justify-between mb-3"},be={class:"flex items-center gap-2"},we={class:"overflow-x-auto"},Te={class:"min-w-full divide-y divide-gray-200"},Ce={class:"divide-y divide-gray-200 bg-white"},Me={class:"whitespace-nowrap px-6 py-4 text-sm text-indigo-600"},De=["onClick"],$e={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},Se={class:"flex items-center space-x-2"},Ie=["onClick","disabled","aria-label"],Be={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},Ee={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},Le=["onClick","disabled"],Pe={key:1,class:"text-xs text-green-700 font-medium"},Oe={class:"flex items-center justify-between px-6 py-3 text-sm text-gray-600"},Ae={class:"space-x-2"},Ne=["disabled"],Ue=["disabled"],je={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Ve={class:"px-4 py-5 sm:p-6"},ze={key:0,class:"text-center py-8 text-gray-500"},Fe={key:1,class:"overflow-x-auto"},Re={class:"min-w-full divide-y divide-gray-200"},He={class:"divide-y divide-gray-200 bg-white"},We={class:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900"},qe={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Ge={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Je={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Ke={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Qe={key:0,class:"flex items-center space-x-2"},Xe=["disabled"],Ye=["disabled"],Ze=["disabled"],ts=["disabled"],es={key:1,class:"text-xs text-gray-400"},ss={class:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900"},as={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},os={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},ls={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},ns={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},is={key:0,class:"flex items-center space-x-2"},rs=["onClick","disabled"],ds=["disabled"],cs={key:1,class:"text-xs text-gray-400"},us={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},ps={class:"w-full max-w-2xl rounded-lg bg-white shadow-lg"},xs={class:"flex items-center justify-between border-b px-4 py-3"},vs={class:"p-4"},ms={key:0,class:"text-gray-500 text-sm"},ys={key:1,class:"overflow-x-auto"},gs={class:"min-w-full divide-y divide-gray-200"},hs={class:"divide-y divide-gray-200 bg-white"},_s={class:"px-4 py-2 text-sm text-gray-900"},ks={class:"px-4 py-2 text-sm text-gray-700"},fs={class:"px-4 py-2 text-sm text-gray-700"},bs={class:"px-4 py-2 text-sm text-gray-700"},ws={class:"px-4 py-2 text-sm text-gray-900"},Ts={class:"px-4 py-2 text-sm text-gray-700"},Cs={class:"px-4 py-2 text-sm text-gray-700"},Ms={class:"px-4 py-2 text-sm text-gray-700"},Ds={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},$s={class:"w-full max-w-lg rounded-lg bg-white shadow-lg"},Ss={class:"flex items-center justify-between border-b px-4 py-3"},Is={key:0,class:"p-4 text-sm text-gray-700"},Bs={class:"font-medium mb-1"},Es={class:"mb-2"},Ls={key:0,class:"mb-2"},Ps=["href"],Os={key:1,class:"prose max-w-none"},Vs=St({__name:"Dashboard",setup(As){const c=u(null),d=u(!1),D=u(""),$=u(new Date),T=u("employee"),E=u([]),L=u(null),x=u(null),N=u(!1),ot=u([]),S=u([]),f=u(null),U=u(!1),J=u(""),C=u(1),P=u(10),j=u("all"),K=g(()=>{const s=J.value.trim().toLowerCase();let t=E.value;return j.value!=="all"&&(t=t.filter(o=>(o.status||"active").toLowerCase()===j.value)),s?t.filter(o=>(o.title||"").toLowerCase().includes(s)):t}),V=g(()=>Math.max(1,Math.ceil(K.value.length/P.value))),ct=g(()=>{const t=(Math.min(C.value,V.value)-1)*P.value;return K.value.slice(t,t+P.value)}),O=s=>{const t=Math.max(1,Math.min(s,V.value));C.value=t},z=u([]),F=u(!1),Q=async()=>{var s;F.value=!0;try{const t=await m.get("/admin/analytics/activity-logs",{params:{limit:100}});z.value=((s=t.data)==null?void 0:s.data)||[]}catch{z.value=[]}finally{F.value=!1}};let X=null;const h=g(()=>{var s,t;return!!((s=c.value)!=null&&s.clock_in)&&!((t=c.value)!=null&&t.clock_out)}),_=g(()=>{var s,t;return!!((s=c.value)!=null&&s.break_start)&&!((t=c.value)!=null&&t.break_end)}),ut=g(()=>{var s,t;return((s=c.value)==null?void 0:s.lunch_start)&&!((t=c.value)!=null&&t.lunch_end)}),b=s=>s?(typeof s=="string"?new Date(s):s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"--",R=(s,t)=>{if(!s||!t)return"--";const o=new Date(s),p=new Date(t).getTime()-o.getTime(),y=Math.floor(p/36e5),q=Math.floor(p%36e5/6e4),a=Math.floor(p%6e4/1e3);return`${y}h ${q}m ${a}s`},Y=g(()=>{const s=[];if(!c.value)return s;const t=c.value;return s.push({type:"Clock In",start:t.clock_in||null,end:null,duration:"--",status:t.clock_in?"Completed":"Not started"}),(t.break_start||t.break_end)&&s.push({type:"Break",start:t.break_start||null,end:t.break_end||null,duration:t.break_start&&t.break_end?R(t.break_start,t.break_end):t.break_start?"In progress":"--",status:t.break_start&&t.break_end?"Completed":t.break_start?"Active":"Scheduled"}),(t.lunch_start||t.lunch_end)&&s.push({type:"Lunch",start:t.lunch_start||null,end:t.lunch_end||null,duration:t.lunch_start&&t.lunch_end?R(t.lunch_start,t.lunch_end):t.lunch_start?"In progress":"--",status:t.lunch_start&&t.lunch_end?"Completed":t.lunch_start?"Active":"Scheduled"}),t.clock_out&&s.push({type:"Clock Out",start:t.clock_out||null,end:null,duration:"--",status:t.clock_out?"Completed":"Pending"}),s});It(()=>{A(),pt(),I(),W(),X=window.setInterval(()=>{$.value=new Date},1e3)}),Bt(()=>{X&&window.clearInterval(X)});const A=async()=>{try{const s=await m.get("/time-entries/current");c.value=s.data,ft()}catch(s){c.value=null,D.value="No entry today",console.error("Error fetching current entry:",s)}},pt=async()=>{var s;try{const o=(((s=(await m.get("/admin/users")).data)==null?void 0:s.data)||[]).find(r=>(r==null?void 0:r.id)&&(r==null?void 0:r.email));o!=null&&o.role&&(T.value=o.role),T.value==="admin"&&(await Q(),setInterval(()=>{Q()},5e3))}catch{}},I=async()=>{try{const s=await m.get("/my/tasks");E.value=s.data}catch{}},Z=async()=>{try{await bt()}catch{}},tt=async()=>{try{await wt()}catch{}},lt=async()=>{try{await Tt()}catch{}},H=async()=>{try{await Ct()}catch{}},W=async()=>{try{const s=await m.get("/tasks/today-entries");S.value=s.data||[];const t=(S.value||[]).find(o=>o.clock_in&&!o.clock_out);x.value=t?t.task_id:null}catch{S.value=[]}},nt=async s=>{try{const t=await m.get(`/tasks/${s}/sync`);f.value=t.data,U.value=!0}catch{U.value=!1}},xt=async()=>{if(_.value){await H();return}h.value?await tt():await Z()},vt=async()=>{if(x.value){alert("Pause or stop the running task first.");return}_.value?await H():(h.value||await Z(),await lt())},B=s=>s<10?`0${s}`:`${s}`,mt=g(()=>{var s,t;return _.value&&((s=c.value)!=null&&s.break_start)?new Date(c.value.break_start):h.value&&((t=c.value)!=null&&t.clock_in)?new Date(c.value.clock_in):null}),yt=g(()=>{const s=S.value.find(t=>t.clock_in&&!t.clock_out);return s?new Date(s.clock_in):null}),gt=g(()=>{const s=mt.value;if(!s)return"00:00:00";const t=$.value.getTime()-s.getTime(),o=Math.max(0,Math.floor(t/1e3)),r=Math.floor(o/3600),p=Math.floor(o%3600/60),y=o%60;return`${B(r)}:${B(p)}:${B(y)}`}),ht=g(()=>{const s=yt.value;if(!s)return"00:00:00";const t=$.value.getTime()-s.getTime(),o=Math.max(0,Math.floor(t/1e3)),r=Math.floor(o/3600),p=Math.floor(o%3600/60),y=o%60;return`${B(r)}:${B(p)}:${B(y)}`}),_t=g(()=>{const s=c.value;if(!s||!s.clock_in)return 0;const t=new Date(s.clock_in),o=s.clock_out?new Date(s.clock_out):$.value;let r=Math.max(0,Math.floor((o.getTime()-t.getTime())/6e4));if(s.break_start&&s.break_end){const p=new Date(s.break_start),y=new Date(s.break_end);r-=Math.max(0,Math.floor((y.getTime()-p.getTime())/6e4))}else if(s.break_start&&!s.break_end){const p=new Date(s.break_start);r-=Math.max(0,Math.floor(($.value.getTime()-p.getTime())/6e4))}if(s.lunch_start&&s.lunch_end){const p=new Date(s.lunch_start),y=new Date(s.lunch_end);r-=Math.max(0,Math.floor((y.getTime()-p.getTime())/6e4))}else if(s.lunch_start&&!s.lunch_end){const p=new Date(s.lunch_start);r-=Math.max(0,Math.floor(($.value.getTime()-p.getTime())/6e4))}return(Math.max(0,r)/60).toFixed(2)}),kt=async()=>{try{N.value=!0,ot.value=[c.value].filter(Boolean)}catch{N.value=!0,ot.value=[]}},ft=()=>{!c.value||!c.value.clock_in?D.value="Not clocked in":c.value.clock_out?D.value="Clocked out":ut.value?D.value="On lunch":_.value?D.value="On break":D.value="Clocked in"},bt=async s=>{var t,o;d.value=!0;try{const r={};await m.post("/time-entries/clock-in",r),await A(),await I()}catch(r){alert(((o=(t=r.response)==null?void 0:t.data)==null?void 0:o.message)||"Error clocking in")}finally{d.value=!1}},wt=async()=>{var s,t;d.value=!0;try{if(x.value){alert("Pause or stop the running task first."),d.value=!1;return}await m.post("/time-entries/clock-out"),await A(),await I()}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error clocking out")}finally{d.value=!1}},Tt=async()=>{var s,t;d.value=!0;try{await m.post("/time-entries/break-start"),await A(),await I()}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error starting break")}finally{d.value=!1}},Ct=async()=>{var s,t;d.value=!0;try{await m.post("/time-entries/break-end"),await A(),await I()}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error ending break")}finally{d.value=!1}},et=async s=>{var t,o;if(!h.value){alert("Please Time In first before starting a task.");return}if(_.value&&await H(),x.value&&x.value!==s)try{await m.post("/tasks/stop")}catch{}try{await m.post("/tasks/start",{task_id:s}),x.value=s,await W()}catch(r){alert(((o=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:o.message)||"Failed to start task")}},it=async()=>{try{await m.post("/tasks/stop")}catch{}x.value=null,await W()},Mt=async()=>{if(h.value){try{await m.post("/tasks/stop")}catch{await tt()}x.value=null,await W()}},Dt=async s=>{var t,o;d.value=!0;try{await m.post(`/tasks/${s}/status`,{status:"complete"}),await I()}catch(r){alert(((o=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:o.message)||"Failed to complete task")}finally{d.value=!1}};return(s,t)=>(n(),l(w,null,[rt(Et(Lt),{title:"Dashboard"}),rt(At,null,{header:dt(()=>[...t[15]||(t[15]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Time Tracker Dashboard ",-1)])]),default:dt(()=>{var o,r,p,y,q;return[e("div",Nt,[e("div",Ut,[T.value!=="admin"?(n(),l("div",jt,[e("div",Vt,[e("div",zt,[t[16]||(t[16]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Work Day Timer",-1)),e("p",Ft,i(gt.value),1),e("p",Rt,i(_.value?"On Break":h.value?"Working":"Idle"),1),e("div",Ht,[e("button",{onClick:xt,disabled:d.value,class:st(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",h.value?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"])},i(h.value?"Time Out":"Time In"),11,Wt),e("button",{onClick:vt,disabled:d.value,class:st(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",_.value?"bg-orange-600 hover:bg-orange-700":"bg-yellow-600 hover:bg-yellow-700"])},i(_.value?"Break Out":"Break In"),11,qt)])])]),e("div",Gt,[e("div",Jt,[t[18]||(t[18]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Running Task",-1)),x.value?(n(),l("div",Kt,[e("button",{onClick:t[0]||(t[0]=a=>nt(x.value)),class:"text-indigo-600 hover:underline text-sm"},i(((o=E.value.find(a=>a.id===x.value))==null?void 0:o.title)||"#"+x.value),1),e("p",Qt,i(ht.value),1),e("div",Xt,[e("button",{onClick:t[1]||(t[1]=a=>it()),disabled:d.value,class:"rounded-md bg-yellow-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-yellow-700"},"Pause",8,Yt)])])):(n(),l("div",Zt,[e("div",te,[G(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>L.value=a),class:"w-full rounded-md border-gray-300 text-sm shadow-sm"},[t[17]||(t[17]=e("option",{value:null},"Select a task",-1)),(n(!0),l(w,null,M(E.value,a=>(n(),l("option",{key:a.id,value:a.id},i(a.title),9,ee))),128))],512),[[at,L.value]]),e("button",{onClick:t[3]||(t[3]=a=>L.value?et(L.value):void 0),disabled:d.value||!L.value,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700 disabled:opacity-50"},"Start",8,se)]),E.value.length?k("",!0):(n(),l("p",ae,"No tasks available."))]))])]),e("div",oe,[e("div",le,[t[21]||(t[21]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Daily Logs",-1)),e("p",ne,[Pt(i(_t.value),1),t[19]||(t[19]=e("span",{class:"text-sm font-normal text-gray-500"}," / 8 Hours",-1))]),e("div",{class:"mt-4 flex space-x-2"},[e("button",{onClick:kt,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-700"},"Daily Logs"),t[20]||(t[20]=e("button",{class:"rounded-md bg-yellow-500 px-3 py-1.5 text-xs font-semibold text-white hover:bg-yellow-600"},"Send Report",-1))])])])])):k("",!0),T.value==="admin"?(n(),l("div",ie,[e("div",re,[e("div",de,[t[22]||(t[22]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Real-Time Activity Log",-1)),e("button",{onClick:Q,disabled:F.value,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-500"},"Refresh",8,ce)]),e("div",ue,[e("table",pe,[t[24]||(t[24]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"User"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Action"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Description"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Time")])],-1)),e("tbody",xe,[(n(!0),l(w,null,M(z.value,a=>{var v;return n(),l("tr",{key:a.id},[e("td",ve,i(((v=a.user)==null?void 0:v.name)||"Unknown"),1),e("td",me,i(a.action),1),e("td",ye,i(a.description),1),e("td",ge,i(new Date(a.created_at).toLocaleString()),1)])}),128)),z.value.length===0&&!F.value?(n(),l("tr",he,[...t[23]||(t[23]=[e("td",{colspan:"4",class:"px-4 py-4 text-center text-sm text-gray-500"},"No activity logs found",-1)])])):k("",!0)])])])])])):k("",!0),T.value!=="admin"?(n(),l("div",_e,[e("div",ke,[e("div",fe,[t[27]||(t[27]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"My Tasks",-1)),e("div",be,[G(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>J.value=a),onInput:t[5]||(t[5]=a=>O(1)),type:"text",placeholder:"Search tasks",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[Ot,J.value]]),G(e("select",{"onUpdate:modelValue":t[6]||(t[6]=a=>j.value=a),onChange:t[7]||(t[7]=a=>O(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...t[25]||(t[25]=[e("option",{value:"all"},"All",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"complete"},"Complete",-1)])],544),[[at,j.value]]),G(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>P.value=a),onChange:t[9]||(t[9]=a=>O(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...t[26]||(t[26]=[e("option",{value:5},"5",-1),e("option",{value:10},"10",-1),e("option",{value:20},"20",-1),e("option",{value:50},"50",-1)])],544),[[at,P.value,void 0,{number:!0}]])])]),e("div",we,[e("table",Te,[t[30]||(t[30]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Actions")])],-1)),e("tbody",Ce,[(n(!0),l(w,null,M(ct.value,a=>(n(),l("tr",{key:a.id},[e("td",Me,[e("button",{onClick:v=>nt(a.id),class:"hover:underline"},i(a.title),9,De)]),e("td",$e,[e("div",Se,[e("button",{onClick:v=>x.value===a.id?it():et(a.id),disabled:d.value,class:st(["rounded-full p-2 text-white",x.value===a.id?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"]),"aria-label":x.value===a.id?"Pause":"Play"},[x.value!==a.id?(n(),l("svg",Be,[...t[28]||(t[28]=[e("path",{d:"M8 5v14l11-7z"},null,-1)])])):(n(),l("svg",Ee,[...t[29]||(t[29]=[e("path",{d:"M6 5h4v14H6zM14 5h4v14h-4z"},null,-1)])]))],10,Ie),(a.status||"active")!=="complete"?(n(),l("button",{key:0,onClick:v=>Dt(a.id),disabled:d.value,class:"rounded-md bg-gray-900 px-3 py-1.5 text-xs font-semibold text-white hover:bg-black"},"Complete",8,Le)):(n(),l("span",Pe,"Completed"))])])]))),128))])]),e("div",Oe,[e("div",null," Page "+i(C.value)+" of "+i(V.value)+" â€¢ "+i(K.value.length)+" total ",1),e("div",Ae,[e("button",{onClick:t[10]||(t[10]=a=>O(C.value-1)),disabled:C.value<=1,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Prev",8,Ne),e("button",{onClick:t[11]||(t[11]=a=>O(C.value+1)),disabled:C.value>=V.value,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Next",8,Ue)])])])])])):k("",!0),e("div",je,[e("div",Ve,[t[32]||(t[32]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Today's Time Events",-1)),Y.value.length===0?(n(),l("div",ze," No time entries recorded today. Clock in to start tracking time. ")):(n(),l("div",Fe,[e("table",Re,[t[31]||(t[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Event Type "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Start Time "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," End Time "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Duration "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Status ")])],-1)),e("tbody",He,[(n(!0),l(w,null,M(Y.value,(a,v)=>(n(),l("tr",{key:v},[e("td",We,i(a.type),1),e("td",qe,i(b(a.start)),1),e("td",Ge,i(b(a.end)),1),e("td",Je,i(a.duration),1),e("td",Ke,[T.value!=="admin"?(n(),l("div",Qe,[e("button",{onClick:Z,disabled:d.value||h.value,class:"rounded-md bg-green-600 px-2 py-1 text-xs font-semibold text-white hover:bg-green-700"},"Time In",8,Xe),e("button",{onClick:lt,disabled:d.value||!h.value||_.value,class:"rounded-md bg-yellow-600 px-2 py-1 text-xs font-semibold text-white hover:bg-yellow-700"},"Break In",8,Ye),e("button",{onClick:H,disabled:d.value||!_.value,class:"rounded-md bg-orange-600 px-2 py-1 text-xs font-semibold text-white hover:bg-orange-700"},"Break Out",8,Ze),e("button",{onClick:tt,disabled:d.value||!h.value,class:"rounded-md bg-red-600 px-2 py-1 text-xs font-semibold text-white hover:bg-red-700"},"Time Out",8,ts)])):(n(),l("span",es,"Admin view"))])]))),128)),(n(!0),l(w,null,M(S.value,a=>{var v;return n(),l("tr",{key:`task-${a.id}`},[e("td",ss," Task: "+i(((v=a.task)==null?void 0:v.title)||`#${a.task_id}`),1),e("td",as,i(b(a.clock_in)),1),e("td",os,i(b(a.clock_out)),1),e("td",ls,i(a.clock_in&&a.clock_out?R(a.clock_in,a.clock_out):a.clock_in?"In progress":"--"),1),e("td",ns,[T.value!=="admin"?(n(),l("div",is,[e("button",{onClick:$t=>et(a.task_id),disabled:d.value,class:"rounded-md bg-green-600 px-2 py-1 text-xs font-semibold text-white hover:bg-green-700"},"Play",8,rs),e("button",{onClick:t[12]||(t[12]=$t=>Mt()),disabled:d.value,class:"rounded-md bg-red-600 px-2 py-1 text-xs font-semibold text-white hover:bg-red-700"},"Stop",8,ds)])):(n(),l("span",cs,"Admin view"))])])}),128))])])]))])])]),N.value?(n(),l("div",us,[e("div",ps,[e("div",xs,[t[33]||(t[33]=e("h4",{class:"text-md font-semibold"},"Daily Logs",-1)),e("button",{onClick:t[13]||(t[13]=a=>N.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs"},"Close")]),e("div",vs,[c.value?(n(),l("div",ys,[e("table",gs,[t[34]||(t[34]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Event"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration")])],-1)),e("tbody",hs,[(n(!0),l(w,null,M(Y.value,(a,v)=>(n(),l("tr",{key:v},[e("td",_s,i(a.type),1),e("td",ks,i(b(a.start)),1),e("td",fs,i(b(a.end)),1),e("td",bs,i(a.duration),1)]))),128)),(n(!0),l(w,null,M(S.value,a=>{var v;return n(),l("tr",{key:`modal-task-${a.id}`},[e("td",ws,"Task: "+i(((v=a.task)==null?void 0:v.title)||`#${a.task_id}`),1),e("td",Ts,i(b(a.clock_in)),1),e("td",Cs,i(b(a.clock_out)),1),e("td",Ms,i(a.clock_in&&a.clock_out?R(a.clock_in,a.clock_out):a.clock_in?"In progress":"--"),1)])}),128))])])])):(n(),l("div",ms,"No entry today."))])])])):k("",!0),U.value?(n(),l("div",Ds,[e("div",$s,[e("div",Ss,[t[35]||(t[35]=e("h4",{class:"text-md font-semibold"},"Task Details",-1)),e("button",{onClick:t[14]||(t[14]=a=>U.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs"},"Close")]),f.value?(n(),l("div",Is,[e("p",Bs,i((r=f.value.task)==null?void 0:r.title),1),e("p",Es,"Status: "+i((p=f.value.task)==null?void 0:p.status),1),(y=f.value.clickup)!=null&&y.url?(n(),l("p",Ls,[e("a",{href:f.value.clickup.url,target:"_blank",class:"text-indigo-600 hover:underline"},"Open in ClickUp",8,Ps)])):k("",!0),(q=f.value.clickup)!=null&&q.text_content?(n(),l("div",Os,i(f.value.clickup.text_content),1)):k("",!0)])):k("",!0)])])):k("",!0)])]}),_:1})],64))}});export{Vs as default};
