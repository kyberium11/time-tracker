import{d as Pt,r as c,q as g,o as At,z as Nt,c as n,a as xt,u as Ot,h as Vt,w as vt,b as e,e as h,f as i,t as r,n as Y,g as S,F as _,i as w,v as Z,k as Ft,j as rt}from"./app-Ba-ea8Xo.js";import{_ as jt}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-DnJ3SI4H.js";import{a as y}from"./api-D7GkFuEv.js";const zt={class:"py-12"},Rt={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},Ht={key:0,class:"mb-6 grid gap-4 md:grid-cols-3"},Wt={class:"overflow-hidden bg-white shadow sm:rounded-lg"},qt={class:"px-4 py-5 sm:p-6"},Gt={class:"mt-2 text-3xl font-bold text-gray-900"},Jt={class:"text-xs text-gray-500"},Kt={class:"mt-4 flex flex-wrap gap-2"},Qt=["disabled"],Xt=["disabled"],Yt={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Zt={class:"px-4 py-5 sm:p-6"},te={key:0,class:"mt-2"},ee={class:"text-2xl font-bold text-gray-900 mt-1"},se={class:"mt-3"},ae=["disabled"],oe={key:1,class:"mt-2"},le={class:"flex items-center gap-2 w-full"},ne=["value"],ie=["disabled"],re={key:0,class:"text-sm text-gray-500 mt-2"},de={class:"overflow-hidden bg-white shadow sm:rounded-lg"},ue={class:"px-4 py-5 sm:p-6"},ce={class:"mt-2 text-3xl font-bold text-gray-900"},pe={key:1,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},xe={class:"px-4 py-5 sm:p-6"},ve={class:"flex items-center justify-between mb-4"},me=["disabled"],ye={class:"overflow-x-auto"},ge={class:"min-w-full divide-y divide-gray-200"},he={class:"divide-y divide-gray-200 bg-white"},fe={class:"px-4 py-4 text-sm text-gray-900"},ke={class:"px-4 py-4 text-sm text-gray-500"},_e={class:"px-4 py-4 text-sm text-gray-500"},we={class:"px-4 py-4 text-sm text-gray-500"},be={key:0},Te={key:2,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},Ce={class:"px-4 py-5 sm:p-6"},De={class:"flex items-center justify-between mb-3"},Me={class:"flex items-center gap-2"},$e=["value"],Se={class:"overflow-x-auto"},Le={class:"min-w-full divide-y divide-gray-200"},Ie={class:"divide-y divide-gray-200 bg-white"},Ee={class:"whitespace-nowrap px-6 py-4 text-sm text-indigo-600"},Be=["onClick"],Ue={class:"whitespace-nowrap px-6 py-4 text-sm"},Pe={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},Ae={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},Ne={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},Oe={class:"flex items-center space-x-2"},Ve=["onClick","disabled","aria-label"],Fe={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},je={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},ze=["value","onChange"],Re=["value"],He={key:0,value:"complete"},We={key:1,value:"done"},qe={class:"flex items-center justify-between px-6 py-3 text-sm text-gray-600"},Ge={class:"space-x-2"},Je=["disabled"],Ke=["disabled"],Qe={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Xe={class:"px-4 py-5 sm:p-6"},Ye={key:0,class:"text-center py-8 text-gray-500"},Ze={key:1,class:"overflow-x-auto"},ts={class:"min-w-full divide-y divide-gray-200"},es={class:"divide-y divide-gray-200 bg-white"},ss={class:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900"},as={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},os={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},ls={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},ns={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},is={key:0,class:"flex items-center space-x-2"},rs=["disabled"],ds=["disabled"],us=["disabled"],cs=["disabled"],ps={key:1,class:"text-xs text-gray-400"},xs={class:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900"},vs={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},ms={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},ys={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},gs={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},hs={key:0,class:"flex items-center space-x-2"},fs=["onClick","disabled"],ks=["disabled"],_s={key:1,class:"text-xs text-gray-400"},ws={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},bs={class:"w-full max-w-2xl rounded-lg bg-white shadow-lg"},Ts={class:"flex items-center justify-between border-b px-4 py-3"},Cs={class:"p-4"},Ds={key:0,class:"text-gray-500 text-sm"},Ms={key:1,class:"overflow-x-auto"},$s={class:"min-w-full divide-y divide-gray-200"},Ss={class:"divide-y divide-gray-200 bg-white"},Ls={class:"px-4 py-2 text-sm text-gray-900"},Is={class:"px-4 py-2 text-sm text-gray-700"},Es={class:"px-4 py-2 text-sm text-gray-700"},Bs={class:"px-4 py-2 text-sm text-gray-700"},Us={class:"px-4 py-2 text-sm text-gray-900"},Ps={class:"px-4 py-2 text-sm text-gray-700"},As={class:"px-4 py-2 text-sm text-gray-700"},Ns={class:"px-4 py-2 text-sm text-gray-700"},Os={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Vs={class:"w-full max-w-lg rounded-lg bg-white shadow-lg"},Fs={class:"flex items-center justify-between border-b px-4 py-3"},js={key:0,class:"p-4 text-sm text-gray-700"},zs={class:"font-medium mb-1"},Rs={class:"mb-2"},Hs={key:0,class:"mb-2"},Ws=["href"],qs={key:1,class:"prose max-w-none"},Xs=Pt({__name:"Dashboard",setup(Gs){const p=c(null),u=c(!1),L=c(""),I=c(new Date),M=c("employee"),E=c([]),P=c(null),v=c(null),O=c(!1),dt=c([]),B=c([]),b=c(null),V=c(!1),tt=c(""),$=c(1),A=c(10),F=c("all"),j=g(()=>{const s=new Set;return(E.value||[]).forEach(t=>{const o=(t.status||"").toString().trim();o&&s.add(o)}),Array.from(s).sort((t,o)=>t.localeCompare(o))}),z=c("all"),R=c(""),H=c(""),et=g(()=>{const s=tt.value.trim().toLowerCase();let t=E.value;if(F.value!=="all"){const o=F.value.toLowerCase();t=t.filter(l=>(l.status||"").toLowerCase()===o)}if(z.value!=="all"){const o=z.value;t=t.filter(l=>(l.priority||"none").toLowerCase()===o)}if(R.value){const o=new Date(R.value).getTime();t=t.filter(l=>l.due_date?new Date(l.due_date).getTime()>=o:!1)}if(H.value){const o=new Date(H.value).getTime();t=t.filter(l=>l.due_date?new Date(l.due_date).getTime()<=o:!1)}return s?t.filter(o=>(o.title||"").toLowerCase().includes(s)):t}),W=g(()=>Math.max(1,Math.ceil(et.value.length/A.value))),mt=g(()=>{const t=(Math.min($.value,W.value)-1)*A.value;return et.value.slice(t,t+A.value)}),T=s=>{const t=Math.max(1,Math.min(s,W.value));$.value=t},q=c([]),G=c(!1),st=async()=>{var s;G.value=!0;try{const t=await y.get("/admin/analytics/activity-logs",{params:{limit:100}});q.value=((s=t.data)==null?void 0:s.data)||[]}catch{q.value=[]}finally{G.value=!1}};let at=null;const f=g(()=>{var s,t;return!!((s=p.value)!=null&&s.clock_in)&&!((t=p.value)!=null&&t.clock_out)}),k=g(()=>{var s,t;return!!((s=p.value)!=null&&s.break_start)&&!((t=p.value)!=null&&t.break_end)}),yt=g(()=>{var s,t;return((s=p.value)==null?void 0:s.lunch_start)&&!((t=p.value)!=null&&t.lunch_end)}),C=s=>s?(typeof s=="string"?new Date(s):s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"--",J=(s,t)=>{if(!s||!t)return"--";const o=new Date(s),d=new Date(t).getTime()-o.getTime(),m=Math.floor(d/36e5),X=Math.floor(d%36e5/6e4),a=Math.floor(d%6e4/1e3);return`${m}h ${X}m ${a}s`},ot=g(()=>{const s=[];if(!p.value)return s;const t=p.value;return s.push({type:"Clock In",start:t.clock_in||null,end:null,duration:"--",status:t.clock_in?"Completed":"Not started"}),(t.break_start||t.break_end)&&s.push({type:"Break",start:t.break_start||null,end:t.break_end||null,duration:t.break_start&&t.break_end?J(t.break_start,t.break_end):t.break_start?"In progress":"--",status:t.break_start&&t.break_end?"Completed":t.break_start?"Active":"Scheduled"}),(t.lunch_start||t.lunch_end)&&s.push({type:"Lunch",start:t.lunch_start||null,end:t.lunch_end||null,duration:t.lunch_start&&t.lunch_end?J(t.lunch_start,t.lunch_end):t.lunch_start?"In progress":"--",status:t.lunch_start&&t.lunch_end?"Completed":t.lunch_start?"Active":"Scheduled"}),t.clock_out&&s.push({type:"Clock Out",start:t.clock_out||null,end:null,duration:"--",status:t.clock_out?"Completed":"Pending"}),s});At(()=>{N(),gt(),D(),Q(),at=window.setInterval(()=>{I.value=new Date},1e3)}),Nt(()=>{at&&window.clearInterval(at)});const N=async()=>{try{const s=await y.get("/time-entries/current");p.value=s.data,Mt()}catch(s){p.value=null,L.value="No entry today",console.error("Error fetching current entry:",s)}},gt=async()=>{var s;try{const o=(((s=(await y.get("/admin/users")).data)==null?void 0:s.data)||[]).find(l=>(l==null?void 0:l.id)&&(l==null?void 0:l.email));o!=null&&o.role&&(M.value=o.role),M.value==="admin"&&(await st(),setInterval(()=>{st()},5e3))}catch{}},D=async()=>{try{const s=await y.get("/my/tasks");E.value=s.data}catch{}},ht=async()=>{var s,t,o;try{const d=((s=(await y.post("/my/clickup/sync-tasks")).data)==null?void 0:s.count)??0;await D(),alert(`Synced ${d} task(s) from ClickUp.`)}catch(l){alert(((o=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:o.error)||"Failed to sync tasks from ClickUp")}},lt=async()=>{try{await $t()}catch{}},nt=async()=>{try{await St()}catch{}},ut=async()=>{try{await Lt()}catch{}},K=async()=>{try{await It()}catch{}},Q=async()=>{try{const s=await y.get("/tasks/today-entries");B.value=s.data||[];const t=(B.value||[]).find(o=>o.clock_in&&!o.clock_out);v.value=t?t.task_id:null}catch{B.value=[]}},ct=async s=>{try{const t=await y.get(`/tasks/${s}/sync`);b.value=t.data,V.value=!0}catch{V.value=!1}},ft=async()=>{if(k.value){await K();return}f.value?await nt():await lt()},kt=async()=>{if(v.value){alert("Pause or stop the running task first.");return}k.value?await K():(f.value||await lt(),await ut())},U=s=>s<10?`0${s}`:`${s}`,_t=g(()=>{var s,t;return k.value&&((s=p.value)!=null&&s.break_start)?new Date(p.value.break_start):f.value&&((t=p.value)!=null&&t.clock_in)?new Date(p.value.clock_in):null}),wt=g(()=>{const s=B.value.find(t=>t.clock_in&&!t.clock_out);return s?new Date(s.clock_in):null}),bt=g(()=>{const s=_t.value;if(!s)return"00:00:00";const t=I.value.getTime()-s.getTime(),o=Math.max(0,Math.floor(t/1e3)),l=Math.floor(o/3600),d=Math.floor(o%3600/60),m=o%60;return`${U(l)}:${U(d)}:${U(m)}`}),Tt=g(()=>{const s=wt.value;if(!s)return"00:00:00";const t=I.value.getTime()-s.getTime(),o=Math.max(0,Math.floor(t/1e3)),l=Math.floor(o/3600),d=Math.floor(o%3600/60),m=o%60;return`${U(l)}:${U(d)}:${U(m)}`}),Ct=g(()=>{const s=p.value;if(!s||!s.clock_in)return 0;const t=new Date(s.clock_in),o=s.clock_out?new Date(s.clock_out):I.value;let l=Math.max(0,Math.floor((o.getTime()-t.getTime())/6e4));if(s.break_start&&s.break_end){const d=new Date(s.break_start),m=new Date(s.break_end);l-=Math.max(0,Math.floor((m.getTime()-d.getTime())/6e4))}else if(s.break_start&&!s.break_end){const d=new Date(s.break_start);l-=Math.max(0,Math.floor((I.value.getTime()-d.getTime())/6e4))}if(s.lunch_start&&s.lunch_end){const d=new Date(s.lunch_start),m=new Date(s.lunch_end);l-=Math.max(0,Math.floor((m.getTime()-d.getTime())/6e4))}else if(s.lunch_start&&!s.lunch_end){const d=new Date(s.lunch_start);l-=Math.max(0,Math.floor((I.value.getTime()-d.getTime())/6e4))}return(Math.max(0,l)/60).toFixed(2)}),Dt=async()=>{try{O.value=!0,dt.value=[p.value].filter(Boolean)}catch{O.value=!0,dt.value=[]}},Mt=()=>{!p.value||!p.value.clock_in?L.value="Not clocked in":p.value.clock_out?L.value="Clocked out":yt.value?L.value="On lunch":k.value?L.value="On break":L.value="Clocked in"},$t=async s=>{var t,o;u.value=!0;try{const l={};await y.post("/time-entries/clock-in",l),await N(),await D()}catch(l){alert(((o=(t=l.response)==null?void 0:t.data)==null?void 0:o.message)||"Error clocking in")}finally{u.value=!1}},St=async()=>{var s,t;u.value=!0;try{if(v.value){alert("Pause or stop the running task first."),u.value=!1;return}await y.post("/time-entries/clock-out"),await N(),await D()}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error clocking out")}finally{u.value=!1}},Lt=async()=>{var s,t;u.value=!0;try{await y.post("/time-entries/break-start"),await N(),await D()}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error starting break")}finally{u.value=!1}},It=async()=>{var s,t;u.value=!0;try{await y.post("/time-entries/break-end"),await N(),await D()}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error ending break")}finally{u.value=!1}},it=async s=>{var t,o;if(!f.value){alert("Please Time In first before starting a task.");return}if(k.value&&await K(),v.value&&v.value!==s)try{await y.post("/tasks/stop")}catch{}try{await y.post("/tasks/start",{task_id:s}),v.value=s,await Q()}catch(l){alert(((o=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:o.message)||"Failed to start task")}},pt=async()=>{try{await y.post("/tasks/stop")}catch{}v.value=null,await Q()},Et=async()=>{if(f.value){try{await y.post("/tasks/stop")}catch{await nt()}v.value=null,await Q()}},Bt=async(s,t)=>{var l,d;if(!t)return;if(!confirm(`Are you sure you want to set this task to "${t}"?`)){await D();return}u.value=!0;try{await y.post(`/tasks/${s}/status`,{status:t}),await D()}catch(m){alert(((d=(l=m==null?void 0:m.response)==null?void 0:l.data)==null?void 0:d.message)||"Failed to update task status")}finally{u.value=!1}};return(s,t)=>(i(),n(_,null,[xt(Ot(Vt),{title:"Dashboard"}),xt(jt,null,{header:vt(()=>[...t[21]||(t[21]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Time Tracker Dashboard ",-1)])]),default:vt(()=>{var o,l,d,m,X;return[e("div",zt,[e("div",Rt,[M.value!=="admin"?(i(),n("div",Ht,[e("div",Wt,[e("div",qt,[t[22]||(t[22]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Work Day Timer",-1)),e("p",Gt,r(bt.value),1),e("p",Jt,r(k.value?"On Break":f.value?"Working":"Idle"),1),e("div",Kt,[e("button",{onClick:ft,disabled:u.value,class:Y(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",f.value?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"])},r(f.value?"Time Out":"Time In"),11,Qt),e("button",{onClick:kt,disabled:u.value,class:Y(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",k.value?"bg-orange-600 hover:bg-orange-700":"bg-yellow-600 hover:bg-yellow-700"])},r(k.value?"Break Out":"Break In"),11,Xt)])])]),e("div",Yt,[e("div",Zt,[t[24]||(t[24]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Running Task",-1)),v.value?(i(),n("div",te,[e("button",{onClick:t[0]||(t[0]=a=>ct(v.value)),class:"text-indigo-600 hover:underline text-sm"},r(((o=E.value.find(a=>a.id===v.value))==null?void 0:o.title)||"#"+v.value),1),e("p",ee,r(Tt.value),1),e("div",se,[e("button",{onClick:t[1]||(t[1]=a=>pt()),disabled:u.value,class:"rounded-md bg-yellow-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-yellow-700"},"Pause",8,ae)])])):(i(),n("div",oe,[e("div",le,[S(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>P.value=a),class:"w-full rounded-md border-gray-300 text-sm shadow-sm"},[t[23]||(t[23]=e("option",{value:null},"Select a task",-1)),(i(!0),n(_,null,w(E.value,a=>(i(),n("option",{key:a.id,value:a.id},r(a.title),9,ne))),128))],512),[[Z,P.value]]),e("button",{onClick:t[3]||(t[3]=a=>P.value?it(P.value):void 0),disabled:u.value||!P.value,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700 disabled:opacity-50"},"Start",8,ie)]),E.value.length?h("",!0):(i(),n("p",re,"No tasks available."))]))])]),e("div",de,[e("div",ue,[t[27]||(t[27]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Daily Logs",-1)),e("p",ce,[Ft(r(Ct.value),1),t[25]||(t[25]=e("span",{class:"text-sm font-normal text-gray-500"}," / 8 Hours",-1))]),e("div",{class:"mt-4 flex space-x-2"},[e("button",{onClick:Dt,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-700"},"Daily Logs"),t[26]||(t[26]=e("button",{class:"rounded-md bg-yellow-500 px-3 py-1.5 text-xs font-semibold text-white hover:bg-yellow-600"},"Send Report",-1))])])])])):h("",!0),M.value==="admin"?(i(),n("div",pe,[e("div",xe,[e("div",ve,[t[28]||(t[28]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Real-Time Activity Log",-1)),e("button",{onClick:st,disabled:G.value,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-500"},"Refresh",8,me)]),e("div",ye,[e("table",ge,[t[30]||(t[30]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"User"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Action"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Description"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Time")])],-1)),e("tbody",he,[(i(!0),n(_,null,w(q.value,a=>{var x;return i(),n("tr",{key:a.id},[e("td",fe,r(((x=a.user)==null?void 0:x.name)||"Unknown"),1),e("td",ke,r(a.action),1),e("td",_e,r(a.description),1),e("td",we,r(new Date(a.created_at).toLocaleString()),1)])}),128)),q.value.length===0&&!G.value?(i(),n("tr",be,[...t[29]||(t[29]=[e("td",{colspan:"4",class:"px-4 py-4 text-center text-sm text-gray-500"},"No activity logs found",-1)])])):h("",!0)])])])])])):h("",!0),M.value!=="admin"?(i(),n("div",Te,[e("div",Ce,[e("div",De,[t[34]||(t[34]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"My Tasks",-1)),e("div",Me,[e("button",{onClick:ht,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700"},"Refresh from ClickUp"),S(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>tt.value=a),onInput:t[5]||(t[5]=a=>T(1)),type:"text",placeholder:"Search tasks",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[rt,tt.value]]),S(e("select",{"onUpdate:modelValue":t[6]||(t[6]=a=>F.value=a),onChange:t[7]||(t[7]=a=>T(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[t[31]||(t[31]=e("option",{value:"all"},"All",-1)),(i(!0),n(_,null,w(j.value,a=>(i(),n("option",{key:a,value:a},r(a),9,$e))),128))],544),[[Z,F.value]]),S(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>z.value=a),onChange:t[9]||(t[9]=a=>T(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...t[32]||(t[32]=[e("option",{value:"all"},"All priorities",-1),e("option",{value:"urgent"},"Urgent",-1),e("option",{value:"high"},"High",-1),e("option",{value:"normal"},"Normal",-1),e("option",{value:"low"},"Low",-1),e("option",{value:"none"},"None",-1)])],544),[[Z,z.value]]),S(e("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>R.value=a),onChange:t[11]||(t[11]=a=>T(1)),type:"date",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[rt,R.value]]),S(e("input",{"onUpdate:modelValue":t[12]||(t[12]=a=>H.value=a),onChange:t[13]||(t[13]=a=>T(1)),type:"date",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[rt,H.value]]),S(e("select",{"onUpdate:modelValue":t[14]||(t[14]=a=>A.value=a),onChange:t[15]||(t[15]=a=>T(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...t[33]||(t[33]=[e("option",{value:5},"5",-1),e("option",{value:10},"10",-1),e("option",{value:20},"20",-1),e("option",{value:50},"50",-1)])],544),[[Z,A.value,void 0,{number:!0}]])])]),e("div",Se,[e("table",Le,[t[38]||(t[38]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Due Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Priority"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Actions")])],-1)),e("tbody",Ie,[(i(!0),n(_,null,w(mt.value,a=>(i(),n("tr",{key:a.id},[e("td",Ee,[e("button",{onClick:x=>ct(a.id),class:"hover:underline"},r(a.title),9,Be)]),e("td",Ue,[e("span",{class:Y(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold",{"bg-green-100 text-green-800":(a.status||"").toLowerCase().includes("complete")||(a.status||"").toLowerCase().includes("done"),"bg-yellow-100 text-yellow-800":(a.status||"").toLowerCase().includes("progress")||(a.status||"").toLowerCase().includes("doing"),"bg-gray-100 text-gray-800":!(a.status||"").trim()}])},r(a.status||"—"),3)]),e("td",Pe,r(a.due_date?new Date(a.due_date).toLocaleDateString():"--"),1),e("td",Ae,r(a.priority||"--"),1),e("td",Ne,[e("div",Oe,[e("button",{onClick:x=>v.value===a.id?pt():it(a.id),disabled:u.value,class:Y(["rounded-full p-2 text-white",v.value===a.id?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"]),"aria-label":v.value===a.id?"Pause":"Play"},[v.value!==a.id?(i(),n("svg",Fe,[...t[35]||(t[35]=[e("path",{d:"M8 5v14l11-7z"},null,-1)])])):(i(),n("svg",je,[...t[36]||(t[36]=[e("path",{d:"M6 5h4v14H6zM14 5h4v14h-4z"},null,-1)])]))],10,Ve),e("select",{value:a.status||"",onChange:x=>Bt(a.id,x.target.value),class:"rounded-md border-gray-300 text-xs shadow-sm"},[t[37]||(t[37]=e("option",{disabled:"",value:""},"Set status…",-1)),(i(!0),n(_,null,w(j.value,x=>(i(),n("option",{key:x+a.id,value:x},r(x),9,Re))),128)),j.value.includes("complete")?h("",!0):(i(),n("option",He,"complete")),j.value.includes("done")?h("",!0):(i(),n("option",We,"done"))],40,ze)])])]))),128))])]),e("div",qe,[e("div",null," Page "+r($.value)+" of "+r(W.value)+" • "+r(et.value.length)+" total ",1),e("div",Ge,[e("button",{onClick:t[16]||(t[16]=a=>T($.value-1)),disabled:$.value<=1,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Prev",8,Je),e("button",{onClick:t[17]||(t[17]=a=>T($.value+1)),disabled:$.value>=W.value,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Next",8,Ke)])])])])])):h("",!0),e("div",Qe,[e("div",Xe,[t[40]||(t[40]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Today's Time Events",-1)),ot.value.length===0?(i(),n("div",Ye," No time entries recorded today. Clock in to start tracking time. ")):(i(),n("div",Ze,[e("table",ts,[t[39]||(t[39]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Event Type "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Start Time "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," End Time "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Duration "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Status ")])],-1)),e("tbody",es,[(i(!0),n(_,null,w(ot.value,(a,x)=>(i(),n("tr",{key:x},[e("td",ss,r(a.type),1),e("td",as,r(C(a.start)),1),e("td",os,r(C(a.end)),1),e("td",ls,r(a.duration),1),e("td",ns,[M.value!=="admin"?(i(),n("div",is,[e("button",{onClick:lt,disabled:u.value||f.value,class:"rounded-md bg-green-600 px-2 py-1 text-xs font-semibold text-white hover:bg-green-700"},"Time In",8,rs),e("button",{onClick:ut,disabled:u.value||!f.value||k.value,class:"rounded-md bg-yellow-600 px-2 py-1 text-xs font-semibold text-white hover:bg-yellow-700"},"Break In",8,ds),e("button",{onClick:K,disabled:u.value||!k.value,class:"rounded-md bg-orange-600 px-2 py-1 text-xs font-semibold text-white hover:bg-orange-700"},"Break Out",8,us),e("button",{onClick:nt,disabled:u.value||!f.value,class:"rounded-md bg-red-600 px-2 py-1 text-xs font-semibold text-white hover:bg-red-700"},"Time Out",8,cs)])):(i(),n("span",ps,"Admin view"))])]))),128)),(i(!0),n(_,null,w(B.value,a=>{var x;return i(),n("tr",{key:`task-${a.id}`},[e("td",xs," Task: "+r(((x=a.task)==null?void 0:x.title)||`#${a.task_id}`),1),e("td",vs,r(C(a.clock_in)),1),e("td",ms,r(C(a.clock_out)),1),e("td",ys,r(a.clock_in&&a.clock_out?J(a.clock_in,a.clock_out):a.clock_in?"In progress":"--"),1),e("td",gs,[M.value!=="admin"?(i(),n("div",hs,[e("button",{onClick:Ut=>it(a.task_id),disabled:u.value,class:"rounded-md bg-green-600 px-2 py-1 text-xs font-semibold text-white hover:bg-green-700"},"Play",8,fs),e("button",{onClick:t[18]||(t[18]=Ut=>Et()),disabled:u.value,class:"rounded-md bg-red-600 px-2 py-1 text-xs font-semibold text-white hover:bg-red-700"},"Stop",8,ks)])):(i(),n("span",_s,"Admin view"))])])}),128))])])]))])])]),O.value?(i(),n("div",ws,[e("div",bs,[e("div",Ts,[t[41]||(t[41]=e("h4",{class:"text-md font-semibold"},"Daily Logs",-1)),e("button",{onClick:t[19]||(t[19]=a=>O.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs"},"Close")]),e("div",Cs,[p.value?(i(),n("div",Ms,[e("table",$s,[t[42]||(t[42]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Event"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration")])],-1)),e("tbody",Ss,[(i(!0),n(_,null,w(ot.value,(a,x)=>(i(),n("tr",{key:x},[e("td",Ls,r(a.type),1),e("td",Is,r(C(a.start)),1),e("td",Es,r(C(a.end)),1),e("td",Bs,r(a.duration),1)]))),128)),(i(!0),n(_,null,w(B.value,a=>{var x;return i(),n("tr",{key:`modal-task-${a.id}`},[e("td",Us,"Task: "+r(((x=a.task)==null?void 0:x.title)||`#${a.task_id}`),1),e("td",Ps,r(C(a.clock_in)),1),e("td",As,r(C(a.clock_out)),1),e("td",Ns,r(a.clock_in&&a.clock_out?J(a.clock_in,a.clock_out):a.clock_in?"In progress":"--"),1)])}),128))])])])):(i(),n("div",Ds,"No entry today."))])])])):h("",!0),V.value?(i(),n("div",Os,[e("div",Vs,[e("div",Fs,[t[43]||(t[43]=e("h4",{class:"text-md font-semibold"},"Task Details",-1)),e("button",{onClick:t[20]||(t[20]=a=>V.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs"},"Close")]),b.value?(i(),n("div",js,[e("p",zs,r((l=b.value.task)==null?void 0:l.title),1),e("p",Rs,"Status: "+r((d=b.value.task)==null?void 0:d.status),1),(m=b.value.clickup)!=null&&m.url?(i(),n("p",Hs,[e("a",{href:b.value.clickup.url,target:"_blank",class:"text-indigo-600 hover:underline"},"Open in ClickUp",8,Ws)])):h("",!0),(X=b.value.clickup)!=null&&X.text_content?(i(),n("div",qs,r(b.value.clickup.text_content),1)):h("",!0)])):h("",!0)])])):h("",!0)])]}),_:1})],64))}});export{Xs as default};
