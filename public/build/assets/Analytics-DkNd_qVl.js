import{d as dt,r as d,o as ct,c as i,a as Q,u as ut,h as mt,w as X,b as t,e as y,n as $,f as l,g as B,v as Z,t as n,F as E,i as j,j as vt,k as xt}from"./app-DOqN_lrA.js";import{_ as gt}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-BsVuLLRd.js";import{a as V}from"./api-CxRU9zP5.js";const pt={class:"py-12"},yt={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},ft={class:"border-b border-gray-200 mb-6"},ht={class:"-mb-px flex space-x-8"},_t={key:0,class:"space-y-6"},wt={class:"bg-white shadow rounded-lg p-4"},bt={class:"flex justify-between items-end gap-4"},kt={class:"flex-1"},St={key:0,class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4"},Tt={class:"bg-white overflow-hidden shadow rounded-lg"},Mt={class:"p-5"},Dt={class:"flex items-center"},Ct={class:"ml-5 w-0 flex-1"},Ut={class:"text-2xl font-semibold text-gray-900"},Nt={class:"bg-white overflow-hidden shadow rounded-lg"},Lt={class:"p-5"},$t={class:"flex items-center"},Et={class:"ml-5 w-0 flex-1"},Pt={class:"text-2xl font-semibold text-gray-900"},Ht={class:"bg-white overflow-hidden shadow rounded-lg"},At={class:"p-5"},Bt={class:"flex items-center"},jt={class:"ml-5 w-0 flex-1"},Vt={class:"text-2xl font-semibold text-gray-900"},Ft={class:"bg-white overflow-hidden shadow rounded-lg"},Rt={class:"p-5"},zt={class:"flex items-center"},It={class:"ml-5 w-0 flex-1"},Ot={class:"text-2xl font-semibold text-gray-900"},Wt={key:1,class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3"},Zt={class:"bg-white overflow-hidden shadow rounded-lg p-5"},qt={class:"text-3xl font-semibold text-gray-900"},Yt={class:"bg-white overflow-hidden shadow rounded-lg p-5"},Gt={class:"text-3xl font-semibold text-gray-900"},Jt={class:"bg-white overflow-hidden shadow rounded-lg p-5"},Kt={class:"text-3xl font-semibold text-gray-900"},Qt={key:2,class:"bg-white shadow rounded-lg"},Xt={class:"px-4 py-5 sm:p-6"},te={class:"min-w-full divide-y divide-gray-200"},ee={class:"divide-y divide-gray-200"},se={class:"px-4 py-4 text-sm text-gray-900"},oe={class:"px-4 py-4 text-sm text-gray-500"},ae={class:"px-4 py-4 text-sm text-gray-500"},ne={key:3,class:"text-center py-12"},ie={key:1,class:"space-y-6"},le={class:"bg-white shadow rounded-lg p-4"},re={class:"grid gap-4 sm:grid-cols-3"},de=["value"],ce={class:"flex items-end gap-2"},ue=["disabled"],me=["disabled"],ve={class:"bg-white shadow rounded-lg p-5"},xe={class:"grid gap-4 sm:grid-cols-3 lg:grid-cols-5 text-sm"},ge={class:"font-semibold"},pe={class:"font-semibold"},ye={class:"font-semibold"},fe={class:"font-semibold"},he={class:"bg-white shadow rounded-lg"},_e={class:"overflow-x-auto"},we={class:"min-w-full divide-y divide-gray-200"},be={class:"divide-y divide-gray-200"},ke={class:"px-4 py-4 text-sm text-gray-900"},Se={class:"px-4 py-4 text-sm text-gray-500"},Te={class:"px-4 py-4 text-sm text-gray-500"},Me={class:"px-4 py-4 text-sm text-gray-900 font-semibold"},De={class:"px-4 py-4 text-sm text-gray-500"},Ce={class:"px-4 py-4 text-sm text-gray-500"},Ue={key:0},Ne={key:0,class:"text-center py-8"},Le={key:2,class:"space-y-6"},$e={class:"bg-white shadow rounded-lg p-4"},Ee={class:"flex justify-between items-center mb-4"},Pe={class:"flex items-center gap-2"},He={class:"grid gap-4 sm:grid-cols-2"},Ae={class:"bg-white shadow rounded-lg"},Be={class:"overflow-x-auto"},je={class:"min-w-full divide-y divide-gray-200"},Ve={class:"divide-y divide-gray-200 bg-white"},Fe={class:"px-4 py-4 whitespace-nowrap"},Re={class:"flex items-center"},ze={class:"flex-shrink-0 h-10 w-10"},Ie={class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},Oe={class:"text-indigo-600 font-medium"},We={class:"ml-4"},Ze={class:"text-sm font-medium text-gray-900"},qe={class:"text-sm text-gray-500"},Ye={class:"px-4 py-4 whitespace-nowrap"},Ge={class:"px-4 py-4"},Je={class:"text-sm text-gray-900"},Ke={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-500"},Qe={class:"text-xs text-gray-400"},Xe={key:0},ts={key:0,class:"text-center py-8"},es="Asia/Manila",is=dt({__name:"Analytics",setup(ss){const p=d("overview");d(!1);const C=d("month"),m=d(null),T=d(!1),f=d(null),v=d(""),q=d([]),Y=d([]),P=d(!1),h=d([]),_=d({workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0});d([]);const F=d([]),H=d(!1),A=d(""),tt=d(Date.now());ct(()=>{const o=new Date;v.value=o.toISOString().split("T")[0],G(),et(),p.value==="summary"&&R(),U(),setInterval(()=>{p.value==="activity"&&U(!0)},5e3)});const G=async()=>{T.value=!0;try{const o=await V.get("/admin/analytics/overview",{params:{period:C.value}});m.value=o.data}catch(o){console.error("Error loading overview:",o),alert("Failed to load overview data")}finally{T.value=!1}},et=async()=>{try{const o=await V.get("/admin/analytics/users");q.value=o.data}catch(o){console.error("Error loading users:",o)}},R=async()=>{var o;if(f.value){P.value=!0;try{const e=await V.get(`/admin/analytics/user/${f.value}`,{params:{start_date:v.value,end_date:v.value}}),s=((o=e.data)==null?void 0:o.entries)||e.data||[];Y.value=s,h.value=[];let c=0,g=0,r=null,x=null;s.forEach(a=>{if(a.is_break||a.entry_type==="break"){const k=M(a.clock_in),S=M(a.clock_out);if(k&&S){const D=Math.max(0,Math.floor((S.getTime()-k.getTime())/1e3));g+=D,h.value.push({name:"Break",start:a.clock_in_formatted||a.clock_in,end:a.clock_out_formatted||a.clock_out,durationSeconds:D,breakDurationSeconds:D,notes:"-"})}return}const u=M(a.clock_in),b=M(a.clock_out);u&&(!r||u<r)&&(r=u,x=a.clock_in_formatted||a.clock_in);const L=a.task&&(a.task.title||a.task.name);if(u&&b&&!L){const k=Math.max(0,Math.floor((b.getTime()-u.getTime())/1e3));c+=k;const S=M(a.lunch_start),D=M(a.lunch_end);let K=0;S&&D&&(K=Math.max(0,Math.floor((D.getTime()-S.getTime())/1e3)));const rt=Math.max(0,k-K);h.value.push({name:"Work Hours",start:a.clock_in_formatted||a.clock_in,end:a.clock_out_formatted||a.clock_out,durationSeconds:rt,breakDurationSeconds:0,notes:"-"})}if(L){const k=a.task.title||a.task.name;if(u&&b){const S=Math.max(0,Math.floor((b.getTime()-u.getTime())/1e3));h.value.push({name:k,start:a.clock_in_formatted||a.clock_in,end:a.clock_out_formatted||a.clock_out,durationSeconds:S,breakDurationSeconds:0,notes:"-"})}}}),h.value.sort((a,u)=>{const b=new Date(a.start).getTime(),L=new Date(u.start).getTime();return(isNaN(L)?0:L)-(isNaN(b)?0:b)});const w=h.value.filter(a=>a.name==="Work Hours").reduce((a,u)=>a+(u.durationSeconds||0),0),O=h.value.filter(a=>a.name==="Break").reduce((a,u)=>a+(u.durationSeconds||0),0),W=8*3600,lt=Math.max(0,w-W);let J="No Entry";if(r){const a=(r.getUTCHours()+8)%24,u=r.getUTCMinutes();J=a<8||a===8&&u<=30?"Perfect":"Late"}_.value={workSeconds:w,breakSeconds:O,lunchSeconds:0,tasksCount:h.value.length,status:J,overtimeSeconds:lt}}catch(e){console.error("Error loading user daily analytics",e),Y.value=[],_.value={workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}}finally{P.value=!1}}},U=async(o=!1)=>{o||(H.value=!0);try{const e={limit:100};A.value&&(e.action=A.value);const s=await V.get("/admin/analytics/activity-logs",{params:e});F.value=s.data.data,tt.value=Date.now()}catch(e){console.error("Error loading activity logs:",e),o||alert("Failed to load activity logs")}finally{H.value=!1}},st=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),z=o=>{if(!o)return"--";try{const s=new Date(o);if(!isNaN(s.getTime()))return s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:es})}catch{}const e=o.match(/\b(\d{1,2}):(\d{2})(?::(\d{2}))?/);if(e){let s=parseInt(e[1],10);const c=e[2],g=s>=12?"PM":"AM";return s=s%12,s===0&&(s=12),`${s}:${c} ${g}`}return"--"},I=o=>{if(typeof o=="string"&&/h\s+\d{2}m\s+\d{2}s/.test(o))return o;const e=Number(o);if(!isFinite(e))return"00h 00m 00s";const s=Math.round(e*3600),c=Math.floor(s/3600),g=Math.floor(s%3600/60),r=s%60,x=w=>w<10?`0${w}`:`${w}`;return`${x(c)}h ${x(g)}m ${x(r)}s`},N=o=>{const e=typeof o=="number"&&isFinite(o)?Math.max(0,Math.floor(o)):0,s=Math.floor(e/3600),c=Math.floor(e%3600/60),g=e%60,r=x=>x<10?`0${x}`:`${x}`;return`${r(s)}:${r(c)}:${r(g)}`},M=o=>{if(!o)return null;const e=o.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?/);if(e){const g=Number(e[1]),r=Number(e[2])-1,x=Number(e[3]),w=Number(e[4]),O=Number(e[5]),W=Number(e[6]||"0");return new Date(Date.UTC(g,r,x,w-8,O,W))}const s=o.includes("T")?o:o.replace(" ","T"),c=new Date(s);return isNaN(c.getTime())?null:c},ot=()=>{const o=new URLSearchParams({period:C.value,start_date:v.value,end_date:v.value});window.location.href=`/api/admin/analytics/export/csv?${o.toString()}`},at=()=>{const o=new URLSearchParams({period:C.value,start_date:v.value,end_date:v.value});window.location.href=`/api/admin/analytics/export/pdf?${o.toString()}`},nt=()=>{if(!f.value){alert("Please select a user first");return}const o=new URLSearchParams({user_id:f.value,start_date:v.value,end_date:v.value});window.location.href=`/api/admin/analytics/user-summary/export/csv?${o.toString()}`},it=()=>{if(!f.value){alert("Please select a user first");return}const o=new URLSearchParams({user_id:f.value,start_date:v.value,end_date:v.value});window.location.href=`/api/admin/analytics/user-summary/export/pdf?${o.toString()}`};return(o,e)=>(l(),i(E,null,[Q(ut(mt),{title:"Analytics"}),Q(gt,null,{header:X(()=>[...e[9]||(e[9]=[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Analytics & Reports ",-1)])]),default:X(()=>[t("div",pt,[t("div",yt,[t("div",ft,[t("nav",ht,[t("button",{onClick:e[0]||(e[0]=s=>p.value="overview"),class:$(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",p.value==="overview"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Overview ",2),t("button",{onClick:e[1]||(e[1]=s=>p.value="summary"),class:$(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",p.value==="summary"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," User Summary ",2),t("button",{onClick:e[2]||(e[2]=s=>{p.value="activity",U()}),class:$(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",p.value==="activity"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Activity Log ",2)])]),p.value==="overview"?(l(),i("div",_t,[t("div",wt,[t("div",bt,[t("div",kt,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Period",-1)),B(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>C.value=s),onChange:G,class:"rounded-md border-gray-300 shadow-sm"},[...e[10]||(e[10]=[t("option",{value:"daily"},"Daily",-1),t("option",{value:"weekly"},"Weekly",-1),t("option",{value:"monthly"},"Monthly",-1),t("option",{value:"ytd"},"Year to Date",-1)])],544),[[Z,C.value]])]),t("div",{class:"flex gap-2"},[t("button",{onClick:ot,class:"rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-500"}," Export CSV "),t("button",{onClick:at,class:"rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-500"}," Export PDF ")])])]),m.value&&!T.value?(l(),i("div",St,[t("div",Tt,[t("div",Mt,[t("div",Dt,[e[13]||(e[13]=t("div",{class:"flex-shrink-0"},[t("div",{class:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center"},[t("svg",{class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])])],-1)),t("div",Ct,[t("dl",null,[e[12]||(e[12]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Employees",-1)),t("dd",Ut,n(m.value.statistics.total_employees),1)])])])])]),t("div",Nt,[t("div",Lt,[t("div",$t,[e[15]||(e[15]=t("div",{class:"flex-shrink-0"},[t("div",{class:"h-8 w-8 rounded-full bg-green-500 flex items-center justify-center"},[t("svg",{class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),t("div",Et,[t("dl",null,[e[14]||(e[14]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Hours",-1)),t("dd",Pt,n(m.value.statistics.total_hms||I(m.value.statistics.total_hours)),1)])])])])]),t("div",Ht,[t("div",At,[t("div",Bt,[e[17]||(e[17]=t("div",{class:"flex-shrink-0"},[t("div",{class:"h-8 w-8 rounded-full bg-yellow-500 flex items-center justify-center"},[t("svg",{class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])])],-1)),t("div",jt,[t("dl",null,[e[16]||(e[16]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Lates",-1)),t("dd",Vt,n(m.value.statistics.lates_count),1)])])])])]),t("div",Ft,[t("div",Rt,[t("div",zt,[e[19]||(e[19]=t("div",{class:"flex-shrink-0"},[t("div",{class:"h-8 w-8 rounded-full bg-purple-500 flex items-center justify-center"},[t("svg",{class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),t("div",It,[t("dl",null,[e[18]||(e[18]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Overtime",-1)),t("dd",Ot,n(m.value.statistics.overtime_count),1)])])])])])])):y("",!0),m.value&&!T.value?(l(),i("div",Wt,[t("div",Zt,[e[20]||(e[20]=t("h4",{class:"text-sm font-medium text-gray-500 mb-2"},"Average Hours",-1)),t("p",qt,n(I(m.value.statistics.average_hours)),1)]),t("div",Yt,[e[21]||(e[21]=t("h4",{class:"text-sm font-medium text-gray-500 mb-2"},"Perfect Attendance",-1)),t("p",Gt,n(m.value.statistics.perfect_attendance_count),1)]),t("div",Jt,[e[22]||(e[22]=t("h4",{class:"text-sm font-medium text-gray-500 mb-2"},"Undertime",-1)),t("p",Kt,n(m.value.statistics.undertime_count),1)])])):y("",!0),m.value&&!T.value?(l(),i("div",Qt,[t("div",Xt,[e[24]||(e[24]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Top Employees",-1)),t("table",te,[e[23]||(e[23]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Name"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Total Hours"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Entries")])],-1)),t("tbody",ee,[(l(!0),i(E,null,j(m.value.top_employees,s=>(l(),i("tr",{key:s.id},[t("td",se,n(s.name),1),t("td",oe,n(I(s.total_hours)),1),t("td",ae,n(s.entries_count),1)]))),128))])])])])):y("",!0),T.value?(l(),i("div",ne,[...e[25]||(e[25]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):y("",!0)])):y("",!0),p.value==="summary"?(l(),i("div",ie,[t("div",le,[t("div",re,[t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"User",-1)),B(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>f.value=s),onChange:R,class:"w-full rounded-md border-gray-300 shadow-sm"},[e[26]||(e[26]=t("option",{value:null},"Select User",-1)),(l(!0),i(E,null,j(q.value,s=>(l(),i("option",{key:s.id,value:s.id},n(s.name),9,de))),128))],544),[[Z,f.value]])]),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),B(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>v.value=s),onChange:R,type:"date",class:"w-full rounded-md border-gray-300 shadow-sm"},null,544),[[vt,v.value]])]),t("div",ce,[t("button",{onClick:nt,disabled:!f.value,class:"flex-1 rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed"}," Export CSV ",8,ue),t("button",{onClick:it,disabled:!f.value,class:"flex-1 rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-500 disabled:bg-gray-400 disabled:cursor-not-allowed"}," Export PDF ",8,me)])])]),t("div",ve,[e[34]||(e[34]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Daily Summary",-1)),t("div",xe,[t("div",null,[e[29]||(e[29]=t("div",{class:"text-gray-500"},"ðŸ•’ Time In Hours",-1)),t("div",ge,n(N(_.value.workSeconds)),1)]),t("div",null,[e[30]||(e[30]=t("div",{class:"text-gray-500"},"â˜• Total Breaks",-1)),t("div",pe,n(N(_.value.breakSeconds)),1)]),t("div",null,[e[31]||(e[31]=t("div",{class:"text-gray-500"},"ðŸ“‹ Entries",-1)),t("div",ye,n(_.value.tasksCount),1)]),t("div",null,[e[32]||(e[32]=t("div",{class:"text-gray-500"},"â° Status",-1)),t("div",{class:$(["font-semibold",{"text-green-700":_.value.status==="Perfect","text-yellow-700":_.value.status==="Late","text-gray-700":_.value.status==="No Entry"}])},n(_.value.status),3)]),t("div",null,[e[33]||(e[33]=t("div",{class:"text-gray-500"},"âš¡ Overtime",-1)),t("div",fe,n(N(_.value.overtimeSeconds)),1)])])]),t("div",he,[t("div",_e,[t("table",we,[e[36]||(e[36]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),t("tbody",be,[(l(!0),i(E,null,j(h.value,(s,c)=>(l(),i("tr",{key:c},[t("td",ke,n(s.name),1),t("td",Se,n(z(s.start)),1),t("td",Te,n(z(s.end)),1),t("td",Me,n(N(s.durationSeconds)),1),t("td",De,n(N(s.breakDurationSeconds||0)),1),t("td",Ce,n(s.notes||"-"),1)]))),128)),h.value.length===0&&!P.value?(l(),i("tr",Ue,[...e[35]||(e[35]=[t("td",{colspan:"6",class:"px-4 py-4 text-center text-sm text-gray-500"},"No entries for selected day",-1)])])):y("",!0)])])]),P.value?(l(),i("div",Ne,[...e[37]||(e[37]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):y("",!0)])])):y("",!0),p.value==="activity"?(l(),i("div",Le,[t("div",$e,[t("div",Ee,[e[39]||(e[39]=t("h3",{class:"text-lg font-medium text-gray-900"},"Real-Time Activity Log",-1)),t("div",Pe,[e[38]||(e[38]=t("div",{class:"flex items-center gap-2 text-sm text-gray-600"},[t("span",{class:"inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t("span",null,"Live Updates")],-1)),t("button",{onClick:e[6]||(e[6]=s=>U()),class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-indigo-500"}," Refresh ")])]),t("div",He,[t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter by Action",-1)),B(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>A.value=s),onChange:e[8]||(e[8]=s=>U()),class:"w-full rounded-md border-gray-300 shadow-sm"},[...e[40]||(e[40]=[t("option",{value:""},"All Actions",-1),t("option",{value:"clock_in"},"Clock In",-1),t("option",{value:"clock_out"},"Clock Out",-1),t("option",{value:"break_start"},"Break Start",-1),t("option",{value:"break_end"},"Break End",-1),t("option",{value:"lunch_start"},"Lunch Start",-1),t("option",{value:"lunch_end"},"Lunch End",-1)])],544),[[Z,A.value]])])])]),t("div",Ae,[t("div",Be,[t("table",je,[e[43]||(e[43]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"User"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Action"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Description"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Time")])],-1)),t("tbody",Ve,[(l(!0),i(E,null,j(F.value,s=>{var c,g,r;return l(),i("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",Fe,[t("div",Re,[t("div",ze,[t("div",Ie,[t("span",Oe,n((c=s.user)!=null&&c.name?s.user.name.charAt(0).toUpperCase():"?"),1)])]),t("div",We,[t("div",Ze,n(((g=s.user)==null?void 0:g.name)||"Unknown User"),1),t("div",qe,n((r=s.user)==null?void 0:r.email),1)])])]),t("td",Ye,[t("span",{class:$(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":s.action==="clock_in","bg-red-100 text-red-800":s.action==="clock_out","bg-yellow-100 text-yellow-800":s.action.includes("break"),"bg-blue-100 text-blue-800":s.action.includes("lunch")}])},n(s.action.replace("_"," ").replace(/\b\w/g,x=>x.toUpperCase())),3)]),t("td",Ge,[t("div",Je,n(s.description),1)]),t("td",Ke,[xt(n(st(s.created_at))+" ",1),t("div",Qe,n(z(s.created_at)),1)])])}),128)),F.value.length===0&&!H.value?(l(),i("tr",Xe,[...e[42]||(e[42]=[t("td",{colspan:"4",class:"px-4 py-4 text-center text-sm text-gray-500"},"No activity logs found",-1)])])):y("",!0)])])]),H.value?(l(),i("div",ts,[...e[44]||(e[44]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):y("",!0)])])):y("",!0)])])]),_:1})],64))}});export{is as default};
