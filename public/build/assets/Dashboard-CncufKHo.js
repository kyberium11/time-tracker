import{d as ls,r as m,c as I,w as is,o as rs,B as ds,u as us,a as d,b as kt,e as cs,h as ms,f as ht,g as t,i as y,n as B,j as u,t as r,k as fe,m as te,F,l as V,v as Re,p as ze,C as ps}from"./app-W9pOVsuU.js";import{_ as vs}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-KwIhhYrF.js";import{a as T}from"./api-HXIdz-j3.js";const gs={class:"py-12"},xs={class:"mx-auto max-w-[95%] sm:px-6 lg:px-8"},ys={class:"border-b border-gray-200 mb-6"},fs={class:"-mb-px flex space-x-8"},ks={key:0},hs={class:"mb-6 grid gap-4 md:grid-cols-3"},bs={class:"overflow-hidden bg-white shadow sm:rounded-lg"},_s={class:"px-4 py-5 sm:p-6"},ws={class:"mt-2 text-3xl font-bold text-gray-900"},Ss={class:"text-xs text-gray-500"},Ts={key:0,class:"mt-2"},Ds={class:"text-sm text-gray-600"},Ms={class:"font-semibold"},Cs={class:"mt-4 flex flex-wrap gap-2"},Ns=["disabled","data-action"],Is=["disabled","data-action"],$s={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Ls={class:"px-4 py-5 sm:p-6"},Es={key:0,class:"mt-2"},Us={class:"text-2xl font-bold text-gray-900 mt-1"},Ps={key:0,class:"text-sm font-normal text-gray-500"},Bs={class:"mt-3"},js=["disabled","data-task-id","data-task-name"],Os={key:1,class:"mt-2"},Hs={class:"flex items-center gap-2 w-full"},Ws=["value"],Fs=["disabled","data-task-id","data-task-name"],Rs={key:0,class:"text-sm text-gray-500 mt-2"},zs={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Vs={class:"px-4 py-5 sm:p-6"},qs={class:"mt-2 text-3xl font-bold text-gray-900"},As={class:"mt-4 flex space-x-2"},Ys=["disabled"],Zs={class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},Gs={class:"px-4 py-5 sm:p-6"},Ks={class:"mb-4 space-y-4"},Js={class:"flex flex-wrap items-center justify-between gap-3"},Qs=["disabled"],Xs={key:0,class:"h-3 w-3 rounded-full border-2 border-white border-t-transparent animate-spin"},ea={class:"border-b border-gray-200"},ta={class:"-mb-px flex space-x-6","aria-label":"Task tabs"},sa={class:"flex flex-wrap items-center gap-2"},aa=["value"],oa={class:"overflow-x-auto"},na={class:"min-w-full divide-y divide-gray-200"},la={class:"divide-y divide-gray-200 bg-white"},ia={class:"px-6 py-4 text-sm text-indigo-600 max-w-md"},ra=["onClick"],da={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},ua={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},ca={class:"whitespace-nowrap px-6 py-4 text-sm"},ma={key:1,class:"text-sm text-gray-700"},pa={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},va={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},ga={class:"whitespace-nowrap px-6 py-4 text-sm"},xa={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},ya={class:"flex items-center space-x-2"},fa=["onClick","disabled","data-action","data-task-id","data-task-name","aria-label","title"],ka={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},ha={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},ba=["value","onChange"],_a=["value"],wa={key:0,value:"complete"},Sa={key:1,value:"done"},Ta={class:"flex items-center justify-between px-6 py-3 text-sm text-gray-600"},Da={class:"space-x-2"},Ma=["disabled"],Ca=["disabled"],Na={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Ia={class:"px-4 py-5 sm:p-6"},$a={key:0,class:"text-center py-8 text-gray-500"},La={key:1,class:"overflow-x-auto"},Ea={class:"min-w-full divide-y divide-gray-200"},Ua={class:"divide-y divide-gray-200"},Pa={class:"px-4 py-4 text-sm text-gray-900"},Ba={class:"px-4 py-4 text-sm text-gray-500"},ja={class:"px-4 py-4 text-sm text-gray-500"},Oa={class:"px-4 py-4 text-sm text-gray-900 font-semibold"},Ha={class:"px-4 py-4 text-sm text-gray-500"},Wa={class:"px-4 py-4 text-sm text-gray-500"},Fa={key:1,class:"space-y-6"},Ra={class:"bg-white shadow rounded-lg p-4"},za={class:"grid gap-4 sm:grid-cols-2"},Va={class:"bg-white shadow rounded-lg p-5"},qa={class:"grid gap-4 sm:grid-cols-3 lg:grid-cols-5 text-sm"},Aa={class:"font-semibold"},Ya={class:"font-semibold"},Za={class:"font-semibold"},Ga={class:"font-semibold"},Ka={class:"bg-white shadow rounded-lg"},Ja={class:"overflow-x-auto"},Qa={class:"min-w-full divide-y divide-gray-200"},Xa={class:"divide-y divide-gray-200"},eo={class:"px-4 py-4 text-sm text-gray-900"},to={class:"px-4 py-4 text-sm text-gray-500"},so={class:"px-4 py-4 text-sm text-gray-500"},ao={class:"px-4 py-4 text-sm text-gray-900 font-semibold"},oo={class:"px-4 py-4 text-sm text-gray-500"},no={class:"px-4 py-4 text-sm text-gray-500"},lo={key:0},io={key:0,class:"text-center py-8"},ro={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},uo={class:"w-full max-w-4xl rounded-lg bg-white shadow-lg flex flex-col max-h-[90vh]"},co={class:"flex items-center justify-between border-b px-4 py-3 flex-shrink-0"},mo={class:"p-4 flex flex-col flex-1 min-h-0"},po={key:0,class:"text-gray-500 text-sm"},vo={key:1,class:"flex flex-col flex-1 min-h-0"},go={class:"mb-4 flex gap-6 flex-shrink-0"},xo={class:"flex-1 bg-gray-50 rounded-lg p-4"},yo={class:"text-2xl font-bold text-gray-900 mt-1"},fo={class:"flex-1 bg-gray-50 rounded-lg p-4"},ko={class:"text-2xl font-bold text-gray-900 mt-1"},ho={class:"flex-1 overflow-y-auto border border-gray-200 rounded-lg"},bo={class:"min-w-full divide-y divide-gray-200"},_o={class:"divide-y divide-gray-200 bg-white"},wo={class:"px-4 py-2 text-sm text-gray-900"},So={class:"px-4 py-2 text-sm text-gray-700"},To={class:"px-4 py-2 text-sm text-gray-700"},Do={class:"px-4 py-2 text-sm text-gray-700 font-semibold"},Mo={class:"px-4 py-2 text-sm text-gray-700"},Co={class:"px-4 py-2 text-sm text-gray-700"},No={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Io={class:"w-full max-w-lg rounded-lg bg-white shadow-xl"},$o={class:"flex items-center justify-between border-b px-5 py-3"},Lo=["disabled"],Eo={class:"p-5 space-y-4 text-sm text-gray-700"},Uo={key:0},Po={class:"mb-4"},Bo={class:"flex items-center justify-between mb-2"},jo={class:"text-xs font-medium text-gray-600"},Oo={class:"text-xs text-gray-500"},Ho={class:"w-full bg-gray-200 rounded-full h-2"},Wo={class:"flex items-center gap-2"},Fo={key:0,class:"h-4 w-4 rounded-full border-2 border-current border-t-transparent animate-spin"},Ro={key:1,class:"text-green-600 text-lg"},zo={key:2,class:"text-yellow-600 text-lg"},Vo={key:3,class:"text-red-600 text-lg"},qo={class:"font-semibold text-gray-900"},Ao={key:0,class:"space-y-3"},Yo={key:1,class:"text-sm text-gray-600"},Zo={key:2,class:"text-sm text-gray-600"},Go={key:3,class:"text-sm space-y-1"},Ko={class:"text-xs text-gray-600"},Jo={key:4,class:"text-sm text-yellow-700"},Qo={key:5,class:"text-sm text-red-700"},Xo={key:1,class:"mt-4"},en={class:"max-h-32 overflow-y-auto space-y-1 text-xs"},tn={class:"text-gray-700"},sn={key:2,class:"flex items-center gap-2 text-sm text-gray-500"},an={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},on={class:"w-full max-w-3xl rounded-lg bg-white shadow-lg"},nn={class:"p-5 text-sm text-gray-700 space-y-5"},ln={class:"space-y-1"},rn={key:0,class:"text-xs text-gray-500"},dn={class:"font-medium text-gray-600"},un={class:"grid gap-3 sm:grid-cols-2 lg:grid-cols-5"},cn={class:"rounded-md bg-indigo-50 px-4 py-3"},mn={class:"text-xl font-semibold text-indigo-900"},pn={class:"rounded-md bg-green-50 px-4 py-3"},vn={class:"text-xl font-semibold text-green-900"},gn={class:"rounded-md bg-blue-50 px-4 py-3"},xn={class:"text-xl font-semibold text-blue-900"},yn={class:"rounded-md bg-gray-100 px-4 py-3"},fn={class:"text-xl font-semibold text-gray-900"},kn={class:"rounded-md bg-amber-50 px-4 py-3"},hn={class:"text-xl font-semibold text-amber-900"},bn={key:0,class:"space-y-2"},_n={class:"max-h-48 overflow-y-auto space-y-2 pr-1"},wn={class:"flex items-start justify-between gap-3"},Sn={class:"font-medium text-green-900 leading-tight"},Tn={class:"text-xs text-green-700 whitespace-nowrap"},Dn={class:"mt-1 flex flex-wrap gap-3 text-xs text-green-800"},Mn={key:0},Cn={key:1},Nn={key:1,class:"space-y-2"},In={class:"max-h-48 overflow-y-auto space-y-2 pr-1"},$n={class:"flex items-start justify-between gap-3"},Ln={class:"font-medium text-blue-900 leading-tight"},En={class:"text-xs text-blue-700 whitespace-nowrap"},Un={class:"mt-1 flex flex-wrap gap-3 text-xs text-blue-800"},Pn={key:0},Bn={key:1},jn={key:2,class:"space-y-2"},On={class:"max-h-40 overflow-y-auto space-y-1 pr-1"},Hn={class:"flex items-start justify-between gap-3"},Wn={class:"font-medium leading-tight"},Fn={class:"text-amber-700"},Rn={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},zn={class:"w-full max-w-md rounded-lg bg-white shadow-lg"},Vn={class:"flex items-center justify-between border-b px-4 py-3"},qn={class:"p-6"},An={class:"mb-4"},Yn={class:"text-sm text-gray-700 mb-2"},Zn={class:"flex items-center justify-end gap-3"},Gn=["disabled"],Kn=["disabled"],Jn={key:0,class:"h-4 w-4 rounded-full border-2 border-white border-t-transparent animate-spin"},Qn={key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Xn={class:"w-full max-w-3xl max-h-[90vh] rounded-lg bg-white shadow-lg flex flex-col"},el={class:"flex items-center justify-between border-b px-4 py-3 flex-shrink-0"},tl={key:0,class:"p-6 text-sm text-gray-700 overflow-y-auto flex-1"},sl={class:"mb-4 pb-4 border-b"},al={class:"font-semibold text-lg text-gray-900 mb-2"},ol={class:"flex items-center gap-3 flex-wrap"},nl={key:0,class:"text-sm"},ll={key:1,class:"ml-1 text-gray-700"},il={key:1},rl=["href"],dl={key:0,class:"task-content"},ul=["innerHTML"],cl={key:1,class:"text-gray-500 italic"},xl=ls({__name:"Dashboard",setup(ml){const p=m(null),L=m(!1),ce=m(""),se=m(new Date),tt=m("employee"),j=m([]),ae=m(null),b=m(null),st=(s,e)=>s==null||e===null||e===void 0?!1:String(s)===String(e),bt=s=>{if(s!==null)return j.value.find(e=>st(e.id,s))},me=s=>st(b.value,s);I(()=>{var s;return b.value?((s=bt(b.value))==null?void 0:s.title)||`#${b.value}`:null});const Ve=m(!1),at=m([]),Ne=m(0),qe=m(0),ke=m(!1),X=m([]),O=m(null),Ie=m(!1),Ae=m(!1),$e=m(!1),$=m(null),he=m(!1);m(!1),m(null);const ot=m([]),_t=m([]),wt=I(()=>ot.value.length>0);I(()=>wt.value&&_t.value.length===ot.value.length);const Y=m(!1),R=m(0),pe=m([]),E=m(null),v=m(null),_=m([]),ve=m("dashboard"),oe=m(""),nt=m([]),Le=m(!1),z=m({workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}),U=m([]),be=m(""),ne=m(1),_e=m(10),Ee=m("all"),we=m("ongoing"),Se=m(!1),le=m(null),ge=m(!1),Ue=I(()=>{const s=new Set;return(j.value||[]).forEach(e=>{const a=(e.status||"").toString().trim();a&&s.add(a)}),Array.from(s).sort((e,a)=>e.localeCompare(a))}),Pe=m("all"),Be=m(""),je=m(""),lt=s=>{const e=(s||"").toString().trim().toLowerCase();return e==="complete"||e==="completed"},Ye=s=>{const e=/(?:https?:\/\/)?(?:app\.)?clickup\.com\/t\/([a-zA-Z0-9]+)/i,a=s.match(e);return a?a[1]:null},it=s=>Ye(s)!==null,Ze=I(()=>{const s=be.value.trim();let a=j.value.filter(n=>we.value==="complete"?lt(n.status):!lt(n.status));if(Ee.value!=="all"){const n=Ee.value.toLowerCase();a=a.filter(i=>(i.status||"").toLowerCase()===n)}if(Pe.value!=="all"){const n=Pe.value;a=a.filter(i=>(i.priority||"none").toLowerCase()===n)}if(Be.value){const n=new Date(Be.value).getTime();a=a.filter(i=>i.due_date?new Date(i.due_date).getTime()>=n:!1)}if(je.value){const n=new Date(je.value).getTime();a=a.filter(i=>i.due_date?new Date(i.due_date).getTime()<=n:!1)}if(!s)return a;if(it(s)){const n=Ye(s);if(n){const i=a.filter(c=>(c.clickup_task_id||"").toLowerCase()===n.toLowerCase());if(i.length>0){const c=a.filter(x=>(x.clickup_task_id||"").toLowerCase()!==n.toLowerCase());return[...i,...c]}else return a}}const l=s.toLowerCase();return a.filter(n=>{const i=(n.title||"").toLowerCase(),c=(n.clickup_list_name||"").toLowerCase();return i.includes(l)||c.includes(l)})}),Oe=I(()=>Math.max(1,Math.ceil(Ze.value.length/_e.value))),St=I(()=>{const e=(Math.min(ne.value,Oe.value)-1)*_e.value;return Ze.value.slice(e,e+_e.value)}),Z=s=>{const e=Math.max(1,Math.min(s,Oe.value));ne.value=e},rt=s=>{we.value!==s&&(we.value=s,Z(1))};let Ge=null,Te=null;const He=m(!1),We=m(!1),De=m(!1),Ke=m(!1),P=I(()=>{var s,e;return!!((s=p.value)!=null&&s.clock_in)&&!((e=p.value)!=null&&e.clock_out)}),H=I(()=>{var s,e;return!!((s=p.value)!=null&&s.break_start)&&!((e=p.value)!=null&&e.break_end)}),Tt=I(()=>{var s,e;return((s=p.value)==null?void 0:s.lunch_start)&&!((e=p.value)!=null&&e.lunch_end)}),Fe=I(()=>{const s=[];if(!p.value)return s;const e=p.value;if(e.clock_in&&e.clock_out){const a=Math.max(0,Math.floor((new Date(e.clock_out).getTime()-new Date(e.clock_in).getTime())/1e3)),l=e.break_start?new Date(e.break_start):null,n=e.break_end?new Date(e.break_end):null;let i=0;l&&n&&(i=Math.max(0,Math.floor((n.getTime()-l.getTime())/1e3)));const c=Math.max(0,a-i);s.push({name:"Work Hours",start:e.clock_in,end:e.clock_out,durationSeconds:c,breakDurationSeconds:i,notes:"-"})}if(e.break_start&&e.break_end){const a=Math.max(0,Math.floor((new Date(e.break_end).getTime()-new Date(e.break_start).getTime())/1e3));s.push({name:"Break",start:e.break_start,end:e.break_end,durationSeconds:a,breakDurationSeconds:a,notes:"-"})}return X.value.forEach(a=>{var l;if(a.clock_in&&a.clock_out){const n=Math.max(0,Math.floor((new Date(a.clock_out).getTime()-new Date(a.clock_in).getTime())/1e3));s.push({name:((l=a.task)==null?void 0:l.title)||`Task #${a.task_id}`,start:a.clock_in,end:a.clock_out,durationSeconds:n,breakDurationSeconds:0,notes:"-"})}}),s.sort((a,l)=>{const n=new Date(a.start).getTime(),i=new Date(l.start).getTime();return(isNaN(i)?0:i)-(isNaN(n)?0:n)}),s}),Dt=async()=>{"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission()},Je=(s,e,a)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(s,{body:e,icon:"/favicon.ico",badge:"/favicon.ico",tag:"time-tracker-notification",requireInteraction:!1,...a})},Mt=()=>{var s;if(H.value&&((s=p.value)!=null&&s.break_start)){const e=new Date(p.value.break_start),a=se.value,l=Math.floor((a.getTime()-e.getTime())/1e3),n=Math.floor(l/60);n>=13&&!He.value&&(Je("Break Reminder","You're approaching the 15-minute break limit. Please end your break soon.",{tag:"break-13-min"}),He.value=!0),n>=15&&!We.value&&(Je("Break Over Limit","You've exceeded the 15-minute break limit. Please end your break now.",{tag:"break-15-min",requireInteraction:!0}),We.value=!0)}else H.value||(He.value=!1,We.value=!1)},dt=async()=>{var s,e;if(!(Ke.value||De.value)&&!P.value&&(s=p.value)!=null&&s.clock_out&&(e=p.value)!=null&&e.clock_in){const a=new Date(p.value.clock_in),l=new Date(p.value.clock_out);Math.floor((l.getTime()-a.getTime())/1e3)/3600>=1&&!p.value.lunch_start&&!De.value&&(Je("Lunch Reminder","You've been working for 1 hour without taking lunch. Please remember to take your lunch break.",{tag:"lunch-reminder",requireInteraction:!0}),De.value=!0,Ke.value=!0)}},Ct=()=>{Te&&clearInterval(Te),Te=window.setInterval(()=>{Mt(),De.value||dt()},6e4)},ut=s=>{if(P.value)return s.preventDefault(),s.returnValue="",""};let Qe=null;is(be,s=>{Qe!==null&&clearTimeout(Qe),Qe=window.setTimeout(()=>{const e=s.trim();if(e&&it(e)){const a=Ye(e);a&&(j.value.some(n=>(n.clickup_task_id||"").toLowerCase()===a.toLowerCase())||(le.value=a,Se.value=!0))}},500)}),rs(async()=>{const s=new Date;oe.value=s.toISOString().split("T")[0],await Dt(),q(),It(),G(),Me(),re(),Ge=window.setInterval(()=>{se.value=new Date},1e3),Ct(),window.addEventListener("beforeunload",ut)}),ds(()=>{Ge&&window.clearInterval(Ge),Te&&clearInterval(Te),window.removeEventListener("beforeunload",ut)});const q=async()=>{try{const s=await T.get("/time-entries/current");p.value=s.data,Jt(),H.value||(He.value=!1,We.value=!1);const e=new Date().toISOString().split("T")[0];oe.value!==e&&(De.value=!1,Ke.value=!1)}catch(s){p.value=null,ce.value="No entry today",console.error("Error fetching current entry:",s)}},Nt=us(),It=async()=>{var e,a;const s=(e=Nt.props.auth)==null?void 0:e.user;if(s!=null&&s.role){const l=s.role;["admin","manager","employee","developer"].includes(l)&&(tt.value=l)}else try{const n=(((a=(await T.get("/admin/users")).data)==null?void 0:a.data)||[]).find(i=>(i==null?void 0:i.id)&&(i==null?void 0:i.email));if(n!=null&&n.role){const i=n.role;["admin","manager","employee","developer"].includes(i)&&(tt.value=i)}}catch{}},G=async()=>{try{const s=await T.get("/my/tasks");j.value=(s.data||[]).map(e=>({...e,id:(e==null?void 0:e.id)!==void 0?Number(e.id):e.id}))}catch{}},$t=()=>{Ae.value=!1,$.value=null},Lt=async()=>{$e.value||Y.value||await Et()},Et=async()=>{var s,e,a;if(!Y.value){Y.value=!0,_.value=[],R.value=0,v.value=null;try{const l=await T.get("/my/clickup/configured-spaces");if(pe.value=((s=l.data)==null?void 0:s.space_ids)||[],pe.value.length===0){alert("No ClickUp spaces configured. Please set CLICKUP_SPACE_IDS in your environment variables."),Y.value=!1;return}he.value=!0,await ie()}catch(l){alert(((a=(e=l==null?void 0:l.response)==null?void 0:e.data)==null?void 0:a.error)||"Failed to start space sync"),Y.value=!1,he.value=!1}}},ie=async()=>{var e,a;if(R.value>=pe.value.length){Y.value=!1,he.value=!1,await G(),pe.value.length,_.value.filter(l=>{var n;return(n=l.result)==null?void 0:n.ok}).length,_.value.filter(l=>{var n,i;return!((n=l.result)!=null&&n.ok)&&((i=l.result)==null?void 0:i.skipped)}).length,$.value={summary:{total:_.value.reduce((l,n)=>{var i,c;return l+(((c=(i=n.result)==null?void 0:i.summary)==null?void 0:c.total)||0)},0),created:_.value.reduce((l,n)=>{var i,c;return l+(((c=(i=n.result)==null?void 0:i.summary)==null?void 0:c.created)||0)},0),updated:_.value.reduce((l,n)=>{var i,c;return l+(((c=(i=n.result)==null?void 0:i.summary)==null?void 0:c.updated)||0)},0),unchanged:_.value.reduce((l,n)=>{var i,c;return l+(((c=(i=n.result)==null?void 0:i.summary)==null?void 0:c.unchanged)||0)},0),skipped:_.value.reduce((l,n)=>{var i,c;return l+(((c=(i=n.result)==null?void 0:i.summary)==null?void 0:c.skipped)||0)},0)},created:_.value.flatMap(l=>{var n;return((n=l.result)==null?void 0:n.created)||[]}),updated:_.value.flatMap(l=>{var n;return((n=l.result)==null?void 0:n.updated)||[]}),skipped:_.value.flatMap(l=>{var n;return((n=l.result)==null?void 0:n.skipped)||[]}),sources:_.value.map(l=>`Space: ${l.name} (${l.space_id})`)},Ae.value=!0;return}const s=pe.value[R.value];v.value={current:R.value+1,total:pe.value.length,spaceName:"Loading...",status:"checking"};try{const l=await T.get(`/my/clickup/space/${s}/info`);if(E.value=l.data,!E.value){v.value.status="error",_.value.push({space_id:s,name:"Unknown",result:{ok:!1,error:"Failed to get space info"}}),R.value++,setTimeout(()=>{ie()},1e3);return}if(v.value={...v.value,spaceName:E.value.name},!E.value.is_member){v.value.status="skipped",_.value.push({space_id:s,name:E.value.name,result:{ok:!1,skipped:!0,reason:"User is not a member of this space"}}),R.value++,setTimeout(()=>{ie()},1e3);return}v.value.status="checking"}catch(l){v.value.status="error",_.value.push({space_id:s,name:"Unknown",result:{ok:!1,error:((a=(e=l==null?void 0:l.response)==null?void 0:e.data)==null?void 0:a.error)||"Failed to get space info"}}),R.value++,setTimeout(()=>{ie()},1e3)}},Ut=async()=>{var e,a;if(!E.value||!v.value)return;const s=E.value.space_id;if(s){v.value.status="syncing";try{const l=await T.post(`/my/clickup/space/${s}/sync`);v.value.status="completed",v.value.result=l.data,_.value.push({space_id:s,name:E.value.name,result:l.data}),R.value++,setTimeout(()=>{ie()},1500)}catch(l){v.value.status="error",_.value.push({space_id:s,name:E.value.name,result:{ok:!1,error:((a=(e=l==null?void 0:l.response)==null?void 0:e.data)==null?void 0:a.error)||"Failed to sync space"}}),R.value++,setTimeout(()=>{ie()},1500)}}},Pt=()=>{if(!E.value)return;const s=E.value.space_id;s&&(_.value.push({space_id:s,name:E.value.name,result:{ok:!1,skipped:!0,reason:"User skipped this space"}}),R.value++,ie())},Bt=()=>{Y.value=!1,he.value=!1,R.value=0,v.value=null,E.value=null,_.value=[]},jt=async()=>{var s,e,a,l,n;if(le.value){ge.value=!0;try{(s=(await T.post("/my/clickup/sync-task",{clickup_task_id:le.value})).data)!=null&&s.ok?(await G(),be.value="",Se.value=!1,le.value=null,alert("Task synced successfully!")):alert("Failed to sync task")}catch(i){const c=((a=(e=i==null?void 0:i.response)==null?void 0:e.data)==null?void 0:a.error)||((n=(l=i==null?void 0:i.response)==null?void 0:l.data)==null?void 0:n.message)||"Failed to sync task from ClickUp";alert(c)}finally{ge.value=!1}}},ct=async()=>{try{await Qt()}catch{}},Ot=async()=>{try{await Xt()}catch{}},Ht=async()=>{try{await es()}catch{}},Xe=async()=>{try{await ts()}catch{}},Me=async()=>{try{const s=await T.get("/tasks/today-entries");X.value=(s.data||[]).map(a=>({...a,task_id:(a==null?void 0:a.task_id)!==void 0?Number(a.task_id):a.task_id}));const e=(X.value||[]).find(a=>a.clock_in&&!a.clock_out);b.value=e?e.task_id:null}catch{X.value=[]}},mt=async s=>{try{const e=await T.get(`/tasks/${s}/sync`);O.value=e.data,Ie.value=!0}catch{Ie.value=!1}},Wt=async()=>{if(H.value){await Xe();return}P.value?await Ot():await ct()},Ft=async()=>{if(b.value){alert("Pause or stop the running task first.");return}H.value?await Xe():(P.value||await ct(),await Ht())},K=s=>s<10?`0${s}`:`${s}`,Rt=I(()=>{var s;return P.value&&((s=p.value)!=null&&s.clock_in)?new Date(p.value.clock_in):null}),zt=I(()=>{var s;return H.value&&((s=p.value)!=null&&s.break_start)?new Date(p.value.break_start):null}),Vt=I(()=>{const s=X.value.find(e=>e.clock_in&&!e.clock_out);return s?new Date(s.clock_in):null}),qt=I(()=>{const s=Rt.value;if(!s)return"00:00:00";const e=se.value.getTime()-s.getTime(),a=Math.max(0,Math.floor(e/1e3)),l=Math.floor(a/3600),n=Math.floor(a%3600/60),i=a%60;return`${K(l)}:${K(n)}:${K(i)}`}),At=I(()=>{const s=zt.value;if(!s)return"00:00:00";const e=se.value.getTime()-s.getTime(),a=Math.max(0,Math.floor(e/1e3)),l=Math.floor(a/3600),n=Math.floor(a%3600/60),i=a%60;return`${K(l)}:${K(n)}:${K(i)}`}),Yt=I(()=>{const s=Vt.value;if(!s)return"00:00:00";const e=se.value.getTime()-s.getTime(),a=Math.max(0,Math.floor(e/1e3)),l=Math.floor(a/3600),n=Math.floor(a%3600/60),i=a%60;return`${K(l)}:${K(n)}:${K(i)}`}),Zt=I(()=>{var a,l;let s=Ne.value||0;if(P.value&&((a=p.value)!=null&&a.clock_in)&&!((l=p.value)!=null&&l.clock_out)){const n=new Date(p.value.clock_in),i=se.value,c=Math.max(0,Math.floor((i.getTime()-n.getTime())/1e3));let x=0;if(p.value.break_start)if(p.value.break_end){const M=new Date(p.value.break_start),g=new Date(p.value.break_end);x=Math.max(0,Math.floor((g.getTime()-M.getTime())/1e3))}else{const M=new Date(p.value.break_start);x=Math.max(0,Math.floor((i.getTime()-M.getTime())/1e3))}let D=0;if(p.value.lunch_start)if(p.value.lunch_end){const M=new Date(p.value.lunch_start),g=new Date(p.value.lunch_end);D=Math.max(0,Math.floor((g.getTime()-M.getTime())/1e3))}else{const M=new Date(p.value.lunch_start);D=Math.max(0,Math.floor((i.getTime()-M.getTime())/1e3))}const f=Math.max(0,c-x-D);s+=f}return X.value&&X.value.length>0&&X.value.forEach(n=>{if(n.clock_in&&!n.clock_out){const i=new Date(n.clock_in),c=se.value,x=Math.max(0,Math.floor((c.getTime()-i.getTime())/1e3));s+=x}}),(s/3600).toFixed(2)}),Gt=async()=>{await re(),Ve.value=!0},Kt=async()=>{var s,e;if(!ke.value){ke.value=!0;try{await re(),await T.post("/my/daily-report/send"),alert("Daily report sent successfully to your email!")}catch(a){alert(((e=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:e.message)||"Failed to send daily report")}finally{ke.value=!1}}},re=async()=>{var s;try{const e=new Date().toISOString().split("T")[0],l=((s=(await T.get("/my/time-entries",{params:{start_date:e,end_date:e}})).data)==null?void 0:s.entries)||[],n=[];let i=0,c=0,x=0;const D=new Date;l.forEach(f=>{const M=f.clock_in_formatted||f.clock_in,g=f.clock_out_formatted||f.clock_out,k=ee(f.clock_in),w=ee(f.clock_out);if(f.is_break||f.entry_type==="break"){if(!k)return;const N=!!w;let o=0;N&&w?(o=Math.max(0,Math.floor((w.getTime()-k.getTime())/1e3)),x+=o):o=Math.max(0,Math.floor((D.getTime()-k.getTime())/1e3)),n.push({name:"Break",start:M,end:N?g:null,durationSeconds:o,breakDurationSeconds:o,notes:N?"-":"In progress"});return}if(!k)return;const h=f.task&&(f.task.title||f.task.name),C=!!w;if(!h)if(C&&w){const N=Math.max(0,Math.floor((w.getTime()-k.getTime())/1e3)),o=ee(f.lunch_start),S=ee(f.lunch_end);let J=0;o&&S&&(J=Math.max(0,Math.floor((S.getTime()-o.getTime())/1e3)));const A=Math.max(0,N-J);i+=A,n.push({name:"Work Hours",start:M,end:g,durationSeconds:A,breakDurationSeconds:0,notes:"-"})}else{const N=Math.max(0,Math.floor((D.getTime()-k.getTime())/1e3));n.push({name:"Work Hours",start:M,end:null,durationSeconds:N,breakDurationSeconds:0,notes:"In progress"})}if(h){let N=0;C&&w?N=Math.max(0,Math.floor((w.getTime()-k.getTime())/1e3)):N=Math.max(0,Math.floor((D.getTime()-k.getTime())/1e3)),c+=N,n.push({name:f.task.title||f.task.name,start:M,end:C?g:null,durationSeconds:N,breakDurationSeconds:0,notes:C?"-":"In progress"})}}),n.sort((f,M)=>{const g=new Date(f.start).getTime(),k=new Date(M.start).getTime();return(isNaN(k)?0:k)-(isNaN(g)?0:g)}),at.value=n,Ne.value=i,qe.value=c}catch{at.value=[],Ne.value=0,qe.value=0}},Jt=()=>{!p.value||!p.value.clock_in?ce.value="Not clocked in":p.value.clock_out?ce.value="Clocked out":Tt.value?ce.value="On lunch":H.value?ce.value="On break":ce.value="Clocked in"},Qt=async s=>{var a,l;const e=new Date().toISOString();p.value?(p.value.clock_in=e,p.value.clock_out=void 0):p.value={id:0,clock_in:e,clock_out:void 0,break_start:void 0,break_end:void 0,lunch_start:void 0,lunch_end:void 0},L.value=!0;try{const n={};await T.post("/time-entries/clock-in",n),await q(),await G(),await re()}catch(n){await q(),alert(((l=(a=n.response)==null?void 0:a.data)==null?void 0:l.message)||"Error clocking in")}finally{L.value=!1}},Xt=async()=>{var s,e;if(b.value){alert("Pause or stop the running task first.");return}p.value&&(p.value.clock_out=new Date().toISOString()),L.value=!0;try{await T.post("/time-entries/clock-out"),await q(),await G(),await re(),setTimeout(()=>{dt()},1e3)}catch(a){await q(),alert(((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Error clocking out")}finally{L.value=!1}},es=async()=>{var e,a;const s=new Date().toISOString();p.value&&(p.value.break_start=s,p.value.break_end=void 0),L.value=!0;try{await T.post("/time-entries/break-start"),await q(),await G(),await re()}catch(l){await q(),alert(((a=(e=l.response)==null?void 0:e.data)==null?void 0:a.message)||"Error starting break")}finally{L.value=!1}},ts=async()=>{var s,e;p.value&&(p.value.break_end=new Date().toISOString()),L.value=!0;try{await T.post("/time-entries/break-end"),await q(),await G(),await re()}catch(a){await q(),alert(((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Error ending break")}finally{L.value=!1}},pt=async s=>{var l,n,i;if(!P.value){alert("Please Time In first before starting a task.");return}H.value&&await Xe();const e=b.value,a=Number(s);if(b.value=isNaN(a)?s:a,e&&e!==s)try{await T.post("/tasks/stop")}catch{}try{await T.post("/tasks/start",{task_id:a}),await Me()}catch(c){b.value=e,await Me();const x=((n=(l=c==null?void 0:c.response)==null?void 0:l.data)==null?void 0:n.message)||"Failed to start task";alert(x),((i=c==null?void 0:c.response)==null?void 0:i.status)===400&&x.includes("Time In")&&await q()}},vt=async()=>{const s=b.value;b.value=null;try{await T.post("/tasks/stop"),await Me()}catch{b.value=s,await Me()}},ss=async(s,e)=>{var l,n;if(!e)return;if(!confirm(`Are you sure you want to set this task to "${e}"?`)){await G();return}L.value=!0;try{await T.post(`/tasks/${s}/status`,{status:e}),await G()}catch(i){alert(((n=(l=i==null?void 0:i.response)==null?void 0:l.data)==null?void 0:n.message)||"Failed to update task status")}finally{L.value=!1}},gt=async()=>{var s,e;if(oe.value){Le.value=!0;try{const a=await T.get("/my/time-entries",{params:{start_date:oe.value,end_date:oe.value}}),l=((s=a.data)==null?void 0:s.entries)||[];nt.value=l,U.value=[];let n=0,i=0,c=null,x=null;const D=new Date;l.forEach(g=>{const k=g.clock_in_formatted||g.clock_in,w=g.clock_out_formatted||g.clock_out,h=ee(g.clock_in),C=ee(g.clock_out);if(h&&(!c||h<c)&&(c=h,x=k),g.is_break||g.entry_type==="break"){if(!h)return;const Q=!!C;let ue=0;Q&&C?(ue=Math.max(0,Math.floor((C.getTime()-h.getTime())/1e3)),i+=ue):ue=Math.max(0,Math.floor((D.getTime()-h.getTime())/1e3)),U.value.push({name:"Break",start:k,end:Q?w:null,durationSeconds:ue,breakDurationSeconds:ue,notes:Q?"-":"In progress"});return}if(!h)return;const N=g.task&&(g.task.title||g.task.name),o=!!C;let S=0,J=0;o&&C?S=Math.max(0,Math.floor((C.getTime()-h.getTime())/1e3)):J=Math.max(0,Math.floor((D.getTime()-h.getTime())/1e3));const A=ee(g.lunch_start),ye=ee(g.lunch_end);let de=0;A&&ye?de=Math.max(0,Math.floor((ye.getTime()-A.getTime())/1e3)):A&&!ye&&(de=Math.max(0,Math.floor((D.getTime()-A.getTime())/1e3)));const Ce=o?Math.max(0,S-de):Math.max(0,J-de);if(N||(o&&C?U.value.push({name:"Work Hours",start:k,end:w,durationSeconds:Ce,breakDurationSeconds:0,notes:"-"}):U.value.push({name:"Work Hours",start:k,end:null,durationSeconds:Ce,breakDurationSeconds:0,notes:"In progress"})),N){const Q=g.task.title||g.task.name;if(o&&C){const ue=Math.max(0,Math.floor((C.getTime()-h.getTime())/1e3));U.value.push({name:Q,start:k,end:w,durationSeconds:ue,breakDurationSeconds:0,notes:"-"})}else U.value.push({name:Q,start:k,end:null,durationSeconds:J,breakDurationSeconds:0,notes:"In progress"})}}),U.value.sort((g,k)=>{const w=new Date(g.start).getTime(),h=new Date(k.start).getTime();return(isNaN(h)?0:h)-(isNaN(w)?0:w)});const f=U.value.filter(g=>g.name==="Work Hours").reduce((g,k)=>g+(k.durationSeconds||0),0),M=U.value.filter(g=>g.name==="Break").reduce((g,k)=>g+(k.durationSeconds||0),0);if((e=a.data)!=null&&e.daily_totals)z.value={workSeconds:a.data.daily_totals.work_seconds||0,breakSeconds:a.data.daily_totals.break_seconds||0,lunchSeconds:a.data.daily_totals.lunch_seconds||0,tasksCount:a.data.daily_totals.tasks_count||0,status:a.data.daily_totals.status||"No Entry",overtimeSeconds:a.data.daily_totals.overtime_seconds||0};else{const k=Math.max(0,f-28800);let w="No Entry";if(c){const h=(c.getUTCHours()+8)%24,C=c.getUTCMinutes();w=h<8||h===8&&C<=30?"Perfect":"Late"}z.value={workSeconds:f,breakSeconds:M,lunchSeconds:0,tasksCount:U.value.length,status:w,overtimeSeconds:k}}}catch(a){console.error("Error loading time entries",a),nt.value=[],U.value=[],z.value={workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}}finally{Le.value=!1}}},ee=s=>{if(!s)return null;const e=s.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?/);if(e){const n=Number(e[1]),i=Number(e[2])-1,c=Number(e[3]),x=Number(e[4]),D=Number(e[5]),f=Number(e[6]||"0");return new Date(Date.UTC(n,i,c,x-8,D,f))}const a=s.includes("T")?s:s.replace(" ","T"),l=new Date(a);return isNaN(l.getTime())?null:l},xe=s=>{if(!s)return"--";try{const a=new Date(s);if(!isNaN(a.getTime()))return a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Manila"})}catch{}const e=s.match(/\b(\d{1,2}):(\d{2})(?::(\d{2}))?/);if(e){let a=parseInt(e[1],10);const l=e[2],n=a>=12?"PM":"AM";return a=a%12,a===0&&(a=12),`${a}:${l} ${n}`}return"--"},W=s=>{const e=typeof s=="number"&&isFinite(s)?Math.max(0,Math.floor(s)):0,a=Math.floor(e/3600),l=Math.floor(e%3600/60),n=e%60,i=c=>c<10?`0${c}`:`${c}`;return`${i(a)}:${i(l)}:${i(n)}`},xt=s=>{if(!s)return"--";const e=new Date(s);return isNaN(e.getTime())?s:e.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})},et=s=>{if(!s||s===0)return"--";const e=Math.floor(s/1e3);return W(e)},as=(s,e)=>{const a=s&&s>0?et(s):"0:00:00",l=e&&e>0?et(e):"--";return`${a} / ${l}`},yt=s=>{if(!s)return"";const e=s.toLowerCase().trim();return e==="to do"||e==="todo"?"text-gray-700":e.includes("complete")||e.includes("done")||e.includes("finished")?"bg-green-100 text-green-800":e.includes("progress")||e.includes("doing")||e.includes("in progress")||e.includes("working")?"bg-blue-100 text-blue-800":e.includes("pending")||e.includes("waiting")?"bg-yellow-100 text-yellow-800":e.includes("blocked")||e.includes("stuck")?"bg-red-100 text-red-800":e.includes("review")||e.includes("testing")?"bg-purple-100 text-purple-800":e.includes("cancel")||e.includes("closed")?"bg-gray-100 text-gray-800":"bg-indigo-100 text-indigo-800"},os=s=>{if(!s)return"bg-gray-100 text-gray-800";const e=s.toLowerCase().trim();return e==="urgent"||e==="critical"?"bg-red-100 text-red-800":e==="high"?"bg-orange-100 text-orange-800":e==="normal"||e==="medium"?"bg-yellow-100 text-yellow-800":e==="low"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"},ft=s=>{if(!s)return!1;const e=s.toLowerCase().trim();return e!=="to do"&&e!=="todo"},ns=s=>{if(!s)return"";const e=s.split(`
`),a=[];let l=!1,n=[];for(let c=0;c<e.length;c++){const x=e[c].trim();if(!x){l&&n.length>0&&(a.push(`<ul class="list-disc ml-6 mb-3 space-y-1">${n.join("")}</ul>`),n=[],l=!1),a.length>0&&!a[a.length-1].startsWith("<")&&a.push('</p><p class="mb-2">');continue}if(x.match(/^#{1,3}\s+/)){l&&n.length>0&&(a.push(`<ul class="list-disc ml-6 mb-3 space-y-1">${n.join("")}</ul>`),n=[],l=!1),x.startsWith("###")?a.push(`<h3 class="font-semibold text-gray-900 mt-4 mb-2 text-base">${x.replace(/^###\s+/,"")}</h3>`):x.startsWith("##")?a.push(`<h2 class="font-bold text-gray-900 mt-5 mb-3 text-lg">${x.replace(/^##\s+/,"")}</h2>`):x.startsWith("#")&&a.push(`<h1 class="font-bold text-gray-900 mt-6 mb-4 text-xl">${x.replace(/^#\s+/,"")}</h1>`);continue}if(x.match(/^[\-\*â€¢]\s+/)){l||(l=!0);const f=x.replace(/^[\-\*â€¢]\s+/,"").trim();n.push(`<li class="mb-1">${f}</li>`);continue}if(x.match(/^\d+\.\s+/)){l||(l=!0);const f=x.replace(/^\d+\.\s+/,"").trim();n.push(`<li class="mb-1 list-decimal">${f}</li>`);continue}l&&n.length>0&&(a.push(`<ul class="list-disc ml-6 mb-3 space-y-1">${n.join("")}</ul>`),n=[],l=!1);let D=x.replace(/\*\*(.+?)\*\*/g,'<strong class="font-semibold">$1</strong>').replace(/\*(.+?)\*/g,'<em class="italic">$1</em>');a.push(D)}l&&n.length>0&&a.push(`<ul class="list-disc ml-6 mb-3 space-y-1">${n.join("")}</ul>`);let i=a.join("<br>");return i.startsWith("<")||(i='<p class="mb-2">'+i),i.endsWith(">")||(i=i+"</p>"),i};return(s,e)=>(u(),d(F,null,[kt(cs(ms),{title:"Dashboard"}),kt(vs,null,{header:ht(()=>[...e[27]||(e[27]=[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Time Tracker Dashboard ",-1)])]),default:ht(()=>{var a,l,n,i,c,x,D,f,M,g,k,w,h,C,N;return[t("div",gs,[t("div",xs,[t("div",ys,[t("nav",fs,[t("button",{onClick:e[0]||(e[0]=o=>ve.value="dashboard"),class:B(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",ve.value==="dashboard"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Dashboard ",2),t("button",{onClick:e[1]||(e[1]=o=>{ve.value="time-entries",gt()}),class:B(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",ve.value==="time-entries"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Time Entries ",2)])]),ve.value==="dashboard"?(u(),d("div",ks,[t("div",hs,[t("div",bs,[t("div",_s,[e[29]||(e[29]=t("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Work Day Timer",-1)),t("p",ws,r(qt.value),1),t("p",Ss,r(P.value?"Working":"Idle"),1),H.value?(u(),d("div",Ts,[t("p",Ds,[e[28]||(e[28]=fe("Break Timer: ",-1)),t("span",Ms,r(At.value),1)])])):y("",!0),t("div",Cs,[t("button",{onClick:Wt,disabled:L.value,"data-action":P.value?"time_out":"time_in",class:B(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",P.value?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"])},r(P.value?"Time Out":"Time In"),11,Ns),t("button",{onClick:Ft,disabled:L.value,"data-action":H.value?"break_out":"break_in",class:B(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",H.value?"bg-orange-600 hover:bg-orange-700":"bg-yellow-600 hover:bg-yellow-700"])},r(H.value?"Break Out":"Break In"),11,Is)])])]),t("div",$s,[t("div",Ls,[e[31]||(e[31]=t("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Running Task",-1)),b.value?(u(),d("div",Es,[t("button",{onClick:e[2]||(e[2]=o=>mt(b.value)),class:"text-indigo-600 hover:underline text-sm"},r(((a=j.value.find(o=>o.id===b.value))==null?void 0:a.title)||"#"+b.value),1),t("p",Us,[fe(r(Yt.value),1),(l=j.value.find(o=>o.id===b.value))!=null&&l.estimated_time?(u(),d("span",Ps," / "+r(et((n=j.value.find(o=>o.id===b.value))==null?void 0:n.estimated_time)),1)):y("",!0)]),t("div",Bs,[t("button",{onClick:e[3]||(e[3]=o=>vt()),disabled:L.value,"data-action":"pause_task","data-task-id":b.value||void 0,"data-task-name":((i=j.value.find(o=>o.id===b.value))==null?void 0:i.title)||void 0,class:"rounded-md bg-yellow-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-yellow-700"}," Pause ",8,js)])])):(u(),d("div",Os,[t("div",Hs,[te(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>ae.value=o),class:"w-full rounded-md border-gray-300 text-sm shadow-sm"},[e[30]||(e[30]=t("option",{value:null},"Select a task",-1)),(u(!0),d(F,null,V(j.value,o=>(u(),d("option",{key:o.id,value:o.id},r(o.title),9,Ws))),128))],512),[[Re,ae.value]]),t("button",{onClick:e[5]||(e[5]=o=>ae.value?pt(ae.value):void 0),disabled:L.value||!ae.value,"data-action":"play_task","data-task-id":ae.value||void 0,"data-task-name":((c=j.value.find(o=>o.id===ae.value))==null?void 0:c.title)||void 0,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700 disabled:opacity-50"}," Start ",8,Fs)]),j.value.length?y("",!0):(u(),d("p",Rs,"No tasks available."))]))])]),t("div",zs,[t("div",Vs,[e[33]||(e[33]=t("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Daily Logs",-1)),t("p",qs,[fe(r(Zt.value),1),e[32]||(e[32]=t("span",{class:"text-sm font-normal text-gray-500"}," / 8 Hours",-1))]),t("div",As,[t("button",{onClick:Gt,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-700"},"Daily Logs"),t("button",{onClick:Kt,disabled:ke.value,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700 disabled:opacity-50"},r(ke.value?"Sending...":"Send Report"),9,Ys)])])])]),t("div",Zs,[t("div",Gs,[t("div",Ks,[t("div",Js,[e[34]||(e[34]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"My Tasks",-1)),t("button",{onClick:Lt,disabled:$e.value,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700 disabled:opacity-60 disabled:cursor-not-allowed flex items-center gap-2"},[$e.value?(u(),d("span",Xs)):y("",!0),t("span",null,r($e.value?"Syncingâ€¦":"Refresh from ClickUp"),1)],8,Qs)]),t("div",ea,[t("nav",ta,[t("button",{type:"button",onClick:e[6]||(e[6]=o=>rt("ongoing")),class:B(["whitespace-nowrap border-b-2 px-1 pb-2 text-sm font-medium",we.value==="ongoing"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," On Going ",2),t("button",{type:"button",onClick:e[7]||(e[7]=o=>rt("complete")),class:B(["whitespace-nowrap border-b-2 px-1 pb-2 text-sm font-medium",we.value==="complete"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Complete ",2)])]),t("div",sa,[te(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>be.value=o),onInput:e[9]||(e[9]=o=>Z(1)),type:"text",placeholder:"Search tasks",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[ze,be.value]]),te(t("select",{"onUpdate:modelValue":e[10]||(e[10]=o=>Ee.value=o),onChange:e[11]||(e[11]=o=>Z(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[e[35]||(e[35]=t("option",{value:"all"},"All",-1)),(u(!0),d(F,null,V(Ue.value,o=>(u(),d("option",{key:o,value:o},r(o),9,aa))),128))],544),[[Re,Ee.value]]),te(t("select",{"onUpdate:modelValue":e[12]||(e[12]=o=>Pe.value=o),onChange:e[13]||(e[13]=o=>Z(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...e[36]||(e[36]=[t("option",{value:"all"},"All priorities",-1),t("option",{value:"urgent"},"Urgent",-1),t("option",{value:"high"},"High",-1),t("option",{value:"normal"},"Normal",-1),t("option",{value:"low"},"Low",-1),t("option",{value:"none"},"None",-1)])],544),[[Re,Pe.value]]),te(t("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>Be.value=o),onChange:e[15]||(e[15]=o=>Z(1)),type:"date",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[ze,Be.value]]),te(t("input",{"onUpdate:modelValue":e[16]||(e[16]=o=>je.value=o),onChange:e[17]||(e[17]=o=>Z(1)),type:"date",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[ze,je.value]]),te(t("select",{"onUpdate:modelValue":e[18]||(e[18]=o=>_e.value=o),onChange:e[19]||(e[19]=o=>Z(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...e[37]||(e[37]=[t("option",{value:5},"5",-1),t("option",{value:10},"10",-1),t("option",{value:20},"20",-1),t("option",{value:50},"50",-1)])],544),[[Re,_e.value,void 0,{number:!0}]])])]),t("div",oa,[t("table",na,[e[41]||(e[41]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Campaign"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Parent Task"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Due Date"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Estimated Time"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Priority"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Actions")])],-1)),t("tbody",la,[(u(!0),d(F,null,V(St.value,o=>(u(),d("tr",{key:o.id},[t("td",ia,[t("button",{onClick:S=>mt(o.id),class:"hover:underline truncate block w-full text-left"},r(o.title),9,ra)]),t("td",da,r(o.clickup_list_name||"--"),1),t("td",ua,r(o.parent_task_name||"N/A"),1),t("td",ca,[ft(o.status)?(u(),d("span",{key:0,class:B(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold",yt(o.status)])},r(o.status||"â€”"),3)):(u(),d("span",ma,r(o.status||"â€”"),1))]),t("td",pa,r(o.due_date?new Date(o.due_date).toLocaleDateString():"--"),1),t("td",va,r(as(o.played_time,o.estimated_time)),1),t("td",ga,[t("span",{class:B(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold",os(o.priority||null)])},r(o.priority||"None"),3)]),t("td",xa,[t("div",ya,[t("button",{onClick:S=>me(o.id)?vt():pt(o.id),disabled:L.value||!P.value,"data-action":me(o.id)?"pause_task":"play_task","data-task-id":o.id,"data-task-name":o.title,class:B(["rounded-full p-2 text-white disabled:opacity-50 disabled:cursor-not-allowed",me(o.id)?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"]),"aria-label":me(o.id)?"Pause":"Play",title:P.value?me(o.id)?"Pause":"Play":"Please Time In first before starting a task"},[me(o.id)?(u(),d("svg",ha,[...e[39]||(e[39]=[t("path",{d:"M6 5h4v14H6zM14 5h4v14h-4z"},null,-1)])])):(u(),d("svg",ka,[...e[38]||(e[38]=[t("path",{d:"M8 5v14l11-7z"},null,-1)])]))],10,fa),t("select",{value:o.status||"",onChange:S=>ss(o.id,S.target.value),class:"rounded-md border-gray-300 text-xs shadow-sm"},[e[40]||(e[40]=t("option",{disabled:"",value:""},"Set statusâ€¦",-1)),(u(!0),d(F,null,V(Ue.value,S=>(u(),d("option",{key:S+o.id,value:S},r(S),9,_a))),128)),Ue.value.includes("complete")?y("",!0):(u(),d("option",wa,"complete")),Ue.value.includes("done")?y("",!0):(u(),d("option",Sa,"done"))],40,ba)])])]))),128))])]),t("div",Ta,[t("div",null," Page "+r(ne.value)+" of "+r(Oe.value)+" â€¢ "+r(Ze.value.length)+" total ",1),t("div",Da,[t("button",{onClick:e[20]||(e[20]=o=>Z(ne.value-1)),disabled:ne.value<=1,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Prev",8,Ma),t("button",{onClick:e[21]||(e[21]=o=>Z(ne.value+1)),disabled:ne.value>=Oe.value,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Next",8,Ca)])])])])]),t("div",Na,[t("div",Ia,[e[43]||(e[43]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Today's Time Events",-1)),Fe.value.length===0?(u(),d("div",$a," No time entries recorded today. Clock in to start tracking time. ")):(u(),d("div",La,[t("table",Ea,[e[42]||(e[42]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),t("tbody",Ua,[(u(!0),d(F,null,V(Fe.value,(o,S)=>(u(),d("tr",{key:S},[t("td",Pa,r(o.name),1),t("td",Ba,r(xe(o.start)),1),t("td",ja,r(xe(o.end)),1),t("td",Oa,r(W(o.durationSeconds)),1),t("td",Ha,r(W(o.breakDurationSeconds||0)),1),t("td",Wa,r(o.notes||"-"),1)]))),128))])])]))])])])):y("",!0),ve.value==="time-entries"?(u(),d("div",Fa,[t("div",Ra,[t("div",za,[t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),te(t("input",{"onUpdate:modelValue":e[22]||(e[22]=o=>oe.value=o),onChange:gt,type:"date",class:"w-full rounded-md border-gray-300 shadow-sm"},null,544),[[ze,oe.value]])])])]),t("div",Va,[e[50]||(e[50]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Daily Summary",-1)),t("div",qa,[t("div",null,[e[45]||(e[45]=t("div",{class:"text-gray-500"},"ðŸ•’ Time In Hours",-1)),t("div",Aa,r(W(z.value.workSeconds)),1)]),t("div",null,[e[46]||(e[46]=t("div",{class:"text-gray-500"},"â˜• Total Breaks",-1)),t("div",Ya,r(W(z.value.breakSeconds)),1)]),t("div",null,[e[47]||(e[47]=t("div",{class:"text-gray-500"},"ðŸ“‹ Entries",-1)),t("div",Za,r(z.value.tasksCount),1)]),t("div",null,[e[48]||(e[48]=t("div",{class:"text-gray-500"},"â° Status",-1)),t("div",{class:B(["font-semibold",{"text-green-700":z.value.status==="Perfect","text-yellow-700":z.value.status==="Late","text-gray-700":z.value.status==="No Entry"}])},r(z.value.status),3)]),t("div",null,[e[49]||(e[49]=t("div",{class:"text-gray-500"},"âš¡ Overtime",-1)),t("div",Ga,r(W(z.value.overtimeSeconds)),1)])])]),t("div",Ka,[t("div",Ja,[t("table",Qa,[e[52]||(e[52]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),t("tbody",Xa,[(u(!0),d(F,null,V(U.value,(o,S)=>(u(),d("tr",{key:S},[t("td",eo,r(o.name),1),t("td",to,r(xe(o.start)),1),t("td",so,r(xe(o.end)),1),t("td",ao,r(W(o.durationSeconds)),1),t("td",oo,r(W(o.breakDurationSeconds||0)),1),t("td",no,r(o.notes||"-"),1)]))),128)),U.value.length===0&&!Le.value?(u(),d("tr",lo,[...e[51]||(e[51]=[t("td",{colspan:"6",class:"px-4 py-4 text-center text-sm text-gray-500"},"No entries for selected day",-1)])])):y("",!0)])])]),Le.value?(u(),d("div",io,[...e[53]||(e[53]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):y("",!0)])])):y("",!0)]),Ve.value?(u(),d("div",ro,[t("div",uo,[t("div",co,[e[54]||(e[54]=t("h4",{class:"text-md font-semibold"},"Daily Logs",-1)),t("button",{onClick:e[23]||(e[23]=o=>Ve.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs hover:bg-gray-200"},"Close")]),t("div",mo,[Fe.value.length===0?(u(),d("div",po,"No entry today.")):(u(),d("div",vo,[t("div",go,[t("div",xo,[e[55]||(e[55]=t("div",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"},"Total Work Hours",-1)),t("div",yo,r(W(Ne.value)),1)]),t("div",fo,[e[56]||(e[56]=t("div",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"},"Total Task Hours",-1)),t("div",ko,r(W(qe.value)),1)])]),t("div",ho,[t("table",bo,[e[57]||(e[57]=t("thead",{class:"bg-gray-50 sticky top-0"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),t("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),t("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),t("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),t("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),t("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),t("tbody",_o,[(u(!0),d(F,null,V(Fe.value,(o,S)=>(u(),d("tr",{key:S},[t("td",wo,r(o.name),1),t("td",So,r(xe(o.start)),1),t("td",To,r(xe(o.end)),1),t("td",Do,r(W(o.durationSeconds)),1),t("td",Mo,r(W(o.breakDurationSeconds||0)),1),t("td",Co,r(o.notes||"-"),1)]))),128))])])])]))])])])):y("",!0),he.value?(u(),d("div",No,[t("div",Io,[t("div",$o,[e[58]||(e[58]=t("h4",{class:"text-md font-semibold text-gray-900"},"Sync ClickUp Spaces",-1)),t("button",{onClick:Bt,disabled:Y.value&&((x=v.value)==null?void 0:x.status)==="syncing",class:"rounded-md bg-gray-100 px-2 py-1 text-xs hover:bg-gray-200 disabled:opacity-50"},"Cancel",8,Lo)]),t("div",Eo,[v.value?(u(),d("div",Uo,[t("div",Po,[t("div",Bo,[t("span",jo," Space "+r(v.value.current)+" of "+r(v.value.total),1),t("span",Oo,r(Math.round(v.value.current/v.value.total*100))+"% ",1)]),t("div",Ho,[t("div",{class:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:ps({width:`${v.value.current/v.value.total*100}%`})},null,4)])]),t("div",{class:B(["rounded-md border p-4 space-y-3",{"border-blue-200 bg-blue-50":v.value.status==="checking","border-green-200 bg-green-50":v.value.status==="completed","border-yellow-200 bg-yellow-50":v.value.status==="skipped","border-red-200 bg-red-50":v.value.status==="error","border-indigo-200 bg-indigo-50":v.value.status==="syncing"}])},[t("div",Wo,[v.value.status==="checking"||v.value.status==="syncing"?(u(),d("span",Fo)):v.value.status==="completed"?(u(),d("span",Ro,"âœ“")):v.value.status==="skipped"?(u(),d("span",zo,"âŠ˜")):v.value.status==="error"?(u(),d("span",Vo,"âœ—")):y("",!0),t("h5",qo,r(v.value.spaceName),1)]),v.value.status==="checking"&&((D=E.value)==null?void 0:D.is_member)===!0?(u(),d("div",Ao,[e[59]||(e[59]=t("p",{class:"text-sm text-gray-700"},"You are a member of this space. Would you like to sync tasks from it?",-1)),t("div",{class:"flex gap-2"},[t("button",{onClick:Ut,class:"flex-1 rounded-md bg-indigo-600 px-3 py-2 text-xs font-semibold text-white hover:bg-indigo-700"}," Yes, Sync This Space "),t("button",{onClick:Pt,class:"flex-1 rounded-md bg-gray-200 px-3 py-2 text-xs font-medium text-gray-700 hover:bg-gray-300"}," Skip ")])])):v.value.status==="checking"&&((f=E.value)==null?void 0:f.is_member)===!1?(u(),d("div",Yo," You are not a member of this space. Skipping... ")):v.value.status==="syncing"?(u(),d("div",Zo," Syncing tasks from this space... ")):v.value.status==="completed"&&v.value.result?(u(),d("div",Go,[e[60]||(e[60]=t("div",{class:"font-medium text-green-700"},"Sync completed!",-1)),t("div",Ko," Created: "+r(((M=v.value.result.summary)==null?void 0:M.created)||0)+", Updated: "+r(((g=v.value.result.summary)==null?void 0:g.updated)||0)+", Unchanged: "+r(((k=v.value.result.summary)==null?void 0:k.unchanged)||0),1)])):v.value.status==="skipped"?(u(),d("div",Jo," This space was skipped. ")):v.value.status==="error"?(u(),d("div",Qo," An error occurred while processing this space. ")):y("",!0)],2)])):y("",!0),_.value.length>0?(u(),d("div",Xo,[e[61]||(e[61]=t("h6",{class:"text-xs font-medium text-gray-600 mb-2"},"Completed Spaces:",-1)),t("div",en,[(u(!0),d(F,null,V(_.value,(o,S)=>{var J,A,ye,de,Ce,Q;return u(),d("div",{key:S,class:"flex items-center justify-between p-2 rounded bg-gray-50"},[t("span",tn,r(o.name),1),t("span",{class:B(["px-2 py-0.5 rounded text-xs font-medium",{"bg-green-100 text-green-700":(J=o.result)==null?void 0:J.ok,"bg-yellow-100 text-yellow-700":(A=o.result)==null?void 0:A.skipped,"bg-red-100 text-red-700":!((ye=o.result)!=null&&ye.ok)&&!((de=o.result)!=null&&de.skipped)}])},r((Ce=o.result)!=null&&Ce.ok?"Synced":(Q=o.result)!=null&&Q.skipped?"Skipped":"Error"),3)])}),128))])])):y("",!0),!v.value&&Y.value?(u(),d("div",sn,[...e[62]||(e[62]=[t("span",{class:"h-3 w-3 rounded-full border-2 border-gray-300 border-t-indigo-600 animate-spin"},null,-1),t("span",null,"Initializing space sync...",-1)])])):y("",!0)])])])):y("",!0),Ae.value&&$.value?(u(),d("div",an,[t("div",on,[t("div",{class:"flex items-center justify-between border-b px-4 py-3"},[e[63]||(e[63]=t("h4",{class:"text-md font-semibold"},"ClickUp Sync Summary",-1)),t("button",{onClick:$t,class:"rounded-md bg-gray-100 px-2 py-1 text-xs hover:bg-gray-200"},"Close")]),t("div",nn,[t("div",ln,[e[65]||(e[65]=t("p",null,"Latest sync completed successfully.",-1)),$.value.sources.length?(u(),d("p",rn,[e[64]||(e[64]=fe(" Sources: ",-1)),t("span",dn,r($.value.sources.join(", ")),1)])):y("",!0)]),t("div",un,[t("div",cn,[e[66]||(e[66]=t("div",{class:"text-xs uppercase tracking-wide text-indigo-600"},"Total Processed",-1)),t("div",mn,r($.value.summary.total),1)]),t("div",pn,[e[67]||(e[67]=t("div",{class:"text-xs uppercase tracking-wide text-green-600"},"Created",-1)),t("div",vn,r($.value.summary.created),1)]),t("div",gn,[e[68]||(e[68]=t("div",{class:"text-xs uppercase tracking-wide text-blue-600"},"Updated",-1)),t("div",xn,r($.value.summary.updated),1)]),t("div",yn,[e[69]||(e[69]=t("div",{class:"text-xs uppercase tracking-wide text-gray-600"},"No Changes",-1)),t("div",fn,r($.value.summary.unchanged),1)]),t("div",kn,[e[70]||(e[70]=t("div",{class:"text-xs uppercase tracking-wide text-amber-600"},"Skipped",-1)),t("div",hn,r($.value.summary.skipped),1)])]),$.value.created.length?(u(),d("div",bn,[e[71]||(e[71]=t("h5",{class:"text-sm font-semibold text-gray-900"},"New tasks",-1)),t("ul",_n,[(u(!0),d(F,null,V($.value.created,o=>(u(),d("li",{key:"created-"+o.id,class:"rounded-md border border-green-200 bg-green-50 px-3 py-2"},[t("div",wn,[t("span",Sn,r(o.title),1),t("span",Tn,r(xt(o.due_date)),1)]),t("div",Dn,[o.status?(u(),d("span",Mn,"Status: "+r(o.status),1)):y("",!0),o.priority?(u(),d("span",Cn,"Priority: "+r(o.priority),1)):y("",!0)])]))),128))])])):y("",!0),$.value.updated.length?(u(),d("div",Nn,[e[72]||(e[72]=t("h5",{class:"text-sm font-semibold text-gray-900"},"Updated tasks",-1)),t("ul",In,[(u(!0),d(F,null,V($.value.updated,o=>(u(),d("li",{key:"updated-"+o.id,class:"rounded-md border border-blue-200 bg-blue-50 px-3 py-2"},[t("div",$n,[t("span",Ln,r(o.title),1),t("span",En,r(xt(o.due_date)),1)]),t("div",Un,[o.status?(u(),d("span",Pn,"Status: "+r(o.status),1)):y("",!0),o.priority?(u(),d("span",Bn,"Priority: "+r(o.priority),1)):y("",!0)])]))),128))])])):y("",!0),$.value.skipped.length?(u(),d("div",jn,[e[73]||(e[73]=t("h5",{class:"text-sm font-semibold text-gray-900"},"Skipped items",-1)),t("ul",On,[(u(!0),d(F,null,V($.value.skipped,o=>(u(),d("li",{key:"skipped-"+o.id,class:"rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-900"},[t("div",Hn,[t("span",Wn,r(o.id),1),t("span",Fn,r(o.reason),1)])]))),128))])])):y("",!0)])])])):y("",!0),Se.value?(u(),d("div",Rn,[t("div",zn,[t("div",Vn,[e[74]||(e[74]=t("h4",{class:"text-md font-semibold"},"Task Not Synced",-1)),t("button",{onClick:e[24]||(e[24]=o=>{Se.value=!1,le.value=null}),class:"rounded-md bg-gray-100 px-2 py-1 text-xs hover:bg-gray-200"},"Close")]),t("div",qn,[t("div",An,[t("p",Yn,[e[75]||(e[75]=fe(" The task with ClickUp ID ",-1)),t("strong",null,r(le.value),1),e[76]||(e[76]=fe(" has not been synced to your task list. ",-1))]),e[77]||(e[77]=t("p",{class:"text-sm text-gray-600"}," Would you like to sync this task from ClickUp now? ",-1))]),t("div",Zn,[t("button",{onClick:e[25]||(e[25]=o=>{Se.value=!1,le.value=null}),class:"rounded-md bg-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-300",disabled:ge.value}," Cancel ",8,Gn),t("button",{onClick:jt,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700 disabled:opacity-60 disabled:cursor-not-allowed flex items-center gap-2",disabled:ge.value},[ge.value?(u(),d("span",Jn)):y("",!0),t("span",null,r(ge.value?"Syncing...":"Sync Task"),1)],8,Kn)])])])])):y("",!0),Ie.value?(u(),d("div",Qn,[t("div",Xn,[t("div",el,[e[78]||(e[78]=t("h4",{class:"text-md font-semibold"},"Task Details",-1)),t("button",{onClick:e[26]||(e[26]=o=>Ie.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs hover:bg-gray-200"},"Close")]),O.value?(u(),d("div",tl,[t("div",sl,[t("h2",al,r((w=O.value.task)==null?void 0:w.title),1),t("div",ol,[(h=O.value.task)!=null&&h.status?(u(),d("span",nl,[e[79]||(e[79]=t("span",{class:"text-gray-600"},"Status:",-1)),ft(O.value.task.status)?(u(),d("span",{key:0,class:B(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold ml-1",yt(O.value.task.status)])},r(O.value.task.status),3)):(u(),d("span",ll,r(O.value.task.status),1))])):y("",!0),(C=O.value.clickup)!=null&&C.url?(u(),d("span",il,[t("a",{href:O.value.clickup.url,target:"_blank",class:"text-indigo-600 hover:underline text-sm font-medium"},"Open in ClickUp â†’",8,rl)])):y("",!0)])]),(N=O.value.clickup)!=null&&N.text_content?(u(),d("div",dl,[t("div",{innerHTML:ns(O.value.clickup.text_content),class:"prose prose-sm max-w-none"},null,8,ul)])):(u(),d("div",cl," No additional details available. "))])):y("",!0)])])):y("",!0)])]}),_:1})],64))}});export{xl as default};
