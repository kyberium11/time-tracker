import{d as fe,r as g,c as M,o as he,A as ke,B as be,a as r,b as Ft,u as _e,h as we,e as Rt,f as e,i as f,g as i,n as A,t as l,j as vt,l as Z,F as L,k as P,v as ft,m as ht}from"./app-ByAPEGtr.js";import{_ as Te}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-BiJIE_uS.js";import{a as w}from"./api-NbKR6KON.js";const Se={class:"py-12"},De={class:"mx-auto max-w-[95%] sm:px-6 lg:px-8"},Me={key:0,class:"border-b border-gray-200 mb-6"},Ce={class:"-mb-px flex space-x-8"},Ne={key:1},$e={key:0,class:"mb-6 grid gap-4 md:grid-cols-3"},Ee={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Le={class:"px-4 py-5 sm:p-6"},Be={class:"mt-2 text-3xl font-bold text-gray-900"},Ie={class:"text-xs text-gray-500"},Pe={key:0,class:"mt-2"},Ue={class:"text-sm text-gray-600"},je={class:"font-semibold"},We={class:"mt-4 flex flex-wrap gap-2"},He=["disabled"],Ae=["disabled"],Oe={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Ve={class:"px-4 py-5 sm:p-6"},Fe={key:0,class:"mt-2"},Re={class:"text-2xl font-bold text-gray-900 mt-1"},ze={key:0,class:"text-sm font-normal text-gray-500"},qe={class:"mt-3"},Ze=["disabled"],Ge={key:1,class:"mt-2"},Je={class:"flex items-center gap-2 w-full"},Ke=["value"],Qe=["disabled"],Xe={key:0,class:"text-sm text-gray-500 mt-2"},Ye={class:"overflow-hidden bg-white shadow sm:rounded-lg"},ts={class:"px-4 py-5 sm:p-6"},es={class:"mt-2 text-3xl font-bold text-gray-900"},ss={key:1,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},as={class:"px-4 py-5 sm:p-6"},os={class:"flex items-center justify-between mb-4"},ns=["disabled"],ls={class:"overflow-x-auto"},rs={class:"min-w-full divide-y divide-gray-200"},is={class:"divide-y divide-gray-200 bg-white"},ds={class:"px-4 py-4 text-sm text-gray-900"},us={class:"px-4 py-4 text-sm text-gray-500"},cs={class:"px-4 py-4 text-sm text-gray-500"},ms={class:"px-4 py-4 text-sm text-gray-500"},ps={key:0},xs={key:2,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},gs={class:"px-4 py-5 sm:p-6"},ys={class:"flex items-center justify-between mb-3"},vs={class:"flex items-center gap-2"},fs=["disabled"],hs={key:0,class:"h-3 w-3 rounded-full border-2 border-white border-t-transparent animate-spin"},ks=["value"],bs={class:"overflow-x-auto"},_s={class:"min-w-full divide-y divide-gray-200"},ws={class:"divide-y divide-gray-200 bg-white"},Ts={class:"whitespace-nowrap px-6 py-4 text-sm text-indigo-600"},Ss=["onClick"],Ds={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},Ms={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},Cs={class:"whitespace-nowrap px-6 py-4 text-sm"},Ns={key:1,class:"text-sm text-gray-700"},$s={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},Es={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Ls={class:"whitespace-nowrap px-6 py-4 text-sm"},Bs={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},Is={class:"flex items-center space-x-2"},Ps=["onClick","disabled","aria-label"],Us={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},js={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},Ws=["value","onChange"],Hs=["value"],As={key:0,value:"complete"},Os={key:1,value:"done"},Vs={class:"flex items-center justify-between px-6 py-3 text-sm text-gray-600"},Fs={class:"space-x-2"},Rs=["disabled"],zs=["disabled"],qs={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Zs={class:"px-4 py-5 sm:p-6"},Gs={key:0,class:"text-center py-8 text-gray-500"},Js={key:1,class:"overflow-x-auto"},Ks={class:"min-w-full divide-y divide-gray-200"},Qs={class:"divide-y divide-gray-200"},Xs={class:"px-4 py-4 text-sm text-gray-900"},Ys={class:"px-4 py-4 text-sm text-gray-500"},ta={class:"px-4 py-4 text-sm text-gray-500"},ea={class:"px-4 py-4 text-sm text-gray-900 font-semibold"},sa={class:"px-4 py-4 text-sm text-gray-500"},aa={class:"px-4 py-4 text-sm text-gray-500"},oa={key:2,class:"space-y-6"},na={class:"bg-white shadow rounded-lg p-4"},la={class:"grid gap-4 sm:grid-cols-2"},ra={class:"bg-white shadow rounded-lg p-5"},ia={class:"grid gap-4 sm:grid-cols-3 lg:grid-cols-5 text-sm"},da={class:"font-semibold"},ua={class:"font-semibold"},ca={class:"font-semibold"},ma={class:"font-semibold"},pa={class:"bg-white shadow rounded-lg"},xa={class:"overflow-x-auto"},ga={class:"min-w-full divide-y divide-gray-200"},ya={class:"divide-y divide-gray-200"},va={class:"px-4 py-4 text-sm text-gray-900"},fa={class:"px-4 py-4 text-sm text-gray-500"},ha={class:"px-4 py-4 text-sm text-gray-500"},ka={class:"px-4 py-4 text-sm text-gray-900 font-semibold"},ba={class:"px-4 py-4 text-sm text-gray-500"},_a={class:"px-4 py-4 text-sm text-gray-500"},wa={key:0},Ta={key:0,class:"text-center py-8"},Sa={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Da={class:"w-full max-w-2xl rounded-lg bg-white shadow-lg"},Ma={class:"flex items-center justify-between border-b px-4 py-3"},Ca={class:"p-4"},Na={key:0,class:"text-gray-500 text-sm"},$a={key:1,class:"overflow-x-auto"},Ea={class:"min-w-full divide-y divide-gray-200"},La={class:"divide-y divide-gray-200 bg-white"},Ba={class:"px-4 py-2 text-sm text-gray-900"},Ia={class:"px-4 py-2 text-sm text-gray-700"},Pa={class:"px-4 py-2 text-sm text-gray-700"},Ua={class:"px-4 py-2 text-sm text-gray-700 font-semibold"},ja={class:"px-4 py-2 text-sm text-gray-700"},Wa={class:"px-4 py-2 text-sm text-gray-700"},Ha={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Aa={class:"w-full max-w-3xl rounded-lg bg-white shadow-lg"},Oa={class:"p-5 text-sm text-gray-700 space-y-5"},Va={class:"space-y-1"},Fa={key:0,class:"text-xs text-gray-500"},Ra={class:"font-medium text-gray-600"},za={class:"grid gap-3 sm:grid-cols-2 lg:grid-cols-5"},qa={class:"rounded-md bg-indigo-50 px-4 py-3"},Za={class:"text-xl font-semibold text-indigo-900"},Ga={class:"rounded-md bg-green-50 px-4 py-3"},Ja={class:"text-xl font-semibold text-green-900"},Ka={class:"rounded-md bg-blue-50 px-4 py-3"},Qa={class:"text-xl font-semibold text-blue-900"},Xa={class:"rounded-md bg-gray-100 px-4 py-3"},Ya={class:"text-xl font-semibold text-gray-900"},to={class:"rounded-md bg-amber-50 px-4 py-3"},eo={class:"text-xl font-semibold text-amber-900"},so={key:0,class:"space-y-2"},ao={class:"max-h-48 overflow-y-auto space-y-2 pr-1"},oo={class:"flex items-start justify-between gap-3"},no={class:"font-medium text-green-900 leading-tight"},lo={class:"text-xs text-green-700 whitespace-nowrap"},ro={class:"mt-1 flex flex-wrap gap-3 text-xs text-green-800"},io={key:0},uo={key:1},co={key:1,class:"space-y-2"},mo={class:"max-h-48 overflow-y-auto space-y-2 pr-1"},po={class:"flex items-start justify-between gap-3"},xo={class:"font-medium text-blue-900 leading-tight"},go={class:"text-xs text-blue-700 whitespace-nowrap"},yo={class:"mt-1 flex flex-wrap gap-3 text-xs text-blue-800"},vo={key:0},fo={key:1},ho={key:2,class:"space-y-2"},ko={class:"max-h-40 overflow-y-auto space-y-1 pr-1"},bo={class:"flex items-start justify-between gap-3"},_o={class:"font-medium leading-tight"},wo={class:"text-amber-700"},To={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},So={class:"w-full max-w-3xl max-h-[90vh] rounded-lg bg-white shadow-lg flex flex-col"},Do={class:"flex items-center justify-between border-b px-4 py-3 flex-shrink-0"},Mo={key:0,class:"p-6 text-sm text-gray-700 overflow-y-auto flex-1"},Co={class:"mb-4 pb-4 border-b"},No={class:"font-semibold text-lg text-gray-900 mb-2"},$o={class:"flex items-center gap-3 flex-wrap"},Eo={key:0,class:"text-sm"},Lo={key:1,class:"ml-1 text-gray-700"},Bo={key:1},Io=["href"],Po={key:0,class:"task-content"},Uo=["innerHTML"],jo={key:1,class:"text-gray-500 italic"},Vo=fe({__name:"Dashboard",setup(Wo){const y=g(null),T=g(!1),J=g(""),K=g(new Date),U=g("employee"),O=g([]),et=g(null),_=g(null),kt=g(!1),Nt=g([]),bt=g(0),V=g([]),$=g(null),lt=g(!1),_t=g(!1),st=g(!1),S=g(null),Q=g("dashboard"),X=g(""),$t=g([]),rt=g(!1),B=g({workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}),N=g([]),wt=g(""),G=g(1),at=g(10),it=g("all"),dt=M(()=>{const s=new Set;return(O.value||[]).forEach(t=>{const o=(t.status||"").toString().trim();o&&s.add(o)}),Array.from(s).sort((t,o)=>t.localeCompare(o))}),ut=g("all"),ct=g(""),mt=g(""),Tt=M(()=>{const s=wt.value.trim().toLowerCase();let t=O.value;if(it.value!=="all"){const o=it.value.toLowerCase();t=t.filter(n=>(n.status||"").toLowerCase()===o)}if(ut.value!=="all"){const o=ut.value;t=t.filter(n=>(n.priority||"none").toLowerCase()===o)}if(ct.value){const o=new Date(ct.value).getTime();t=t.filter(n=>n.due_date?new Date(n.due_date).getTime()>=o:!1)}if(mt.value){const o=new Date(mt.value).getTime();t=t.filter(n=>n.due_date?new Date(n.due_date).getTime()<=o:!1)}return s?t.filter(o=>(o.title||"").toLowerCase().includes(s)):t}),pt=M(()=>Math.max(1,Math.ceil(Tt.value.length/at.value))),zt=M(()=>{const t=(Math.min(G.value,pt.value)-1)*at.value;return Tt.value.slice(t,t+at.value)}),F=s=>{const t=Math.max(1,Math.min(s,pt.value));G.value=t},xt=g([]),gt=g(!1),St=async()=>{var s;gt.value=!0;try{const t=await w.get("/admin/analytics/activity-logs",{params:{limit:100}});xt.value=((s=t.data)==null?void 0:s.data)||[]}catch{xt.value=[]}finally{gt.value=!1}};let Dt=null;const W=M(()=>{var s,t;return!!((s=y.value)!=null&&s.clock_in)&&!((t=y.value)!=null&&t.clock_out)}),R=M(()=>{var s,t;return!!((s=y.value)!=null&&s.break_start)&&!((t=y.value)!=null&&t.break_end)}),qt=M(()=>{var s,t;return((s=y.value)==null?void 0:s.lunch_start)&&!((t=y.value)!=null&&t.lunch_end)}),yt=M(()=>{const s=[];if(!y.value)return s;const t=y.value;if(t.clock_in&&t.clock_out){const o=Math.max(0,Math.floor((new Date(t.clock_out).getTime()-new Date(t.clock_in).getTime())/1e3)),n=t.break_start?new Date(t.break_start):null,d=t.break_end?new Date(t.break_end):null;let u=0;n&&d&&(u=Math.max(0,Math.floor((d.getTime()-n.getTime())/1e3)));const v=Math.max(0,o-u);s.push({name:"Work Hours",start:t.clock_in,end:t.clock_out,durationSeconds:v,breakDurationSeconds:u,notes:"-"})}if(t.break_start&&t.break_end){const o=Math.max(0,Math.floor((new Date(t.break_end).getTime()-new Date(t.break_start).getTime())/1e3));s.push({name:"Break",start:t.break_start,end:t.break_end,durationSeconds:o,breakDurationSeconds:o,notes:"-"})}return V.value.forEach(o=>{var n;if(o.clock_in&&o.clock_out){const d=Math.max(0,Math.floor((new Date(o.clock_out).getTime()-new Date(o.clock_in).getTime())/1e3));s.push({name:((n=o.task)==null?void 0:n.title)||`Task #${o.task_id}`,start:o.clock_in,end:o.clock_out,durationSeconds:d,breakDurationSeconds:0,notes:"-"})}}),s.sort((o,n)=>{const d=new Date(o.start).getTime(),u=new Date(n.start).getTime();return(isNaN(u)?0:u)-(isNaN(d)?0:d)}),s}),Et=s=>{if(W.value)return s.preventDefault(),s.returnValue="",""};he(()=>{const s=new Date;X.value=s.toISOString().split("T")[0],ot(),Gt(),z(),Ct(),Y(),Dt=window.setInterval(()=>{K.value=new Date},1e3),window.addEventListener("beforeunload",Et)}),ke(()=>{Dt&&window.clearInterval(Dt),window.removeEventListener("beforeunload",Et)});const ot=async()=>{try{const s=await w.get("/time-entries/current");y.value=s.data,de()}catch(s){y.value=null,J.value="No entry today",console.error("Error fetching current entry:",s)}},Zt=be(),Gt=async()=>{var t,o;const s=(t=Zt.props.auth)==null?void 0:t.user;if(s!=null&&s.role){const n=s.role;["admin","manager","employee","developer"].includes(n)&&(U.value=n)}else try{const d=(((o=(await w.get("/admin/users")).data)==null?void 0:o.data)||[]).find(u=>(u==null?void 0:u.id)&&(u==null?void 0:u.email));if(d!=null&&d.role){const u=d.role;["admin","manager","employee","developer"].includes(u)&&(U.value=u)}}catch{}U.value==="admin"&&(await St(),setInterval(()=>{St()},5e3))},z=async()=>{try{const s=await w.get("/my/tasks");O.value=s.data}catch{}},Jt=()=>{_t.value=!1,S.value=null},Kt=async()=>{var s,t,o,n,d,u,v;st.value=!0;try{const m=await w.post("/my/clickup/sync-tasks");await z();const p=((s=m.data)==null?void 0:s.summary)??{};S.value={summary:{total:p.total??0,created:p.created??0,updated:p.updated??0,unchanged:p.unchanged??0,skipped:p.skipped??0},created:((t=m.data)==null?void 0:t.created)??[],updated:((o=m.data)==null?void 0:o.updated)??[],skipped:((n=m.data)==null?void 0:n.skipped)??[],sources:((d=m.data)==null?void 0:d.sources)??[]},_t.value=!0}catch(m){alert(((v=(u=m==null?void 0:m.response)==null?void 0:u.data)==null?void 0:v.error)||"Failed to sync tasks from ClickUp")}finally{st.value=!1}},Lt=async()=>{try{await ue()}catch{}},Qt=async()=>{try{await ce()}catch{}},Xt=async()=>{try{await me()}catch{}},Mt=async()=>{try{await pe()}catch{}},Ct=async()=>{try{const s=await w.get("/tasks/today-entries");V.value=s.data||[];const t=(V.value||[]).find(o=>o.clock_in&&!o.clock_out);_.value=t?t.task_id:null}catch{V.value=[]}},Bt=async s=>{try{const t=await w.get(`/tasks/${s}/sync`);$.value=t.data,lt.value=!0}catch{lt.value=!1}},Yt=async()=>{if(R.value){await Mt();return}W.value?await Qt():await Lt()},te=async()=>{if(_.value){alert("Pause or stop the running task first.");return}R.value?await Mt():(W.value||await Lt(),await Xt())},H=s=>s<10?`0${s}`:`${s}`,ee=M(()=>{var s;return W.value&&((s=y.value)!=null&&s.clock_in)?new Date(y.value.clock_in):null}),se=M(()=>{var s;return R.value&&((s=y.value)!=null&&s.break_start)?new Date(y.value.break_start):null}),ae=M(()=>{const s=V.value.find(t=>t.clock_in&&!t.clock_out);return s?new Date(s.clock_in):null}),oe=M(()=>{const s=ee.value;if(!s)return"00:00:00";const t=K.value.getTime()-s.getTime(),o=Math.max(0,Math.floor(t/1e3)),n=Math.floor(o/3600),d=Math.floor(o%3600/60),u=o%60;return`${H(n)}:${H(d)}:${H(u)}`}),ne=M(()=>{const s=se.value;if(!s)return"00:00:00";const t=K.value.getTime()-s.getTime(),o=Math.max(0,Math.floor(t/1e3)),n=Math.floor(o/3600),d=Math.floor(o%3600/60),u=o%60;return`${H(n)}:${H(d)}:${H(u)}`}),le=M(()=>{const s=ae.value;if(!s)return"00:00:00";const t=K.value.getTime()-s.getTime(),o=Math.max(0,Math.floor(t/1e3)),n=Math.floor(o/3600),d=Math.floor(o%3600/60),u=o%60;return`${H(n)}:${H(d)}:${H(u)}`}),re=M(()=>{var o,n;let s=bt.value||0;if(W.value&&((o=y.value)!=null&&o.clock_in)&&!((n=y.value)!=null&&n.clock_out)){const d=new Date(y.value.clock_in),u=K.value,v=Math.max(0,Math.floor((u.getTime()-d.getTime())/1e3));let m=0;if(y.value.break_start)if(y.value.break_end){const x=new Date(y.value.break_start),c=new Date(y.value.break_end);m=Math.max(0,Math.floor((c.getTime()-x.getTime())/1e3))}else{const x=new Date(y.value.break_start);m=Math.max(0,Math.floor((u.getTime()-x.getTime())/1e3))}let p=0;if(y.value.lunch_start)if(y.value.lunch_end){const x=new Date(y.value.lunch_start),c=new Date(y.value.lunch_end);p=Math.max(0,Math.floor((c.getTime()-x.getTime())/1e3))}else{const x=new Date(y.value.lunch_start);p=Math.max(0,Math.floor((u.getTime()-x.getTime())/1e3))}const a=Math.max(0,v-m-p);s+=a}return V.value&&V.value.length>0&&V.value.forEach(d=>{if(d.clock_in&&!d.clock_out){const u=new Date(d.clock_in),v=K.value,m=Math.max(0,Math.floor((v.getTime()-u.getTime())/1e3));s+=m}}),(s/3600).toFixed(2)}),ie=async()=>{await Y(),kt.value=!0},Y=async()=>{var s;try{const t=new Date().toISOString().split("T")[0],n=((s=(await w.get("/my/time-entries",{params:{start_date:t,end_date:t}})).data)==null?void 0:s.entries)||[],d=[];let u=0,v=0;const m=new Date;n.forEach(p=>{const a=p.clock_in_formatted||p.clock_in,x=p.clock_out_formatted||p.clock_out,c=q(p.clock_in),h=q(p.clock_out);if(p.is_break||p.entry_type==="break"){if(!c)return;const k=!!h;let I=0;k&&h?(I=Math.max(0,Math.floor((h.getTime()-c.getTime())/1e3)),v+=I):I=Math.max(0,Math.floor((m.getTime()-c.getTime())/1e3)),d.push({name:"Break",start:a,end:k?x:null,durationSeconds:I,breakDurationSeconds:I,notes:k?"-":"In progress"});return}if(!c)return;const E=p.task&&(p.task.title||p.task.name),b=!!h;if(!E)if(b&&h){const k=Math.max(0,Math.floor((h.getTime()-c.getTime())/1e3)),I=q(p.lunch_start),nt=q(p.lunch_end);let C=0;I&&nt&&(C=Math.max(0,Math.floor((nt.getTime()-I.getTime())/1e3)));const D=Math.max(0,k-C);u+=D,d.push({name:"Work Hours",start:a,end:x,durationSeconds:D,breakDurationSeconds:0,notes:"-"})}else{const k=Math.max(0,Math.floor((m.getTime()-c.getTime())/1e3));d.push({name:"Work Hours",start:a,end:null,durationSeconds:k,breakDurationSeconds:0,notes:"In progress"})}if(E)if(b&&h){const k=Math.max(0,Math.floor((h.getTime()-c.getTime())/1e3));d.push({name:p.task.title||p.task.name,start:a,end:x,durationSeconds:k,breakDurationSeconds:0,notes:"-"})}else{const k=Math.max(0,Math.floor((m.getTime()-c.getTime())/1e3));d.push({name:p.task.title||p.task.name,start:a,end:null,durationSeconds:k,breakDurationSeconds:0,notes:"In progress"})}}),d.sort((p,a)=>{const x=new Date(p.start).getTime(),c=new Date(a.start).getTime();return(isNaN(c)?0:c)-(isNaN(x)?0:x)}),Nt.value=d,bt.value=u}catch{Nt.value=[],bt.value=0}},de=()=>{!y.value||!y.value.clock_in?J.value="Not clocked in":y.value.clock_out?J.value="Clocked out":qt.value?J.value="On lunch":R.value?J.value="On break":J.value="Clocked in"},ue=async s=>{var t,o;T.value=!0;try{const n={};await w.post("/time-entries/clock-in",n),await ot(),await z(),await Y()}catch(n){alert(((o=(t=n.response)==null?void 0:t.data)==null?void 0:o.message)||"Error clocking in")}finally{T.value=!1}},ce=async()=>{var s,t;T.value=!0;try{if(_.value){alert("Pause or stop the running task first."),T.value=!1;return}await w.post("/time-entries/clock-out"),await ot(),await z(),await Y()}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error clocking out")}finally{T.value=!1}},me=async()=>{var s,t;T.value=!0;try{await w.post("/time-entries/break-start"),await ot(),await z(),await Y()}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error starting break")}finally{T.value=!1}},pe=async()=>{var s,t;T.value=!0;try{await w.post("/time-entries/break-end"),await ot(),await z(),await Y()}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error ending break")}finally{T.value=!1}},It=async s=>{var t,o;if(!W.value){alert("Please Time In first before starting a task.");return}if(R.value&&await Mt(),_.value&&_.value!==s)try{await w.post("/tasks/stop")}catch{}try{await w.post("/tasks/start",{task_id:s}),_.value=s,await Ct()}catch(n){alert(((o=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:o.message)||"Failed to start task")}},Pt=async()=>{try{await w.post("/tasks/stop")}catch{}_.value=null,await Ct()},xe=async(s,t)=>{var n,d;if(!t)return;if(!confirm(`Are you sure you want to set this task to "${t}"?`)){await z();return}T.value=!0;try{await w.post(`/tasks/${s}/status`,{status:t}),await z()}catch(u){alert(((d=(n=u==null?void 0:u.response)==null?void 0:n.data)==null?void 0:d.message)||"Failed to update task status")}finally{T.value=!1}},Ut=async()=>{var s,t;if(X.value){rt.value=!0;try{const o=await w.get("/my/time-entries",{params:{start_date:X.value,end_date:X.value}}),n=((s=o.data)==null?void 0:s.entries)||[];$t.value=n,N.value=[];let d=0,u=0,v=null,m=null;const p=new Date;n.forEach(c=>{const h=c.clock_in_formatted||c.clock_in,E=c.clock_out_formatted||c.clock_out,b=q(c.clock_in),k=q(c.clock_out);if(b&&(!v||b<v)&&(v=b,m=h),c.is_break||c.entry_type==="break"){if(!b)return;const C=!!k;let D=0;C&&k?(D=Math.max(0,Math.floor((k.getTime()-b.getTime())/1e3)),u+=D):D=Math.max(0,Math.floor((p.getTime()-b.getTime())/1e3)),N.value.push({name:"Break",start:h,end:C?E:null,durationSeconds:D,breakDurationSeconds:D,notes:C?"-":"In progress"});return}if(!b)return;const I=c.task&&(c.task.title||c.task.name),nt=!!k;if(!I)if(nt&&k){const C=Math.max(0,Math.floor((k.getTime()-b.getTime())/1e3));d+=C;const D=q(c.lunch_start),Ot=q(c.lunch_end);let Vt=0;D&&Ot&&(Vt=Math.max(0,Math.floor((Ot.getTime()-D.getTime())/1e3)));const ve=Math.max(0,C-Vt);N.value.push({name:"Work Hours",start:h,end:E,durationSeconds:ve,breakDurationSeconds:0,notes:"-"})}else{const C=Math.max(0,Math.floor((p.getTime()-b.getTime())/1e3));N.value.push({name:"Work Hours",start:h,end:null,durationSeconds:C,breakDurationSeconds:0,notes:"In progress"})}if(I){const C=c.task.title||c.task.name;if(nt&&k){const D=Math.max(0,Math.floor((k.getTime()-b.getTime())/1e3));N.value.push({name:C,start:h,end:E,durationSeconds:D,breakDurationSeconds:0,notes:"-"})}else{const D=Math.max(0,Math.floor((p.getTime()-b.getTime())/1e3));N.value.push({name:C,start:h,end:null,durationSeconds:D,breakDurationSeconds:0,notes:"In progress"})}}}),N.value.sort((c,h)=>{const E=new Date(c.start).getTime(),b=new Date(h.start).getTime();return(isNaN(b)?0:b)-(isNaN(E)?0:E)});const a=N.value.filter(c=>c.name==="Work Hours").reduce((c,h)=>c+(h.durationSeconds||0),0),x=N.value.filter(c=>c.name==="Break").reduce((c,h)=>c+(h.durationSeconds||0),0);if((t=o.data)!=null&&t.daily_totals)B.value={workSeconds:a,breakSeconds:x,lunchSeconds:o.data.daily_totals.lunch_seconds||0,tasksCount:o.data.daily_totals.tasks_count||0,status:o.data.daily_totals.status||"No Entry",overtimeSeconds:o.data.daily_totals.overtime_seconds||0};else{const h=Math.max(0,a-28800);let E="No Entry";if(v){const b=(v.getUTCHours()+8)%24,k=v.getUTCMinutes();E=b<8||b===8&&k<=30?"Perfect":"Late"}B.value={workSeconds:a,breakSeconds:x,lunchSeconds:0,tasksCount:N.value.length,status:E,overtimeSeconds:h}}}catch(o){console.error("Error loading time entries",o),$t.value=[],N.value=[],B.value={workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}}finally{rt.value=!1}}},q=s=>{if(!s)return null;const t=s.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?/);if(t){const d=Number(t[1]),u=Number(t[2])-1,v=Number(t[3]),m=Number(t[4]),p=Number(t[5]),a=Number(t[6]||"0");return new Date(Date.UTC(d,u,v,m-8,p,a))}const o=s.includes("T")?s:s.replace(" ","T"),n=new Date(o);return isNaN(n.getTime())?null:n},tt=s=>{if(!s)return"--";try{const o=new Date(s);if(!isNaN(o.getTime()))return o.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Manila"})}catch{}const t=s.match(/\b(\d{1,2}):(\d{2})(?::(\d{2}))?/);if(t){let o=parseInt(t[1],10);const n=t[2],d=o>=12?"PM":"AM";return o=o%12,o===0&&(o=12),`${o}:${n} ${d}`}return"--"},j=s=>{const t=typeof s=="number"&&isFinite(s)?Math.max(0,Math.floor(s)):0,o=Math.floor(t/3600),n=Math.floor(t%3600/60),d=t%60,u=v=>v<10?`0${v}`:`${v}`;return`${u(o)}:${u(n)}:${u(d)}`},jt=s=>{if(!s)return"--";const t=new Date(s);return isNaN(t.getTime())?s:t.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})},Wt=s=>{if(!s||s===0)return"--";const t=Math.floor(s/1e3);return j(t)},Ht=s=>{if(!s)return"";const t=s.toLowerCase().trim();return t==="to do"||t==="todo"?"text-gray-700":t.includes("complete")||t.includes("done")||t.includes("finished")?"bg-green-100 text-green-800":t.includes("progress")||t.includes("doing")||t.includes("in progress")||t.includes("working")?"bg-blue-100 text-blue-800":t.includes("pending")||t.includes("waiting")?"bg-yellow-100 text-yellow-800":t.includes("blocked")||t.includes("stuck")?"bg-red-100 text-red-800":t.includes("review")||t.includes("testing")?"bg-purple-100 text-purple-800":t.includes("cancel")||t.includes("closed")?"bg-gray-100 text-gray-800":"bg-indigo-100 text-indigo-800"},ge=s=>{if(!s)return"bg-gray-100 text-gray-800";const t=s.toLowerCase().trim();return t==="urgent"||t==="critical"?"bg-red-100 text-red-800":t==="high"?"bg-orange-100 text-orange-800":t==="normal"||t==="medium"?"bg-yellow-100 text-yellow-800":t==="low"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"},At=s=>{if(!s)return!1;const t=s.toLowerCase().trim();return t!=="to do"&&t!=="todo"},ye=s=>{if(!s)return"";const t=s.split(`
`),o=[];let n=!1,d=[];for(let v=0;v<t.length;v++){const m=t[v].trim();if(!m){n&&d.length>0&&(o.push(`<ul class="list-disc ml-6 mb-3 space-y-1">${d.join("")}</ul>`),d=[],n=!1),o.length>0&&!o[o.length-1].startsWith("<")&&o.push('</p><p class="mb-2">');continue}if(m.match(/^#{1,3}\s+/)){n&&d.length>0&&(o.push(`<ul class="list-disc ml-6 mb-3 space-y-1">${d.join("")}</ul>`),d=[],n=!1),m.startsWith("###")?o.push(`<h3 class="font-semibold text-gray-900 mt-4 mb-2 text-base">${m.replace(/^###\s+/,"")}</h3>`):m.startsWith("##")?o.push(`<h2 class="font-bold text-gray-900 mt-5 mb-3 text-lg">${m.replace(/^##\s+/,"")}</h2>`):m.startsWith("#")&&o.push(`<h1 class="font-bold text-gray-900 mt-6 mb-4 text-xl">${m.replace(/^#\s+/,"")}</h1>`);continue}if(m.match(/^[\-\*â€¢]\s+/)){n||(n=!0);const a=m.replace(/^[\-\*â€¢]\s+/,"").trim();d.push(`<li class="mb-1">${a}</li>`);continue}if(m.match(/^\d+\.\s+/)){n||(n=!0);const a=m.replace(/^\d+\.\s+/,"").trim();d.push(`<li class="mb-1 list-decimal">${a}</li>`);continue}n&&d.length>0&&(o.push(`<ul class="list-disc ml-6 mb-3 space-y-1">${d.join("")}</ul>`),d=[],n=!1);let p=m.replace(/\*\*(.+?)\*\*/g,'<strong class="font-semibold">$1</strong>').replace(/\*(.+?)\*/g,'<em class="italic">$1</em>');o.push(p)}n&&d.length>0&&o.push(`<ul class="list-disc ml-6 mb-3 space-y-1">${d.join("")}</ul>`);let u=o.join("<br>");return u.startsWith("<")||(u='<p class="mb-2">'+u),u.endsWith(">")||(u=u+"</p>"),u};return(s,t)=>(i(),r(L,null,[Ft(_e(we),{title:"Dashboard"}),Ft(Te,null,{header:Rt(()=>[...t[23]||(t[23]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Time Tracker Dashboard ",-1)])]),default:Rt(()=>{var o,n,d,u,v,m,p;return[e("div",Se,[e("div",De,[U.value!=="admin"?(i(),r("div",Me,[e("nav",Ce,[e("button",{onClick:t[0]||(t[0]=a=>Q.value="dashboard"),class:A(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",Q.value==="dashboard"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Dashboard ",2),e("button",{onClick:t[1]||(t[1]=a=>{Q.value="time-entries",Ut()}),class:A(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",Q.value==="time-entries"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Time Entries ",2)])])):f("",!0),Q.value==="dashboard"||U.value==="admin"||U.value==="developer"?(i(),r("div",Ne,[U.value!=="admin"?(i(),r("div",$e,[e("div",Ee,[e("div",Le,[t[25]||(t[25]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Work Day Timer",-1)),e("p",Be,l(oe.value),1),e("p",Ie,l(W.value?"Working":"Idle"),1),R.value?(i(),r("div",Pe,[e("p",Ue,[t[24]||(t[24]=vt("Break Timer: ",-1)),e("span",je,l(ne.value),1)])])):f("",!0),e("div",We,[e("button",{onClick:Yt,disabled:T.value,class:A(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",W.value?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"])},l(W.value?"Time Out":"Time In"),11,He),e("button",{onClick:te,disabled:T.value,class:A(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",R.value?"bg-orange-600 hover:bg-orange-700":"bg-yellow-600 hover:bg-yellow-700"])},l(R.value?"Break Out":"Break In"),11,Ae)])])]),e("div",Oe,[e("div",Ve,[t[27]||(t[27]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Running Task",-1)),_.value?(i(),r("div",Fe,[e("button",{onClick:t[2]||(t[2]=a=>Bt(_.value)),class:"text-indigo-600 hover:underline text-sm"},l(((o=O.value.find(a=>a.id===_.value))==null?void 0:o.title)||"#"+_.value),1),e("p",Re,[vt(l(le.value),1),(n=O.value.find(a=>a.id===_.value))!=null&&n.estimated_time?(i(),r("span",ze," / "+l(Wt((d=O.value.find(a=>a.id===_.value))==null?void 0:d.estimated_time)),1)):f("",!0)]),e("div",qe,[e("button",{onClick:t[3]||(t[3]=a=>Pt()),disabled:T.value,class:"rounded-md bg-yellow-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-yellow-700"},"Pause",8,Ze)])])):(i(),r("div",Ge,[e("div",Je,[Z(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>et.value=a),class:"w-full rounded-md border-gray-300 text-sm shadow-sm"},[t[26]||(t[26]=e("option",{value:null},"Select a task",-1)),(i(!0),r(L,null,P(O.value,a=>(i(),r("option",{key:a.id,value:a.id},l(a.title),9,Ke))),128))],512),[[ft,et.value]]),e("button",{onClick:t[5]||(t[5]=a=>et.value?It(et.value):void 0),disabled:T.value||!et.value,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700 disabled:opacity-50"},"Start",8,Qe)]),O.value.length?f("",!0):(i(),r("p",Xe,"No tasks available."))]))])]),e("div",Ye,[e("div",ts,[t[29]||(t[29]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Daily Logs",-1)),e("p",es,[vt(l(re.value),1),t[28]||(t[28]=e("span",{class:"text-sm font-normal text-gray-500"}," / 8 Hours",-1))]),e("div",{class:"mt-4 flex space-x-2"},[e("button",{onClick:ie,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-700"},"Daily Logs")])])])])):f("",!0),U.value==="admin"?(i(),r("div",ss,[e("div",as,[e("div",os,[t[30]||(t[30]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Real-Time Activity Log",-1)),e("button",{onClick:St,disabled:gt.value,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-500"},"Refresh",8,ns)]),e("div",ls,[e("table",rs,[t[32]||(t[32]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"User"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Action"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Description"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Time")])],-1)),e("tbody",is,[(i(!0),r(L,null,P(xt.value,a=>{var x;return i(),r("tr",{key:a.id},[e("td",ds,l(((x=a.user)==null?void 0:x.name)||"Unknown"),1),e("td",us,l(a.action),1),e("td",cs,l(a.description),1),e("td",ms,l(new Date(a.created_at).toLocaleString()),1)])}),128)),xt.value.length===0&&!gt.value?(i(),r("tr",ps,[...t[31]||(t[31]=[e("td",{colspan:"4",class:"px-4 py-4 text-center text-sm text-gray-500"},"No activity logs found",-1)])])):f("",!0)])])])])])):f("",!0),U.value!=="admin"?(i(),r("div",xs,[e("div",gs,[e("div",ys,[t[36]||(t[36]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"My Tasks",-1)),e("div",vs,[e("button",{onClick:Kt,disabled:st.value,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700 disabled:opacity-60 disabled:cursor-not-allowed flex items-center gap-2"},[st.value?(i(),r("span",hs)):f("",!0),e("span",null,l(st.value?"Syncingâ€¦":"Refresh from ClickUp"),1)],8,fs),Z(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>wt.value=a),onInput:t[7]||(t[7]=a=>F(1)),type:"text",placeholder:"Search tasks",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[ht,wt.value]]),Z(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>it.value=a),onChange:t[9]||(t[9]=a=>F(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[t[33]||(t[33]=e("option",{value:"all"},"All",-1)),(i(!0),r(L,null,P(dt.value,a=>(i(),r("option",{key:a,value:a},l(a),9,ks))),128))],544),[[ft,it.value]]),Z(e("select",{"onUpdate:modelValue":t[10]||(t[10]=a=>ut.value=a),onChange:t[11]||(t[11]=a=>F(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...t[34]||(t[34]=[e("option",{value:"all"},"All priorities",-1),e("option",{value:"urgent"},"Urgent",-1),e("option",{value:"high"},"High",-1),e("option",{value:"normal"},"Normal",-1),e("option",{value:"low"},"Low",-1),e("option",{value:"none"},"None",-1)])],544),[[ft,ut.value]]),Z(e("input",{"onUpdate:modelValue":t[12]||(t[12]=a=>ct.value=a),onChange:t[13]||(t[13]=a=>F(1)),type:"date",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[ht,ct.value]]),Z(e("input",{"onUpdate:modelValue":t[14]||(t[14]=a=>mt.value=a),onChange:t[15]||(t[15]=a=>F(1)),type:"date",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[ht,mt.value]]),Z(e("select",{"onUpdate:modelValue":t[16]||(t[16]=a=>at.value=a),onChange:t[17]||(t[17]=a=>F(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...t[35]||(t[35]=[e("option",{value:5},"5",-1),e("option",{value:10},"10",-1),e("option",{value:20},"20",-1),e("option",{value:50},"50",-1)])],544),[[ft,at.value,void 0,{number:!0}]])])]),e("div",bs,[e("table",_s,[t[40]||(t[40]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Campaign"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Parent Task"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Due Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Estimated Time"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Priority"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Actions")])],-1)),e("tbody",ws,[(i(!0),r(L,null,P(zt.value,a=>(i(),r("tr",{key:a.id},[e("td",Ts,[e("button",{onClick:x=>Bt(a.id),class:"hover:underline"},l(a.title),9,Ss)]),e("td",Ds,l(a.clickup_list_name||"--"),1),e("td",Ms,l(a.parent_task_name||"N/A"),1),e("td",Cs,[At(a.status)?(i(),r("span",{key:0,class:A(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold",Ht(a.status)])},l(a.status||"â€”"),3)):(i(),r("span",Ns,l(a.status||"â€”"),1))]),e("td",$s,l(a.due_date?new Date(a.due_date).toLocaleDateString():"--"),1),e("td",Es,l(Wt(a.estimated_time)),1),e("td",Ls,[e("span",{class:A(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold",ge(a.priority||null)])},l(a.priority||"None"),3)]),e("td",Bs,[e("div",Is,[e("button",{onClick:x=>_.value===a.id?Pt():It(a.id),disabled:T.value,class:A(["rounded-full p-2 text-white",_.value===a.id?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"]),"aria-label":_.value===a.id?"Pause":"Play"},[_.value!==a.id?(i(),r("svg",Us,[...t[37]||(t[37]=[e("path",{d:"M8 5v14l11-7z"},null,-1)])])):(i(),r("svg",js,[...t[38]||(t[38]=[e("path",{d:"M6 5h4v14H6zM14 5h4v14h-4z"},null,-1)])]))],10,Ps),e("select",{value:a.status||"",onChange:x=>xe(a.id,x.target.value),class:"rounded-md border-gray-300 text-xs shadow-sm"},[t[39]||(t[39]=e("option",{disabled:"",value:""},"Set statusâ€¦",-1)),(i(!0),r(L,null,P(dt.value,x=>(i(),r("option",{key:x+a.id,value:x},l(x),9,Hs))),128)),dt.value.includes("complete")?f("",!0):(i(),r("option",As,"complete")),dt.value.includes("done")?f("",!0):(i(),r("option",Os,"done"))],40,Ws)])])]))),128))])]),e("div",Vs,[e("div",null," Page "+l(G.value)+" of "+l(pt.value)+" â€¢ "+l(Tt.value.length)+" total ",1),e("div",Fs,[e("button",{onClick:t[18]||(t[18]=a=>F(G.value-1)),disabled:G.value<=1,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Prev",8,Rs),e("button",{onClick:t[19]||(t[19]=a=>F(G.value+1)),disabled:G.value>=pt.value,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Next",8,zs)])])])])])):f("",!0),e("div",qs,[e("div",Zs,[t[42]||(t[42]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Today's Time Events",-1)),yt.value.length===0?(i(),r("div",Gs," No time entries recorded today. Clock in to start tracking time. ")):(i(),r("div",Js,[e("table",Ks,[t[41]||(t[41]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),e("tbody",Qs,[(i(!0),r(L,null,P(yt.value,(a,x)=>(i(),r("tr",{key:x},[e("td",Xs,l(a.name),1),e("td",Ys,l(tt(a.start)),1),e("td",ta,l(tt(a.end)),1),e("td",ea,l(j(a.durationSeconds)),1),e("td",sa,l(j(a.breakDurationSeconds||0)),1),e("td",aa,l(a.notes||"-"),1)]))),128))])])]))])])])):f("",!0),Q.value==="time-entries"&&U.value!=="admin"?(i(),r("div",oa,[e("div",na,[e("div",la,[e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),Z(e("input",{"onUpdate:modelValue":t[20]||(t[20]=a=>X.value=a),onChange:Ut,type:"date",class:"w-full rounded-md border-gray-300 shadow-sm"},null,544),[[ht,X.value]])])])]),e("div",ra,[t[49]||(t[49]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Daily Summary",-1)),e("div",ia,[e("div",null,[t[44]||(t[44]=e("div",{class:"text-gray-500"},"ðŸ•’ Time In Hours",-1)),e("div",da,l(j(B.value.workSeconds)),1)]),e("div",null,[t[45]||(t[45]=e("div",{class:"text-gray-500"},"â˜• Total Breaks",-1)),e("div",ua,l(j(B.value.breakSeconds)),1)]),e("div",null,[t[46]||(t[46]=e("div",{class:"text-gray-500"},"ðŸ“‹ Entries",-1)),e("div",ca,l(B.value.tasksCount),1)]),e("div",null,[t[47]||(t[47]=e("div",{class:"text-gray-500"},"â° Status",-1)),e("div",{class:A(["font-semibold",{"text-green-700":B.value.status==="Perfect","text-yellow-700":B.value.status==="Late","text-gray-700":B.value.status==="No Entry"}])},l(B.value.status),3)]),e("div",null,[t[48]||(t[48]=e("div",{class:"text-gray-500"},"âš¡ Overtime",-1)),e("div",ma,l(j(B.value.overtimeSeconds)),1)])])]),e("div",pa,[e("div",xa,[e("table",ga,[t[51]||(t[51]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),e("tbody",ya,[(i(!0),r(L,null,P(N.value,(a,x)=>(i(),r("tr",{key:x},[e("td",va,l(a.name),1),e("td",fa,l(tt(a.start)),1),e("td",ha,l(tt(a.end)),1),e("td",ka,l(j(a.durationSeconds)),1),e("td",ba,l(j(a.breakDurationSeconds||0)),1),e("td",_a,l(a.notes||"-"),1)]))),128)),N.value.length===0&&!rt.value?(i(),r("tr",wa,[...t[50]||(t[50]=[e("td",{colspan:"6",class:"px-4 py-4 text-center text-sm text-gray-500"},"No entries for selected day",-1)])])):f("",!0)])])]),rt.value?(i(),r("div",Ta,[...t[52]||(t[52]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),e("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):f("",!0)])])):f("",!0)]),kt.value?(i(),r("div",Sa,[e("div",Da,[e("div",Ma,[t[53]||(t[53]=e("h4",{class:"text-md font-semibold"},"Daily Logs",-1)),e("button",{onClick:t[21]||(t[21]=a=>kt.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs"},"Close")]),e("div",Ca,[yt.value.length===0?(i(),r("div",Na,"No entry today.")):(i(),r("div",$a,[e("table",Ea,[t[54]||(t[54]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),e("tbody",La,[(i(!0),r(L,null,P(yt.value,(a,x)=>(i(),r("tr",{key:x},[e("td",Ba,l(a.name),1),e("td",Ia,l(tt(a.start)),1),e("td",Pa,l(tt(a.end)),1),e("td",Ua,l(j(a.durationSeconds)),1),e("td",ja,l(j(a.breakDurationSeconds||0)),1),e("td",Wa,l(a.notes||"-"),1)]))),128))])])]))])])])):f("",!0),_t.value&&S.value?(i(),r("div",Ha,[e("div",Aa,[e("div",{class:"flex items-center justify-between border-b px-4 py-3"},[t[55]||(t[55]=e("h4",{class:"text-md font-semibold"},"ClickUp Sync Summary",-1)),e("button",{onClick:Jt,class:"rounded-md bg-gray-100 px-2 py-1 text-xs hover:bg-gray-200"},"Close")]),e("div",Oa,[e("div",Va,[t[57]||(t[57]=e("p",null,"Latest sync completed successfully.",-1)),S.value.sources.length?(i(),r("p",Fa,[t[56]||(t[56]=vt(" Sources: ",-1)),e("span",Ra,l(S.value.sources.join(", ")),1)])):f("",!0)]),e("div",za,[e("div",qa,[t[58]||(t[58]=e("div",{class:"text-xs uppercase tracking-wide text-indigo-600"},"Total Processed",-1)),e("div",Za,l(S.value.summary.total),1)]),e("div",Ga,[t[59]||(t[59]=e("div",{class:"text-xs uppercase tracking-wide text-green-600"},"Created",-1)),e("div",Ja,l(S.value.summary.created),1)]),e("div",Ka,[t[60]||(t[60]=e("div",{class:"text-xs uppercase tracking-wide text-blue-600"},"Updated",-1)),e("div",Qa,l(S.value.summary.updated),1)]),e("div",Xa,[t[61]||(t[61]=e("div",{class:"text-xs uppercase tracking-wide text-gray-600"},"No Changes",-1)),e("div",Ya,l(S.value.summary.unchanged),1)]),e("div",to,[t[62]||(t[62]=e("div",{class:"text-xs uppercase tracking-wide text-amber-600"},"Skipped",-1)),e("div",eo,l(S.value.summary.skipped),1)])]),S.value.created.length?(i(),r("div",so,[t[63]||(t[63]=e("h5",{class:"text-sm font-semibold text-gray-900"},"New tasks",-1)),e("ul",ao,[(i(!0),r(L,null,P(S.value.created,a=>(i(),r("li",{key:"created-"+a.id,class:"rounded-md border border-green-200 bg-green-50 px-3 py-2"},[e("div",oo,[e("span",no,l(a.title),1),e("span",lo,l(jt(a.due_date)),1)]),e("div",ro,[a.status?(i(),r("span",io,"Status: "+l(a.status),1)):f("",!0),a.priority?(i(),r("span",uo,"Priority: "+l(a.priority),1)):f("",!0)])]))),128))])])):f("",!0),S.value.updated.length?(i(),r("div",co,[t[64]||(t[64]=e("h5",{class:"text-sm font-semibold text-gray-900"},"Updated tasks",-1)),e("ul",mo,[(i(!0),r(L,null,P(S.value.updated,a=>(i(),r("li",{key:"updated-"+a.id,class:"rounded-md border border-blue-200 bg-blue-50 px-3 py-2"},[e("div",po,[e("span",xo,l(a.title),1),e("span",go,l(jt(a.due_date)),1)]),e("div",yo,[a.status?(i(),r("span",vo,"Status: "+l(a.status),1)):f("",!0),a.priority?(i(),r("span",fo,"Priority: "+l(a.priority),1)):f("",!0)])]))),128))])])):f("",!0),S.value.skipped.length?(i(),r("div",ho,[t[65]||(t[65]=e("h5",{class:"text-sm font-semibold text-gray-900"},"Skipped items",-1)),e("ul",ko,[(i(!0),r(L,null,P(S.value.skipped,a=>(i(),r("li",{key:"skipped-"+a.id,class:"rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-900"},[e("div",bo,[e("span",_o,l(a.id),1),e("span",wo,l(a.reason),1)])]))),128))])])):f("",!0)])])])):f("",!0),lt.value?(i(),r("div",To,[e("div",So,[e("div",Do,[t[66]||(t[66]=e("h4",{class:"text-md font-semibold"},"Task Details",-1)),e("button",{onClick:t[22]||(t[22]=a=>lt.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs hover:bg-gray-200"},"Close")]),$.value?(i(),r("div",Mo,[e("div",Co,[e("h2",No,l((u=$.value.task)==null?void 0:u.title),1),e("div",$o,[(v=$.value.task)!=null&&v.status?(i(),r("span",Eo,[t[67]||(t[67]=e("span",{class:"text-gray-600"},"Status:",-1)),At($.value.task.status)?(i(),r("span",{key:0,class:A(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold ml-1",Ht($.value.task.status)])},l($.value.task.status),3)):(i(),r("span",Lo,l($.value.task.status),1))])):f("",!0),(m=$.value.clickup)!=null&&m.url?(i(),r("span",Bo,[e("a",{href:$.value.clickup.url,target:"_blank",class:"text-indigo-600 hover:underline text-sm font-medium"},"Open in ClickUp â†’",8,Io)])):f("",!0)])]),(p=$.value.clickup)!=null&&p.text_content?(i(),r("div",Po,[e("div",{innerHTML:ye($.value.clickup.text_content),class:"prose prose-sm max-w-none"},null,8,Uo)])):(i(),r("div",jo," No additional details available. "))])):f("",!0)])])):f("",!0)])]}),_:1})],64))}});export{Vo as default};
