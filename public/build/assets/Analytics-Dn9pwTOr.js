import{d as wt,r as c,c as Y,o as St,w as I,a as l,b as ut,u as Tt,h as Dt,e as mt,f as t,n as C,g as i,i as T,t as n,j as tt,F as D,k as L,l as et,v as vt,m as Mt}from"./app-BUeWMMJP.js";import{_ as Ut}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-B959LKiL.js";import{a as V}from"./api-BiU2kzRh.js";const Ct={class:"py-12"},Lt={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},Nt={class:"border-b border-gray-200 mb-6"},$t={class:"-mb-px flex space-x-8"},At={key:0,class:"space-y-8"},Et={class:"space-y-6"},Ht={class:"flex flex-wrap items-center justify-between gap-3"},Wt={key:0,class:"text-sm text-gray-500"},Bt={class:"flex items-center gap-2"},Pt=["disabled"],Rt={key:0,class:"h-3 w-3 animate-spin rounded-full border-2 border-indigo-500 border-t-transparent"},Ft={key:0,class:"bg-white shadow rounded-lg p-10 text-center text-sm text-gray-500"},It={key:1,class:"bg-red-50 border border-red-200 text-red-700 rounded-lg p-6 flex flex-col gap-4"},Vt={class:"text-sm"},jt={key:2,class:"space-y-8"},Ot={class:"grid gap-4 md:grid-cols-2 xl:grid-cols-3"},qt={class:"text-sm font-semibold uppercase tracking-wide text-gray-500"},Zt={class:"mt-2 text-3xl font-bold"},zt={class:"mt-2 text-sm text-gray-600"},Gt={class:"grid gap-6 lg:grid-cols-2"},Qt={class:"rounded-xl bg-white shadow-sm"},Jt={class:"border-b border-gray-100 px-5 py-4"},Kt={class:"text-sm text-gray-500"},Xt={key:0,class:"divide-y divide-gray-100"},Yt={class:"font-medium text-gray-900"},te={class:"text-sm text-gray-500"},ee={key:0,class:"ml-1 text-gray-400"},se={class:"text-right"},ae={class:"text-sm font-semibold text-indigo-600"},oe={class:"text-xs text-gray-500"},ne={key:1,class:"px-5 py-6 text-sm text-gray-500"},le={class:"rounded-xl bg-white shadow-sm"},ie={class:"space-y-4 px-5 py-6"},re={class:"text-sm font-medium text-gray-600"},de={class:"text-sm font-semibold text-gray-900 text-right"},ce={key:1,class:"space-y-6"},ue={class:"bg-white shadow rounded-lg p-4"},me={class:"grid gap-4 sm:grid-cols-3"},ve=["value"],ge={class:"flex items-end gap-2"},xe=["disabled"],pe=["disabled"],ye={class:"bg-white shadow rounded-lg p-5"},he={class:"grid gap-4 sm:grid-cols-3 lg:grid-cols-5 text-sm"},fe={class:"font-semibold"},be={class:"font-semibold"},_e={class:"font-semibold"},ke={class:"font-semibold"},we={class:"bg-white shadow rounded-lg"},Se={class:"overflow-x-auto"},Te={class:"min-w-full divide-y divide-gray-200"},De={class:"divide-y divide-gray-200"},Me={class:"px-4 py-4 text-sm text-gray-900"},Ue={class:"px-4 py-4 text-sm text-gray-500"},Ce={class:"px-4 py-4 text-sm text-gray-500"},Le={class:"px-4 py-4 text-sm text-gray-900 font-semibold"},Ne={class:"px-4 py-4 text-sm text-gray-500"},$e={class:"px-4 py-4 text-sm text-gray-500"},Ae={key:0},Ee={key:0,class:"text-center py-8"},He={key:2,class:"space-y-6"},We={class:"bg-white shadow rounded-lg p-4"},Be={class:"flex justify-between items-center mb-4"},Pe={class:"flex items-center gap-2"},Re={class:"grid gap-4 sm:grid-cols-2"},Fe={class:"bg-white shadow rounded-lg"},Ie={class:"overflow-x-auto"},Ve={class:"min-w-full divide-y divide-gray-200"},je={class:"divide-y divide-gray-200 bg-white"},Oe={class:"px-4 py-4 whitespace-nowrap"},qe={class:"flex items-center"},Ze={class:"flex-shrink-0 h-10 w-10"},ze={class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},Ge={class:"text-indigo-600 font-medium"},Qe={class:"ml-4"},Je={class:"text-sm font-medium text-gray-900"},Ke={class:"text-sm text-gray-500"},Xe={class:"px-4 py-4 whitespace-nowrap"},Ye={class:"px-4 py-4"},ts={class:"text-sm text-gray-900"},es={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-500"},ss={class:"text-xs text-gray-400"},as={key:0},os={key:0,class:"text-center py-8"},ns="Asia/Manila",cs=wt({__name:"Analytics",setup(ls){const u=c(null),j=c(!0),B=c(null),N=c(!1),O=async()=>{var a,e;try{B.value=null;const{data:s}=await V.get("/admin/analytics/summary");u.value=s}catch(s){console.error(s),B.value=((e=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:e.error)||"Unable to load analytics summary.",u.value=null}finally{j.value=!1,N.value=!1}},st=async()=>{N.value=!0,await O()},q=a=>`${a.toFixed(2)} h`,$=a=>a.toLocaleString(),Z=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),at=a=>new Date(a).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),gt=a=>{if(a===null)return"--";const e=Math.floor(a/60),s=a%60;return e===0?`${s}m`:`${e}h ${s}m`},xt=a=>a?new Date(a).toLocaleString("en-US",{hour:"numeric",minute:"2-digit"}):"--",pt=Y(()=>{if(!u.value)return[];const a=u.value.totals;return[{title:"Hours Logged Today",value:q(a.hours_today),subtitle:"Completed work hours",accent:"border-blue-500 bg-blue-50 text-blue-700"},{title:"Hours Logged This Week",value:q(a.hours_week),subtitle:"Monâ€“Sun total",accent:"border-indigo-500 bg-indigo-50 text-indigo-700"},{title:"Active Users Today",value:$(a.active_users_today),subtitle:"Unique employees with activity",accent:"border-emerald-500 bg-emerald-50 text-emerald-700"},{title:"Active Users This Week",value:$(a.active_users_week),subtitle:"Unique employees this week",accent:"border-teal-500 bg-teal-50 text-teal-700"},{title:"Avg Hours / User (Week)",value:q(a.average_hours_per_user_week),subtitle:"Hours per active user",accent:"border-purple-500 bg-purple-50 text-purple-700"},{title:"Open Clock-ins",value:$(a.open_entries),subtitle:"Users still on the clock",accent:"border-amber-500 bg-amber-50 text-amber-700"}]}),yt=Y(()=>{if(!u.value)return[];const a=u.value.totals;return[{label:"Late clock-ins today",value:$(a.late_clock_ins_today)},{label:"Completed entries today",value:$(a.total_entries_today)},{label:"Week window",value:`${Z(u.value.dates.week_start)} â†’ ${Z(u.value.dates.week_end)}`},{label:"Report generated",value:at(u.value.generated_at)}]}),ot=Y(()=>{var a;return(((a=u.value)==null?void 0:a.open_entries.length)??0)>0}),g=c("overview"),d=c(null),f=c(""),M=c([]),nt=c([]),P=c(!1),x=c([]),b=c({workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0});c([]);const z=c([]),R=c(!1),A=c(""),ht=c(Date.now()),E=a=>{const e=typeof a=="number"&&isFinite(a)?Math.max(0,Math.floor(a)):0,s=Math.floor(e/3600),v=Math.floor(e%3600/60),_=e%60,m=k=>k<10?`0${k}`:`${k}`;return`${m(s)}:${m(v)}:${m(_)}`},G=a=>{if(!a)return"--";try{const s=new Date(a);if(!isNaN(s.getTime()))return s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:ns})}catch{}const e=a.match(/\b(\d{1,2}):(\d{2})(?::(\d{2}))?/);if(e){let s=parseInt(e[1],10);const v=e[2],_=s>=12?"PM":"AM";return s=s%12,s===0&&(s=12),`${s}:${v} ${_}`}return"--"},S=a=>{if(!a)return null;const e=a.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?/);if(e){const _=Number(e[1]),m=Number(e[2])-1,k=Number(e[3]),J=Number(e[4]),K=Number(e[5]),X=Number(e[6]||"0");return new Date(Date.UTC(_,m,k,J-8,K,X))}const s=a.includes("T")?a:a.replace(" ","T"),v=new Date(s);return isNaN(v.getTime())?null:v},ft=async()=>{try{const a=await V.get("/admin/analytics/users");M.value=a.data,!d.value&&M.value.length>0&&(d.value=M.value[0].id)}catch(a){console.error("Error loading users:",a)}},Q=async()=>{var a;if(d.value){P.value=!0;try{const e=await V.get(`/admin/analytics/user/${d.value}`,{params:{start_date:f.value,end_date:f.value}}),s=((a=e.data)==null?void 0:a.entries)||e.data||[];nt.value=s,x.value=[];let v=0,_=0,m=null;s.forEach(o=>{var it,rt,dt,ct;if(o.entry_type==="break"||o.is_break){const y=S(o.clock_in),w=S(o.clock_out);if(y&&w){const h=Math.max(0,Math.floor((w.getTime()-y.getTime())/1e3));_+=h,x.value.push({name:"Break",start:o.clock_in_formatted||o.clock_in,end:o.clock_out_formatted||o.clock_out,durationSeconds:h,breakDurationSeconds:h,notes:"-"})}return}const r=S(o.clock_in),p=S(o.clock_out);r&&(!m||r<m)&&(m=r);const H=!!o.task&&(o.task.title||o.task.name);if(r&&p){const y=Math.max(0,Math.floor((p.getTime()-r.getTime())/1e3));v+=y;const w=S(o.lunch_start),h=S(o.lunch_end);let U=0;w&&h&&(U=Math.max(0,Math.floor((h.getTime()-w.getTime())/1e3)));const W=Math.max(0,y-U);x.value.push({name:"Work Hours",start:o.clock_in_formatted||o.clock_in,end:o.clock_out_formatted||o.clock_out,durationSeconds:W,breakDurationSeconds:0,notes:"-"})}else if(r&&!p){const y=new Date,w=Math.max(0,Math.floor((y.getTime()-r.getTime())/1e3)),h=S(o.lunch_start),U=S(o.lunch_end);let W=0;h&&U?W=Math.max(0,Math.floor((U.getTime()-h.getTime())/1e3)):h&&!U&&(W=Math.max(0,Math.floor((y.getTime()-h.getTime())/1e3)));const kt=Math.max(0,w-W);x.value.push({name:"Work Hours",start:o.clock_in_formatted||o.clock_in,end:null,durationSeconds:kt,breakDurationSeconds:0,notes:"In progress"})}if(H&&r&&p){const y=Math.max(0,Math.floor((p.getTime()-r.getTime())/1e3));x.value.push({name:((it=o.task)==null?void 0:it.title)||((rt=o.task)==null?void 0:rt.name)||"Task",start:o.clock_in_formatted||o.clock_in,end:o.clock_out_formatted||o.clock_out,durationSeconds:y,breakDurationSeconds:0,notes:"-"})}else if(H&&r&&!p){const w=Math.max(0,Math.floor((new Date().getTime()-r.getTime())/1e3));x.value.push({name:((dt=o.task)==null?void 0:dt.title)||((ct=o.task)==null?void 0:ct.name)||"Task",start:o.clock_in_formatted||o.clock_in,end:null,durationSeconds:w,breakDurationSeconds:0,notes:"In progress"})}}),x.value.sort((o,r)=>{const p=new Date(o.start??"").getTime(),H=new Date(r.start??"").getTime();return(isNaN(H)?0:H)-(isNaN(p)?0:p)});const k=x.value.filter(o=>o.name==="Work Hours").reduce((o,r)=>o+(r.durationSeconds||0),0),J=x.value.filter(o=>o.name==="Break").reduce((o,r)=>o+(r.durationSeconds||0),0),K=8*3600,X=Math.max(0,k-K);let lt="No Entry";if(m){const o=m,r=(o.getUTCHours()+8)%24,p=o.getUTCMinutes();lt=r<8||r===8&&p<=30?"Perfect":"Late"}b.value={workSeconds:k,breakSeconds:J,lunchSeconds:0,tasksCount:x.value.length,status:lt,overtimeSeconds:X}}catch(e){console.error("Error loading user daily analytics",e),nt.value=[],b.value={workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}}finally{P.value=!1}}},F=async(a=!1)=>{a||(R.value=!0);try{const e={limit:100};A.value&&(e.action=A.value);const s=await V.get("/admin/analytics/activity-logs",{params:e});z.value=s.data.data,ht.value=Date.now()}catch(e){console.error("Error loading activity logs:",e),a||alert("Failed to load activity logs")}finally{R.value=!1}},bt=()=>{if(!d.value){alert("Please select a user first");return}const a=new URLSearchParams({user_id:String(d.value),start_date:f.value,end_date:f.value});window.location.href=`/api/admin/analytics/user-summary/export/csv?${a.toString()}`},_t=()=>{if(!d.value){alert("Please select a user first");return}const a=new URLSearchParams({user_id:String(d.value),start_date:f.value,end_date:f.value});window.location.href=`/api/admin/analytics/user-summary/export/pdf?${a.toString()}`};return St(()=>{const a=new Date;f.value=a.toISOString().split("T")[0],ft(),F(),O()}),I(g,a=>{a==="overview"?O():a==="summary"?(!d.value&&M.value.length>0&&(d.value=M.value[0].id),d.value&&Q()):a==="activity"&&F(!0)}),I(d,a=>{g.value==="summary"&&a&&Q()}),I(f,()=>{g.value==="summary"&&d.value&&Q()}),I(A,()=>{g.value==="activity"&&F(!0)}),(a,e)=>(i(),l(D,null,[ut(Tt(Dt),{title:"Analytics"}),ut(Ut,null,{header:mt(()=>[...e[7]||(e[7]=[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Analytics & Reports ",-1)])]),default:mt(()=>[t("div",Ct,[t("div",Lt,[t("div",Nt,[t("nav",$t,[t("button",{onClick:e[0]||(e[0]=s=>g.value="overview"),class:C(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",g.value==="overview"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Overview ",2),t("button",{onClick:e[1]||(e[1]=s=>g.value="summary"),class:C(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",g.value==="summary"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," User Summary ",2),t("button",{onClick:e[2]||(e[2]=s=>g.value="activity"),class:C(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",g.value==="activity"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Activity Log ",2)])]),g.value==="overview"?(i(),l("div",At,[t("section",Et,[t("div",Ht,[t("div",null,[e[8]||(e[8]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Company Health Overview",-1)),u.value?(i(),l("p",Wt," As of "+n(at(u.value.generated_at)),1)):T("",!0)]),t("div",Bt,[t("button",{type:"button",onClick:st,disabled:N.value||j.value,class:"inline-flex items-center gap-2 rounded-md border border-indigo-200 bg-white px-4 py-2 text-sm font-medium text-indigo-600 shadow-sm transition hover:bg-indigo-50 disabled:cursor-not-allowed disabled:border-gray-200 disabled:text-gray-400"},[N.value?(i(),l("span",Rt)):T("",!0),t("span",null,n(N.value?"Refreshingâ€¦":"Refresh"),1)],8,Pt)])]),j.value?(i(),l("div",Ft,[...e[9]||(e[9]=[t("div",{class:"mx-auto mb-3 h-8 w-8 animate-spin rounded-full border-b-2 border-indigo-600"},null,-1),tt(" Loading analytics summaryâ€¦ ",-1)])])):B.value?(i(),l("div",It,[t("div",null,[e[10]||(e[10]=t("h4",{class:"font-semibold text-red-800"},"We couldnâ€™t load the analytics overview.",-1)),t("p",Vt,n(B.value),1)]),t("div",null,[t("button",{type:"button",onClick:st,class:"inline-flex items-center rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-red-500"}," Try again ")])])):u.value?(i(),l("div",jt,[t("div",Ot,[(i(!0),l(D,null,L(pt.value,s=>(i(),l("div",{key:s.title,class:C(["rounded-xl border bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:shadow-md",s.accent])},[t("h4",qt,n(s.title),1),t("p",Zt,n(s.value),1),t("p",zt,n(s.subtitle),1)],2))),128))]),t("div",Gt,[t("div",Qt,[t("div",Jt,[e[11]||(e[11]=t("h4",{class:"text-base font-semibold text-gray-800"},"Whoâ€™s still on the clock",-1)),t("p",Kt,n(ot.value?"Top 10 current sessions":"No one is clocked in right now."),1)]),ot.value?(i(),l("div",Xt,[(i(!0),l(D,null,L(u.value.open_entries,s=>(i(),l("div",{key:s.entry_id,class:"flex items-center justify-between gap-3 px-5 py-4"},[t("div",null,[t("p",Yt,n(s.user.name||"Unknown User"),1),t("p",te,[tt(n(s.user.email||"No email listed")+" ",1),s.user.team?(i(),l("span",ee,"Â· "+n(s.user.team),1)):T("",!0)])]),t("div",se,[t("p",ae,n(gt(s.minutes_running)),1),t("p",oe,"since "+n(xt(s.clock_in)),1)])]))),128))])):(i(),l("div",ne," All clocks are cleared for today. Great job! "))]),t("div",le,[e[12]||(e[12]=t("div",{class:"border-b border-gray-100 px-5 py-4"},[t("h4",{class:"text-base font-semibold text-gray-800"},"At a glance"),t("p",{class:"text-sm text-gray-500"},"Quick context for today and the week.")],-1)),t("dl",ie,[(i(!0),l(D,null,L(yt.value,s=>(i(),l("div",{key:s.label,class:"flex items-center justify-between gap-4"},[t("dt",re,n(s.label),1),t("dd",de,n(s.value),1)]))),128))])])])])):T("",!0)])])):g.value==="summary"?(i(),l("div",ce,[t("div",ue,[t("div",me,[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"User",-1)),et(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>d.value=s),class:"w-full rounded-md border-gray-300 shadow-sm"},[e[13]||(e[13]=t("option",{value:null},"Select User",-1)),(i(!0),l(D,null,L(M.value,s=>(i(),l("option",{key:s.id,value:s.id},n(s.name),9,ve))),128))],512),[[vt,d.value]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),et(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>f.value=s),type:"date",class:"w-full rounded-md border-gray-300 shadow-sm"},null,512),[[Mt,f.value]])]),t("div",ge,[t("button",{onClick:bt,disabled:!d.value,class:"flex-1 rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed"}," Export CSV ",8,xe),t("button",{onClick:_t,disabled:!d.value,class:"flex-1 rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-500 disabled:bg-gray-400 disabled:cursor-not-allowed"}," Export PDF ",8,pe)])])]),t("div",ye,[e[21]||(e[21]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Daily Summary",-1)),t("div",he,[t("div",null,[e[16]||(e[16]=t("div",{class:"text-gray-500"},"ðŸ•’ Time In Hours",-1)),t("div",fe,n(E(b.value.workSeconds)),1)]),t("div",null,[e[17]||(e[17]=t("div",{class:"text-gray-500"},"â˜• Total Breaks",-1)),t("div",be,n(E(b.value.breakSeconds)),1)]),t("div",null,[e[18]||(e[18]=t("div",{class:"text-gray-500"},"ðŸ“‹ Entries",-1)),t("div",_e,n(b.value.tasksCount),1)]),t("div",null,[e[19]||(e[19]=t("div",{class:"text-gray-500"},"â° Status",-1)),t("div",{class:C(["font-semibold",{"text-green-700":b.value.status==="Perfect","text-yellow-700":b.value.status==="Late","text-gray-700":b.value.status==="No Entry"}])},n(b.value.status),3)]),t("div",null,[e[20]||(e[20]=t("div",{class:"text-gray-500"},"âš¡ Overtime",-1)),t("div",ke,n(E(b.value.overtimeSeconds)),1)])])]),t("div",we,[t("div",Se,[t("table",Te,[e[23]||(e[23]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),t("tbody",De,[(i(!0),l(D,null,L(x.value,(s,v)=>(i(),l("tr",{key:v},[t("td",Me,n(s.name),1),t("td",Ue,n(G(s.start)),1),t("td",Ce,n(G(s.end)),1),t("td",Le,n(E(s.durationSeconds)),1),t("td",Ne,n(E(s.breakDurationSeconds||0)),1),t("td",$e,n(s.notes||"-"),1)]))),128)),x.value.length===0&&!P.value?(i(),l("tr",Ae,[...e[22]||(e[22]=[t("td",{colspan:"6",class:"px-4 py-4 text-center text-sm text-gray-500"},"No entries for selected day",-1)])])):T("",!0)])])]),P.value?(i(),l("div",Ee,[...e[24]||(e[24]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):T("",!0)])])):(i(),l("div",He,[t("div",We,[t("div",Be,[e[26]||(e[26]=t("h3",{class:"text-lg font-medium text-gray-900"},"Real-Time Activity Log",-1)),t("div",Pe,[e[25]||(e[25]=t("div",{class:"flex items-center gap-2 text-sm text-gray-600"},[t("span",{class:"inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t("span",null,"Live Updates")],-1)),t("button",{onClick:e[5]||(e[5]=s=>F()),class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-indigo-500"}," Refresh ")])]),t("div",Re,[t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter by Action",-1)),et(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>A.value=s),class:"w-full rounded-md border-gray-300 shadow-sm"},[...e[27]||(e[27]=[t("option",{value:""},"All Actions",-1),t("option",{value:"clock_in"},"Clock In",-1),t("option",{value:"clock_out"},"Clock Out",-1),t("option",{value:"break_start"},"Break Start",-1),t("option",{value:"break_end"},"Break End",-1),t("option",{value:"lunch_start"},"Lunch Start",-1),t("option",{value:"lunch_end"},"Lunch End",-1)])],512),[[vt,A.value]])])])]),t("div",Fe,[t("div",Ie,[t("table",Ve,[e[30]||(e[30]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"User"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Action"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Description"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Time")])],-1)),t("tbody",je,[(i(!0),l(D,null,L(z.value,s=>{var v,_,m;return i(),l("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",Oe,[t("div",qe,[t("div",Ze,[t("div",ze,[t("span",Ge,n((v=s.user)!=null&&v.name?s.user.name.charAt(0).toUpperCase():"?"),1)])]),t("div",Qe,[t("div",Je,n(((_=s.user)==null?void 0:_.name)||"Unknown User"),1),t("div",Ke,n((m=s.user)==null?void 0:m.email),1)])])]),t("td",Xe,[t("span",{class:C(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":s.action==="clock_in","bg-red-100 text-red-800":s.action==="clock_out","bg-yellow-100 text-yellow-800":s.action.includes("break"),"bg-blue-100 text-blue-800":s.action.includes("lunch")}])},n(s.action.replace("_"," ").replace(/\b\w/g,k=>k.toUpperCase())),3)]),t("td",Ye,[t("div",ts,n(s.description),1)]),t("td",es,[tt(n(Z(s.created_at))+" ",1),t("div",ss,n(G(s.created_at)),1)])])}),128)),z.value.length===0&&!R.value?(i(),l("tr",as,[...e[29]||(e[29]=[t("td",{colspan:"4",class:"px-4 py-4 text-center text-sm text-gray-500"},"No activity logs found",-1)])])):T("",!0)])])]),R.value?(i(),l("div",os,[...e[31]||(e[31]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):T("",!0)])]))])])]),_:1})],64))}});export{cs as default};
