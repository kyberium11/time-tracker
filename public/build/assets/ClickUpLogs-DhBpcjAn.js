import{_}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-Cq63Oy31.js";import{d as f,r as c,o as w,c as o,a as g,u as v,h as k,w as y,b as t,f as l,F as p,i as m,k as b,t as a,n as C,e as L}from"./app-GduDMQx3.js";import{a as N}from"./api-5d8fsRbc.js";const U={class:"flex items-center justify-between"},D=["disabled"],S={class:"py-12"},T={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},V={class:"mb-4 overflow-hidden bg-white shadow sm:rounded-lg"},B={class:"px-4 py-5 sm:p-6"},E={key:0,class:"text-sm text-gray-500"},F={key:1,class:"list-disc pl-5 space-y-1 text-sm text-gray-700"},I={class:"font-medium"},M={class:"overflow-hidden bg-white shadow sm:rounded-lg"},j={class:"px-4 py-5 sm:p-6 overflow-x-auto"},A={class:"min-w-full divide-y divide-gray-200"},P={class:"divide-y divide-gray-200 bg-white"},W={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-700"},z={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},J={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-700"},K={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-700"},O={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-700"},R={class:"px-6 py-4 text-xs text-gray-500"},$={class:"whitespace-pre-wrap"},q={key:0},Y=f({__name:"ClickUpLogs",setup(G){const d=c([]),i=c(!1),n=c([]),x=async()=>{var r,s;i.value=!0;try{const e=await N.get("/admin/clickup/webhook-logs");d.value=((r=e.data)==null?void 0:r.logs)||[],n.value=((s=e.data)==null?void 0:s.webhooks)||[]}catch{alert("Failed to load ClickUp logs")}finally{i.value=!1}};return w(x),(r,s)=>(l(),o(p,null,[g(v(k),{title:"ClickUp Logs"}),g(_,null,{header:y(()=>[t("div",U,[s[0]||(s[0]=t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"ClickUp Webhook Logs",-1)),t("button",{onClick:x,disabled:i.value,class:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"}," Refresh ",8,D)])]),default:y(()=>[t("div",S,[t("div",T,[t("div",V,[t("div",B,[s[1]||(s[1]=t("h3",{class:"text-md font-semibold mb-2"},"Active ClickUp Webhooks",-1)),n.value.length?(l(),o("ul",F,[(l(!0),o(p,null,m(n.value,e=>{var h,u;return l(),o("li",{key:e.id},[t("span",I,a(e.id),1),b(" → "+a(e.endpoint)+" (events: "+a((e.events||[]).join(", "))+") ",1),t("span",{class:C(["ml-2 text-xs",((h=e.health)==null?void 0:h.status)==="active"?"text-green-600":"text-red-600"])},a((u=e.health)==null?void 0:u.status),3)])}),128))])):(l(),o("div",E,"No webhooks found (or CLICKUP_TEAM_ID not set)."))])]),t("div",M,[t("div",j,[t("table",A,[s[3]||(s[3]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Time"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Event"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Message"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Payload")])],-1)),t("tbody",P,[(l(!0),o(p,null,m(d.value,e=>(l(),o("tr",{key:e.id},[t("td",W,a(new Date(e.created_at).toLocaleString()),1),t("td",z,a(e.event||"—"),1),t("td",J,a(e.task_id||"—"),1),t("td",K,a(e.status_code??"—"),1),t("td",O,a(e.message||"—"),1),t("td",R,[t("pre",$,a(JSON.stringify(e.payload,null,2)),1)])]))),128)),!d.value.length&&!i.value?(l(),o("tr",q,[...s[2]||(s[2]=[t("td",{colspan:"6",class:"px-6 py-6 text-center text-sm text-gray-500"},"No logs yet.",-1)])])):L("",!0)])])])])])])]),_:1})],64))}});export{Y as default};
