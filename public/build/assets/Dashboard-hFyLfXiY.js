import{d as ae,r as c,q as k,o as oe,z as ne,c as r,a as Lt,u as le,h as re,w as It,b as e,e as v,f as i,n as U,t as d,g as B,F as w,i as S,v as pt,k as ie,j as gt}from"./app-C-QH8UqR.js";import{_ as de}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-D2PEpjRT.js";import{a as y}from"./api-BGE4Y8iw.js";const ue={class:"py-12"},ce={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},me={key:0,class:"border-b border-gray-200 mb-6"},xe={class:"-mb-px flex space-x-8"},pe={key:1},ge={key:0,class:"mb-6 grid gap-4 md:grid-cols-3"},ve={class:"overflow-hidden bg-white shadow sm:rounded-lg"},ye={class:"px-4 py-5 sm:p-6"},he={class:"mt-2 text-3xl font-bold text-gray-900"},fe={class:"text-xs text-gray-500"},ke={class:"mt-4 flex flex-wrap gap-2"},be=["disabled"],_e=["disabled"],we={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Te={class:"px-4 py-5 sm:p-6"},Ce={key:0,class:"mt-2"},Se={class:"text-2xl font-bold text-gray-900 mt-1"},De={class:"mt-3"},Me=["disabled"],$e={key:1,class:"mt-2"},Ne={class:"flex items-center gap-2 w-full"},Ee=["value"],Le=["disabled"],Ie={key:0,class:"text-sm text-gray-500 mt-2"},Ue={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Be={class:"px-4 py-5 sm:p-6"},Pe={class:"mt-2 text-3xl font-bold text-gray-900"},Ae={key:1,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},Oe={class:"px-4 py-5 sm:p-6"},Ve={class:"flex items-center justify-between mb-4"},Fe=["disabled"],He={class:"overflow-x-auto"},je={class:"min-w-full divide-y divide-gray-200"},Re={class:"divide-y divide-gray-200 bg-white"},ze={class:"px-4 py-4 text-sm text-gray-900"},We={class:"px-4 py-4 text-sm text-gray-500"},qe={class:"px-4 py-4 text-sm text-gray-500"},Ze={class:"px-4 py-4 text-sm text-gray-500"},Ge={key:0},Je={key:2,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},Ke={class:"px-4 py-5 sm:p-6"},Qe={class:"flex items-center justify-between mb-3"},Xe={class:"flex items-center gap-2"},Ye=["value"],ts={class:"overflow-x-auto"},es={class:"min-w-full divide-y divide-gray-200"},ss={class:"divide-y divide-gray-200 bg-white"},as={class:"whitespace-nowrap px-6 py-4 text-sm text-indigo-600"},os=["onClick"],ns={class:"whitespace-nowrap px-6 py-4 text-sm"},ls={key:1,class:"text-sm text-gray-700"},rs={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},is={class:"whitespace-nowrap px-6 py-4 text-sm"},ds={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},us={class:"flex items-center space-x-2"},cs=["onClick","disabled","aria-label"],ms={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},xs={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},ps=["value","onChange"],gs=["value"],vs={key:0,value:"complete"},ys={key:1,value:"done"},hs={class:"flex items-center justify-between px-6 py-3 text-sm text-gray-600"},fs={class:"space-x-2"},ks=["disabled"],bs=["disabled"],_s={class:"overflow-hidden bg-white shadow sm:rounded-lg"},ws={class:"px-4 py-5 sm:p-6"},Ts={key:0,class:"text-center py-8 text-gray-500"},Cs={key:1,class:"overflow-x-auto"},Ss={class:"min-w-full divide-y divide-gray-200"},Ds={class:"divide-y divide-gray-200 bg-white"},Ms={class:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900"},$s={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Ns={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Es={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Ls={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Is={key:0,class:"flex items-center space-x-2"},Us=["disabled"],Bs=["disabled"],Ps=["disabled"],As=["disabled"],Os={key:1,class:"text-xs text-gray-400"},Vs={class:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900"},Fs={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Hs={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},js={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Rs={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},zs={key:0,class:"flex items-center space-x-2"},Ws=["onClick","disabled"],qs=["disabled"],Zs={key:1,class:"text-xs text-gray-400"},Gs={key:2,class:"space-y-6"},Js={class:"bg-white shadow rounded-lg p-4"},Ks={class:"grid gap-4 sm:grid-cols-2"},Qs={class:"bg-white shadow rounded-lg p-5"},Xs={class:"grid gap-4 sm:grid-cols-3 lg:grid-cols-5 text-sm"},Ys={class:"font-semibold"},ta={class:"font-semibold"},ea={class:"font-semibold"},sa={class:"font-semibold"},aa={class:"bg-white shadow rounded-lg"},oa={class:"overflow-x-auto"},na={class:"min-w-full divide-y divide-gray-200"},la={class:"divide-y divide-gray-200"},ra={class:"px-4 py-4 text-sm text-gray-900"},ia={class:"px-4 py-4 text-sm text-gray-500"},da={class:"px-4 py-4 text-sm text-gray-500"},ua={class:"px-4 py-4 text-sm text-gray-900 font-semibold"},ca={class:"px-4 py-4 text-sm text-gray-500"},ma={class:"px-4 py-4 text-sm text-gray-500"},xa={key:0},pa={key:0,class:"text-center py-8"},ga={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},va={class:"w-full max-w-2xl rounded-lg bg-white shadow-lg"},ya={class:"flex items-center justify-between border-b px-4 py-3"},ha={class:"p-4"},fa={key:0,class:"text-gray-500 text-sm"},ka={key:1,class:"overflow-x-auto"},ba={class:"min-w-full divide-y divide-gray-200"},_a={class:"divide-y divide-gray-200 bg-white"},wa={class:"px-4 py-2 text-sm text-gray-900"},Ta={class:"px-4 py-2 text-sm text-gray-700"},Ca={class:"px-4 py-2 text-sm text-gray-700"},Sa={class:"px-4 py-2 text-sm text-gray-700"},Da={class:"px-4 py-2 text-sm text-gray-900"},Ma={class:"px-4 py-2 text-sm text-gray-700"},$a={class:"px-4 py-2 text-sm text-gray-700"},Na={class:"px-4 py-2 text-sm text-gray-700"},Ea={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},La={class:"w-full max-w-lg rounded-lg bg-white shadow-lg"},Ia={class:"flex items-center justify-between border-b px-4 py-3"},Ua={key:0,class:"p-4 text-sm text-gray-700"},Ba={class:"font-medium mb-1"},Pa={class:"mb-2"},Aa={key:0,class:"mb-2"},Oa=["href"],Va={key:1,class:"prose max-w-none"},za=ae({__name:"Dashboard",setup(Fa){const p=c(null),x=c(!1),O=c(""),V=c(new Date),T=c("employee"),F=c([]),q=c(null),h=c(null),Q=c(!1),Tt=c([]),H=c([]),$=c(null),X=c(!1),j=c("dashboard"),R=c(""),Ct=c([]),Y=c(!1),b=c({workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}),D=c([]),vt=c(""),P=c(1),Z=c(10),tt=c("all"),et=k(()=>{const s=new Set;return(F.value||[]).forEach(t=>{const o=(t.status||"").toString().trim();o&&s.add(o)}),Array.from(s).sort((t,o)=>t.localeCompare(o))}),st=c("all"),at=c(""),ot=c(""),yt=k(()=>{const s=vt.value.trim().toLowerCase();let t=F.value;if(tt.value!=="all"){const o=tt.value.toLowerCase();t=t.filter(n=>(n.status||"").toLowerCase()===o)}if(st.value!=="all"){const o=st.value;t=t.filter(n=>(n.priority||"none").toLowerCase()===o)}if(at.value){const o=new Date(at.value).getTime();t=t.filter(n=>n.due_date?new Date(n.due_date).getTime()>=o:!1)}if(ot.value){const o=new Date(ot.value).getTime();t=t.filter(n=>n.due_date?new Date(n.due_date).getTime()<=o:!1)}return s?t.filter(o=>(o.title||"").toLowerCase().includes(s)):t}),nt=k(()=>Math.max(1,Math.ceil(yt.value.length/Z.value))),Ut=k(()=>{const t=(Math.min(P.value,nt.value)-1)*Z.value;return yt.value.slice(t,t+Z.value)}),N=s=>{const t=Math.max(1,Math.min(s,nt.value));P.value=t},lt=c([]),rt=c(!1),ht=async()=>{var s;rt.value=!0;try{const t=await y.get("/admin/analytics/activity-logs",{params:{limit:100}});lt.value=((s=t.data)==null?void 0:s.data)||[]}catch{lt.value=[]}finally{rt.value=!1}};let ft=null;const _=k(()=>{var s,t;return!!((s=p.value)!=null&&s.clock_in)&&!((t=p.value)!=null&&t.clock_out)}),C=k(()=>{var s,t;return!!((s=p.value)!=null&&s.break_start)&&!((t=p.value)!=null&&t.break_end)}),Bt=k(()=>{var s,t;return((s=p.value)==null?void 0:s.lunch_start)&&!((t=p.value)!=null&&t.lunch_end)}),E=s=>s?(typeof s=="string"?new Date(s):s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"--",it=(s,t)=>{if(!s||!t)return"--";const o=new Date(s),u=new Date(t).getTime()-o.getTime(),m=Math.floor(u/36e5),g=Math.floor(u%36e5/6e4),a=Math.floor(u%6e4/1e3);return`${m}h ${g}m ${a}s`},kt=k(()=>{const s=[];if(!p.value)return s;const t=p.value;return s.push({type:"Clock In",start:t.clock_in||null,end:null,duration:"--",status:t.clock_in?"Completed":"Not started"}),(t.break_start||t.break_end)&&s.push({type:"Break",start:t.break_start||null,end:t.break_end||null,duration:t.break_start&&t.break_end?it(t.break_start,t.break_end):t.break_start?"In progress":"--",status:t.break_start&&t.break_end?"Completed":t.break_start?"Active":"Scheduled"}),(t.lunch_start||t.lunch_end)&&s.push({type:"Lunch",start:t.lunch_start||null,end:t.lunch_end||null,duration:t.lunch_start&&t.lunch_end?it(t.lunch_start,t.lunch_end):t.lunch_start?"In progress":"--",status:t.lunch_start&&t.lunch_end?"Completed":t.lunch_start?"Active":"Scheduled"}),t.clock_out&&s.push({type:"Clock Out",start:t.clock_out||null,end:null,duration:"--",status:t.clock_out?"Completed":"Pending"}),s});oe(()=>{const s=new Date;R.value=s.toISOString().split("T")[0],G(),Pt(),L(),ut(),ft=window.setInterval(()=>{V.value=new Date},1e3)}),ne(()=>{ft&&window.clearInterval(ft)});const G=async()=>{try{const s=await y.get("/time-entries/current");p.value=s.data,qt()}catch(s){p.value=null,O.value="No entry today",console.error("Error fetching current entry:",s)}},Pt=async()=>{var s;try{const o=(((s=(await y.get("/admin/users")).data)==null?void 0:s.data)||[]).find(n=>(n==null?void 0:n.id)&&(n==null?void 0:n.email));o!=null&&o.role&&(T.value=o.role),T.value==="admin"&&(await ht(),setInterval(()=>{ht()},5e3))}catch{}},L=async()=>{try{const s=await y.get("/my/tasks");F.value=s.data}catch{}},At=async()=>{var s,t,o;try{const u=((s=(await y.post("/my/clickup/sync-tasks")).data)==null?void 0:s.count)??0;await L(),alert(`Synced ${u} task(s) from ClickUp.`)}catch(n){alert(((o=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:o.error)||"Failed to sync tasks from ClickUp")}},bt=async()=>{try{await Zt()}catch{}},_t=async()=>{try{await Gt()}catch{}},St=async()=>{try{await Jt()}catch{}},dt=async()=>{try{await Kt()}catch{}},ut=async()=>{try{const s=await y.get("/tasks/today-entries");H.value=s.data||[];const t=(H.value||[]).find(o=>o.clock_in&&!o.clock_out);h.value=t?t.task_id:null}catch{H.value=[]}},Dt=async s=>{try{const t=await y.get(`/tasks/${s}/sync`);$.value=t.data,X.value=!0}catch{X.value=!1}},Ot=async()=>{if(C.value){await dt();return}_.value?await _t():await bt()},Vt=async()=>{if(h.value){alert("Pause or stop the running task first.");return}C.value?await dt():(_.value||await bt(),await St())},z=s=>s<10?`0${s}`:`${s}`,Ft=k(()=>{var s,t;return C.value&&((s=p.value)!=null&&s.break_start)?new Date(p.value.break_start):_.value&&((t=p.value)!=null&&t.clock_in)?new Date(p.value.clock_in):null}),Ht=k(()=>{const s=H.value.find(t=>t.clock_in&&!t.clock_out);return s?new Date(s.clock_in):null}),jt=k(()=>{const s=Ft.value;if(!s)return"00:00:00";const t=V.value.getTime()-s.getTime(),o=Math.max(0,Math.floor(t/1e3)),n=Math.floor(o/3600),u=Math.floor(o%3600/60),m=o%60;return`${z(n)}:${z(u)}:${z(m)}`}),Rt=k(()=>{const s=Ht.value;if(!s)return"00:00:00";const t=V.value.getTime()-s.getTime(),o=Math.max(0,Math.floor(t/1e3)),n=Math.floor(o/3600),u=Math.floor(o%3600/60),m=o%60;return`${z(n)}:${z(u)}:${z(m)}`}),zt=k(()=>{const s=p.value;if(!s||!s.clock_in)return 0;const t=new Date(s.clock_in),o=s.clock_out?new Date(s.clock_out):V.value;let n=Math.max(0,Math.floor((o.getTime()-t.getTime())/6e4));if(s.break_start&&s.break_end){const u=new Date(s.break_start),m=new Date(s.break_end);n-=Math.max(0,Math.floor((m.getTime()-u.getTime())/6e4))}else if(s.break_start&&!s.break_end){const u=new Date(s.break_start);n-=Math.max(0,Math.floor((V.value.getTime()-u.getTime())/6e4))}if(s.lunch_start&&s.lunch_end){const u=new Date(s.lunch_start),m=new Date(s.lunch_end);n-=Math.max(0,Math.floor((m.getTime()-u.getTime())/6e4))}else if(s.lunch_start&&!s.lunch_end){const u=new Date(s.lunch_start);n-=Math.max(0,Math.floor((V.value.getTime()-u.getTime())/6e4))}return(Math.max(0,n)/60).toFixed(2)}),Wt=async()=>{try{Q.value=!0,Tt.value=[p.value].filter(Boolean)}catch{Q.value=!0,Tt.value=[]}},qt=()=>{!p.value||!p.value.clock_in?O.value="Not clocked in":p.value.clock_out?O.value="Clocked out":Bt.value?O.value="On lunch":C.value?O.value="On break":O.value="Clocked in"},Zt=async s=>{var t,o;x.value=!0;try{const n={};await y.post("/time-entries/clock-in",n),await G(),await L()}catch(n){alert(((o=(t=n.response)==null?void 0:t.data)==null?void 0:o.message)||"Error clocking in")}finally{x.value=!1}},Gt=async()=>{var s,t;x.value=!0;try{if(h.value){alert("Pause or stop the running task first."),x.value=!1;return}await y.post("/time-entries/clock-out"),await G(),await L()}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error clocking out")}finally{x.value=!1}},Jt=async()=>{var s,t;x.value=!0;try{await y.post("/time-entries/break-start"),await G(),await L()}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error starting break")}finally{x.value=!1}},Kt=async()=>{var s,t;x.value=!0;try{await y.post("/time-entries/break-end"),await G(),await L()}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error ending break")}finally{x.value=!1}},wt=async s=>{var t,o;if(!_.value){alert("Please Time In first before starting a task.");return}if(C.value&&await dt(),h.value&&h.value!==s)try{await y.post("/tasks/stop")}catch{}try{await y.post("/tasks/start",{task_id:s}),h.value=s,await ut()}catch(n){alert(((o=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:o.message)||"Failed to start task")}},Mt=async()=>{try{await y.post("/tasks/stop")}catch{}h.value=null,await ut()},Qt=async()=>{if(_.value){try{await y.post("/tasks/stop")}catch{await _t()}h.value=null,await ut()}},Xt=async(s,t)=>{var n,u;if(!t)return;if(!confirm(`Are you sure you want to set this task to "${t}"?`)){await L();return}x.value=!0;try{await y.post(`/tasks/${s}/status`,{status:t}),await L()}catch(m){alert(((u=(n=m==null?void 0:m.response)==null?void 0:n.data)==null?void 0:u.message)||"Failed to update task status")}finally{x.value=!1}},$t=async()=>{var s,t;if(R.value){Y.value=!0;try{const o=await y.get("/my/time-entries",{params:{start_date:R.value,end_date:R.value}}),n=((s=o.data)==null?void 0:s.entries)||[];Ct.value=n,D.value=[];let u=0,m=0,g=null,a=null;if(n.forEach(l=>{const f=W(l.clock_in),M=W(l.clock_out);f&&(!g||f<g)&&(g=f,a=l.clock_in_formatted||l.clock_in);const I=l.task&&(l.task.title||l.task.name);if(f&&M&&!I){const A=Math.max(0,Math.floor((M.getTime()-f.getTime())/1e3));u+=A;const mt=W(l.break_start),Et=W(l.break_end);let xt=0;mt&&Et&&(xt=Math.max(0,Math.floor((Et.getTime()-mt.getTime())/1e3)),m+=xt);const se=Math.max(0,A-xt);D.value.push({name:"Work Hours",start:l.clock_in_formatted||l.clock_in,end:l.clock_out_formatted||l.clock_out,durationSeconds:se,breakDurationSeconds:xt,notes:"-"})}if(I){const A=l.task.title||l.task.name;if(f&&M){const mt=Math.max(0,Math.floor((M.getTime()-f.getTime())/1e3));D.value.push({name:A,start:l.clock_in_formatted||l.clock_in,end:l.clock_out_formatted||l.clock_out,durationSeconds:mt,breakDurationSeconds:0,notes:"-"})}}const K=W(l.break_start),ct=W(l.break_end);if(K&&ct){const A=Math.max(0,Math.floor((ct.getTime()-K.getTime())/1e3));D.value.push({name:"Break",start:l.break_start_formatted||l.break_start,end:l.break_end_formatted||l.break_end,durationSeconds:A,breakDurationSeconds:A,notes:"-"})}}),D.value.sort((l,f)=>{const M=new Date(l.start).getTime(),I=new Date(f.start).getTime();return(isNaN(I)?0:I)-(isNaN(M)?0:M)}),(t=o.data)!=null&&t.daily_totals)b.value={workSeconds:o.data.daily_totals.work_seconds||0,breakSeconds:o.data.daily_totals.break_seconds||0,lunchSeconds:o.data.daily_totals.lunch_seconds||0,tasksCount:o.data.daily_totals.tasks_count||0,status:o.data.daily_totals.status||"No Entry",overtimeSeconds:o.data.daily_totals.overtime_seconds||0};else{const f=Math.max(0,u-m),M=Math.max(0,f-28800);let I="No Entry";if(g){const K=(g.getUTCHours()+8)%24,ct=g.getUTCMinutes();I=K<8||K===8&&ct<=30?"Perfect":"Late"}b.value={workSeconds:f,breakSeconds:m,lunchSeconds:0,tasksCount:D.value.length,status:I,overtimeSeconds:M}}}catch(o){console.error("Error loading time entries",o),Ct.value=[],D.value=[],b.value={workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}}finally{Y.value=!1}}},W=s=>{if(!s)return null;const t=s.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?/);if(t){const u=Number(t[1]),m=Number(t[2])-1,g=Number(t[3]),a=Number(t[4]),l=Number(t[5]),f=Number(t[6]||"0");return new Date(Date.UTC(u,m,g,a-8,l,f))}const o=s.includes("T")?s:s.replace(" ","T"),n=new Date(o);return isNaN(n.getTime())?null:n},Nt=s=>{if(!s)return"--";try{const o=new Date(s);if(!isNaN(o.getTime()))return o.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Manila"})}catch{}const t=s.match(/\b(\d{1,2}):(\d{2})(?::(\d{2}))?/);if(t){let o=parseInt(t[1],10);const n=t[2],u=o>=12?"PM":"AM";return o=o%12,o===0&&(o=12),`${o}:${n} ${u}`}return"--"},J=s=>{const t=typeof s=="number"&&isFinite(s)?Math.max(0,Math.floor(s)):0,o=Math.floor(t/3600),n=Math.floor(t%3600/60),u=t%60,m=g=>g<10?`0${g}`:`${g}`;return`${m(o)}:${m(n)}:${m(u)}`},Yt=s=>{if(!s)return"";const t=s.toLowerCase().trim();return t==="to do"||t==="todo"?"text-gray-700":t.includes("complete")||t.includes("done")||t.includes("finished")?"bg-green-100 text-green-800":t.includes("progress")||t.includes("doing")||t.includes("in progress")||t.includes("working")?"bg-blue-100 text-blue-800":t.includes("pending")||t.includes("waiting")?"bg-yellow-100 text-yellow-800":t.includes("blocked")||t.includes("stuck")?"bg-red-100 text-red-800":t.includes("review")||t.includes("testing")?"bg-purple-100 text-purple-800":t.includes("cancel")||t.includes("closed")?"bg-gray-100 text-gray-800":"bg-indigo-100 text-indigo-800"},te=s=>{if(!s)return"bg-gray-100 text-gray-800";const t=s.toLowerCase().trim();return t==="urgent"||t==="critical"?"bg-red-100 text-red-800":t==="high"?"bg-orange-100 text-orange-800":t==="normal"||t==="medium"?"bg-yellow-100 text-yellow-800":t==="low"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"},ee=s=>{if(!s)return!1;const t=s.toLowerCase().trim();return t!=="to do"&&t!=="todo"};return(s,t)=>(i(),r(w,null,[Lt(le(re),{title:"Dashboard"}),Lt(de,null,{header:It(()=>[...t[24]||(t[24]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Time Tracker Dashboard ",-1)])]),default:It(()=>{var o,n,u,m,g;return[e("div",ue,[e("div",ce,[T.value!=="admin"?(i(),r("div",me,[e("nav",xe,[e("button",{onClick:t[0]||(t[0]=a=>j.value="dashboard"),class:U(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",j.value==="dashboard"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Dashboard ",2),e("button",{onClick:t[1]||(t[1]=a=>{j.value="time-entries",$t()}),class:U(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",j.value==="time-entries"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Time Entries ",2)])])):v("",!0),j.value==="dashboard"||T.value==="admin"?(i(),r("div",pe,[T.value!=="admin"?(i(),r("div",ge,[e("div",ve,[e("div",ye,[t[25]||(t[25]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Work Day Timer",-1)),e("p",he,d(jt.value),1),e("p",fe,d(C.value?"On Break":_.value?"Working":"Idle"),1),e("div",ke,[e("button",{onClick:Ot,disabled:x.value,class:U(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",_.value?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"])},d(_.value?"Time Out":"Time In"),11,be),e("button",{onClick:Vt,disabled:x.value,class:U(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",C.value?"bg-orange-600 hover:bg-orange-700":"bg-yellow-600 hover:bg-yellow-700"])},d(C.value?"Break Out":"Break In"),11,_e)])])]),e("div",we,[e("div",Te,[t[27]||(t[27]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Running Task",-1)),h.value?(i(),r("div",Ce,[e("button",{onClick:t[2]||(t[2]=a=>Dt(h.value)),class:"text-indigo-600 hover:underline text-sm"},d(((o=F.value.find(a=>a.id===h.value))==null?void 0:o.title)||"#"+h.value),1),e("p",Se,d(Rt.value),1),e("div",De,[e("button",{onClick:t[3]||(t[3]=a=>Mt()),disabled:x.value,class:"rounded-md bg-yellow-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-yellow-700"},"Pause",8,Me)])])):(i(),r("div",$e,[e("div",Ne,[B(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>q.value=a),class:"w-full rounded-md border-gray-300 text-sm shadow-sm"},[t[26]||(t[26]=e("option",{value:null},"Select a task",-1)),(i(!0),r(w,null,S(F.value,a=>(i(),r("option",{key:a.id,value:a.id},d(a.title),9,Ee))),128))],512),[[pt,q.value]]),e("button",{onClick:t[5]||(t[5]=a=>q.value?wt(q.value):void 0),disabled:x.value||!q.value,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700 disabled:opacity-50"},"Start",8,Le)]),F.value.length?v("",!0):(i(),r("p",Ie,"No tasks available."))]))])]),e("div",Ue,[e("div",Be,[t[30]||(t[30]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Daily Logs",-1)),e("p",Pe,[ie(d(zt.value),1),t[28]||(t[28]=e("span",{class:"text-sm font-normal text-gray-500"}," / 8 Hours",-1))]),e("div",{class:"mt-4 flex space-x-2"},[e("button",{onClick:Wt,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-700"},"Daily Logs"),t[29]||(t[29]=e("button",{class:"rounded-md bg-yellow-500 px-3 py-1.5 text-xs font-semibold text-white hover:bg-yellow-600"},"Send Report",-1))])])])])):v("",!0),T.value==="admin"?(i(),r("div",Ae,[e("div",Oe,[e("div",Ve,[t[31]||(t[31]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Real-Time Activity Log",-1)),e("button",{onClick:ht,disabled:rt.value,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-500"},"Refresh",8,Fe)]),e("div",He,[e("table",je,[t[33]||(t[33]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"User"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Action"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Description"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Time")])],-1)),e("tbody",Re,[(i(!0),r(w,null,S(lt.value,a=>{var l;return i(),r("tr",{key:a.id},[e("td",ze,d(((l=a.user)==null?void 0:l.name)||"Unknown"),1),e("td",We,d(a.action),1),e("td",qe,d(a.description),1),e("td",Ze,d(new Date(a.created_at).toLocaleString()),1)])}),128)),lt.value.length===0&&!rt.value?(i(),r("tr",Ge,[...t[32]||(t[32]=[e("td",{colspan:"4",class:"px-4 py-4 text-center text-sm text-gray-500"},"No activity logs found",-1)])])):v("",!0)])])])])])):v("",!0),T.value!=="admin"?(i(),r("div",Je,[e("div",Ke,[e("div",Qe,[t[37]||(t[37]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"My Tasks",-1)),e("div",Xe,[e("button",{onClick:At,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700"},"Refresh from ClickUp"),B(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>vt.value=a),onInput:t[7]||(t[7]=a=>N(1)),type:"text",placeholder:"Search tasks",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[gt,vt.value]]),B(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>tt.value=a),onChange:t[9]||(t[9]=a=>N(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[t[34]||(t[34]=e("option",{value:"all"},"All",-1)),(i(!0),r(w,null,S(et.value,a=>(i(),r("option",{key:a,value:a},d(a),9,Ye))),128))],544),[[pt,tt.value]]),B(e("select",{"onUpdate:modelValue":t[10]||(t[10]=a=>st.value=a),onChange:t[11]||(t[11]=a=>N(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...t[35]||(t[35]=[e("option",{value:"all"},"All priorities",-1),e("option",{value:"urgent"},"Urgent",-1),e("option",{value:"high"},"High",-1),e("option",{value:"normal"},"Normal",-1),e("option",{value:"low"},"Low",-1),e("option",{value:"none"},"None",-1)])],544),[[pt,st.value]]),B(e("input",{"onUpdate:modelValue":t[12]||(t[12]=a=>at.value=a),onChange:t[13]||(t[13]=a=>N(1)),type:"date",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[gt,at.value]]),B(e("input",{"onUpdate:modelValue":t[14]||(t[14]=a=>ot.value=a),onChange:t[15]||(t[15]=a=>N(1)),type:"date",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[gt,ot.value]]),B(e("select",{"onUpdate:modelValue":t[16]||(t[16]=a=>Z.value=a),onChange:t[17]||(t[17]=a=>N(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...t[36]||(t[36]=[e("option",{value:5},"5",-1),e("option",{value:10},"10",-1),e("option",{value:20},"20",-1),e("option",{value:50},"50",-1)])],544),[[pt,Z.value,void 0,{number:!0}]])])]),e("div",ts,[e("table",es,[t[41]||(t[41]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Due Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Priority"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Actions")])],-1)),e("tbody",ss,[(i(!0),r(w,null,S(Ut.value,a=>(i(),r("tr",{key:a.id},[e("td",as,[e("button",{onClick:l=>Dt(a.id),class:"hover:underline"},d(a.title),9,os)]),e("td",ns,[ee(a.status)?(i(),r("span",{key:0,class:U(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold",Yt(a.status)])},d(a.status||"â€”"),3)):(i(),r("span",ls,d(a.status||"â€”"),1))]),e("td",rs,d(a.due_date?new Date(a.due_date).toLocaleDateString():"--"),1),e("td",is,[e("span",{class:U(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold",te(a.priority||null)])},d(a.priority||"None"),3)]),e("td",ds,[e("div",us,[e("button",{onClick:l=>h.value===a.id?Mt():wt(a.id),disabled:x.value,class:U(["rounded-full p-2 text-white",h.value===a.id?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"]),"aria-label":h.value===a.id?"Pause":"Play"},[h.value!==a.id?(i(),r("svg",ms,[...t[38]||(t[38]=[e("path",{d:"M8 5v14l11-7z"},null,-1)])])):(i(),r("svg",xs,[...t[39]||(t[39]=[e("path",{d:"M6 5h4v14H6zM14 5h4v14h-4z"},null,-1)])]))],10,cs),e("select",{value:a.status||"",onChange:l=>Xt(a.id,l.target.value),class:"rounded-md border-gray-300 text-xs shadow-sm"},[t[40]||(t[40]=e("option",{disabled:"",value:""},"Set statusâ€¦",-1)),(i(!0),r(w,null,S(et.value,l=>(i(),r("option",{key:l+a.id,value:l},d(l),9,gs))),128)),et.value.includes("complete")?v("",!0):(i(),r("option",vs,"complete")),et.value.includes("done")?v("",!0):(i(),r("option",ys,"done"))],40,ps)])])]))),128))])]),e("div",hs,[e("div",null," Page "+d(P.value)+" of "+d(nt.value)+" â€¢ "+d(yt.value.length)+" total ",1),e("div",fs,[e("button",{onClick:t[18]||(t[18]=a=>N(P.value-1)),disabled:P.value<=1,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Prev",8,ks),e("button",{onClick:t[19]||(t[19]=a=>N(P.value+1)),disabled:P.value>=nt.value,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Next",8,bs)])])])])])):v("",!0),e("div",_s,[e("div",ws,[t[43]||(t[43]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Today's Time Events",-1)),kt.value.length===0?(i(),r("div",Ts," No time entries recorded today. Clock in to start tracking time. ")):(i(),r("div",Cs,[e("table",Ss,[t[42]||(t[42]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Event Type "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Start Time "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," End Time "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Duration "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Status ")])],-1)),e("tbody",Ds,[(i(!0),r(w,null,S(kt.value,(a,l)=>(i(),r("tr",{key:l},[e("td",Ms,d(a.type),1),e("td",$s,d(E(a.start)),1),e("td",Ns,d(E(a.end)),1),e("td",Es,d(a.duration),1),e("td",Ls,[T.value!=="admin"?(i(),r("div",Is,[e("button",{onClick:bt,disabled:x.value||_.value,class:"rounded-md bg-green-600 px-2 py-1 text-xs font-semibold text-white hover:bg-green-700"},"Time In",8,Us),e("button",{onClick:St,disabled:x.value||!_.value||C.value,class:"rounded-md bg-yellow-600 px-2 py-1 text-xs font-semibold text-white hover:bg-yellow-700"},"Break In",8,Bs),e("button",{onClick:dt,disabled:x.value||!C.value,class:"rounded-md bg-orange-600 px-2 py-1 text-xs font-semibold text-white hover:bg-orange-700"},"Break Out",8,Ps),e("button",{onClick:_t,disabled:x.value||!_.value,class:"rounded-md bg-red-600 px-2 py-1 text-xs font-semibold text-white hover:bg-red-700"},"Time Out",8,As)])):(i(),r("span",Os,"Admin view"))])]))),128)),(i(!0),r(w,null,S(H.value,a=>{var l;return i(),r("tr",{key:`task-${a.id}`},[e("td",Vs," Task: "+d(((l=a.task)==null?void 0:l.title)||`#${a.task_id}`),1),e("td",Fs,d(E(a.clock_in)),1),e("td",Hs,d(E(a.clock_out)),1),e("td",js,d(a.clock_in&&a.clock_out?it(a.clock_in,a.clock_out):a.clock_in?"In progress":"--"),1),e("td",Rs,[T.value!=="admin"?(i(),r("div",zs,[e("button",{onClick:f=>wt(a.task_id),disabled:x.value,class:"rounded-md bg-green-600 px-2 py-1 text-xs font-semibold text-white hover:bg-green-700"},"Play",8,Ws),e("button",{onClick:t[20]||(t[20]=f=>Qt()),disabled:x.value,class:"rounded-md bg-red-600 px-2 py-1 text-xs font-semibold text-white hover:bg-red-700"},"Stop",8,qs)])):(i(),r("span",Zs,"Admin view"))])])}),128))])])]))])])])):v("",!0),j.value==="time-entries"&&T.value!=="admin"?(i(),r("div",Gs,[e("div",Js,[e("div",Ks,[e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),B(e("input",{"onUpdate:modelValue":t[21]||(t[21]=a=>R.value=a),onChange:$t,type:"date",class:"w-full rounded-md border-gray-300 shadow-sm"},null,544),[[gt,R.value]])])])]),e("div",Qs,[t[50]||(t[50]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Daily Summary",-1)),e("div",Xs,[e("div",null,[t[45]||(t[45]=e("div",{class:"text-gray-500"},"ðŸ•’ Time In Hours",-1)),e("div",Ys,d(J(b.value.workSeconds)),1)]),e("div",null,[t[46]||(t[46]=e("div",{class:"text-gray-500"},"â˜• Total Breaks",-1)),e("div",ta,d(J(b.value.breakSeconds)),1)]),e("div",null,[t[47]||(t[47]=e("div",{class:"text-gray-500"},"ðŸ“‹ Entries",-1)),e("div",ea,d(b.value.tasksCount),1)]),e("div",null,[t[48]||(t[48]=e("div",{class:"text-gray-500"},"â° Status",-1)),e("div",{class:U(["font-semibold",{"text-green-700":b.value.status==="Perfect","text-yellow-700":b.value.status==="Late","text-gray-700":b.value.status==="No Entry"}])},d(b.value.status),3)]),e("div",null,[t[49]||(t[49]=e("div",{class:"text-gray-500"},"âš¡ Overtime",-1)),e("div",sa,d(J(b.value.overtimeSeconds)),1)])])]),e("div",aa,[e("div",oa,[e("table",na,[t[52]||(t[52]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),e("tbody",la,[(i(!0),r(w,null,S(D.value,(a,l)=>(i(),r("tr",{key:l},[e("td",ra,d(a.name),1),e("td",ia,d(Nt(a.start)),1),e("td",da,d(Nt(a.end)),1),e("td",ua,d(J(a.durationSeconds)),1),e("td",ca,d(J(a.breakDurationSeconds||0)),1),e("td",ma,d(a.notes||"-"),1)]))),128)),D.value.length===0&&!Y.value?(i(),r("tr",xa,[...t[51]||(t[51]=[e("td",{colspan:"6",class:"px-4 py-4 text-center text-sm text-gray-500"},"No entries for selected day",-1)])])):v("",!0)])])]),Y.value?(i(),r("div",pa,[...t[53]||(t[53]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),e("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):v("",!0)])])):v("",!0)]),Q.value?(i(),r("div",ga,[e("div",va,[e("div",ya,[t[54]||(t[54]=e("h4",{class:"text-md font-semibold"},"Daily Logs",-1)),e("button",{onClick:t[22]||(t[22]=a=>Q.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs"},"Close")]),e("div",ha,[p.value?(i(),r("div",ka,[e("table",ba,[t[55]||(t[55]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Event"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration")])],-1)),e("tbody",_a,[(i(!0),r(w,null,S(kt.value,(a,l)=>(i(),r("tr",{key:l},[e("td",wa,d(a.type),1),e("td",Ta,d(E(a.start)),1),e("td",Ca,d(E(a.end)),1),e("td",Sa,d(a.duration),1)]))),128)),(i(!0),r(w,null,S(H.value,a=>{var l;return i(),r("tr",{key:`modal-task-${a.id}`},[e("td",Da,"Task: "+d(((l=a.task)==null?void 0:l.title)||`#${a.task_id}`),1),e("td",Ma,d(E(a.clock_in)),1),e("td",$a,d(E(a.clock_out)),1),e("td",Na,d(a.clock_in&&a.clock_out?it(a.clock_in,a.clock_out):a.clock_in?"In progress":"--"),1)])}),128))])])])):(i(),r("div",fa,"No entry today."))])])])):v("",!0),X.value?(i(),r("div",Ea,[e("div",La,[e("div",Ia,[t[56]||(t[56]=e("h4",{class:"text-md font-semibold"},"Task Details",-1)),e("button",{onClick:t[23]||(t[23]=a=>X.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs"},"Close")]),$.value?(i(),r("div",Ua,[e("p",Ba,d((n=$.value.task)==null?void 0:n.title),1),e("p",Pa,"Status: "+d((u=$.value.task)==null?void 0:u.status),1),(m=$.value.clickup)!=null&&m.url?(i(),r("p",Aa,[e("a",{href:$.value.clickup.url,target:"_blank",class:"text-indigo-600 hover:underline"},"Open in ClickUp",8,Oa)])):v("",!0),(g=$.value.clickup)!=null&&g.text_content?(i(),r("div",Va,d($.value.clickup.text_content),1)):v("",!0)])):v("",!0)])])):v("",!0)])]}),_:1})],64))}});export{za as default};
