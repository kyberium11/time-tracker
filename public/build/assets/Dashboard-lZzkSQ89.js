import{d as ht,r as p,q as k,o as _t,z as kt,c as o,a as Z,u as ft,h as bt,w as tt,b as e,e as _,f as n,t as i,n as J,g as wt,F as w,i as C,v as Tt,k as Ct}from"./app-BUJ_t-Vl.js";import{_ as Dt}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-CI04yB2T.js";import{a as m}from"./api-Vft4kN8O.js";const Mt={class:"py-12"},$t={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},It={key:0,class:"mb-6 grid gap-4 md:grid-cols-3"},St={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Bt={class:"px-4 py-5 sm:p-6"},Et={class:"mt-2 text-3xl font-bold text-gray-900"},Lt={class:"text-xs text-gray-500"},Ot={class:"mt-4 flex flex-wrap gap-2"},At=["disabled"],Nt=["disabled"],Pt={class:"overflow-hidden bg-white shadow sm:rounded-lg"},zt={class:"px-4 py-5 sm:p-6"},Ut={key:0,class:"mt-2"},jt={class:"text-2xl font-bold text-gray-900 mt-1"},Rt={class:"mt-3"},Vt=["disabled"],Ft={key:1,class:"mt-2"},Ht={class:"flex items-center gap-2"},Wt=["value"],qt=["disabled"],Gt={key:0,class:"text-sm text-gray-500 mt-2"},Jt={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Kt={class:"px-4 py-5 sm:p-6"},Qt={class:"mt-2 text-3xl font-bold text-gray-900"},Xt={key:1,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},Yt={class:"px-4 py-5 sm:p-6"},Zt={class:"flex items-center justify-between mb-4"},te=["disabled"],ee={class:"overflow-x-auto"},se={class:"min-w-full divide-y divide-gray-200"},ae={class:"divide-y divide-gray-200 bg-white"},oe={class:"px-4 py-4 text-sm text-gray-900"},ne={class:"px-4 py-4 text-sm text-gray-500"},le={class:"px-4 py-4 text-sm text-gray-500"},ie={class:"px-4 py-4 text-sm text-gray-500"},re={key:0},de={key:2,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},ce={class:"px-4 py-5 sm:p-6"},ue={class:"overflow-x-auto"},xe={class:"min-w-full divide-y divide-gray-200"},pe={class:"divide-y divide-gray-200 bg-white"},ye={class:"whitespace-nowrap px-6 py-4 text-sm text-indigo-600"},me=["onClick"],ve={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},ge={class:"flex items-center space-x-2"},he=["onClick","disabled","aria-label"],_e={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},ke={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},fe={class:"overflow-hidden bg-white shadow sm:rounded-lg"},be={class:"px-4 py-5 sm:p-6"},we={key:0,class:"text-center py-8 text-gray-500"},Te={key:1,class:"overflow-x-auto"},Ce={class:"min-w-full divide-y divide-gray-200"},De={class:"divide-y divide-gray-200 bg-white"},Me={class:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900"},$e={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Ie={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Se={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Be={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Ee={key:0,class:"flex items-center space-x-2"},Le=["disabled"],Oe=["disabled"],Ae=["disabled"],Ne=["disabled"],Pe={key:1,class:"text-xs text-gray-400"},ze={class:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900"},Ue={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},je={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Re={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Ve={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Fe={key:0,class:"flex items-center space-x-2"},He=["onClick","disabled"],We=["disabled"],qe={key:1,class:"text-xs text-gray-400"},Ge={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Je={class:"w-full max-w-2xl rounded-lg bg-white shadow-lg"},Ke={class:"flex items-center justify-between border-b px-4 py-3"},Qe={class:"p-4"},Xe={key:0,class:"text-gray-500 text-sm"},Ye={key:1,class:"overflow-x-auto"},Ze={class:"min-w-full divide-y divide-gray-200"},ts={class:"divide-y divide-gray-200 bg-white"},es={class:"px-4 py-2 text-sm text-gray-900"},ss={class:"px-4 py-2 text-sm text-gray-700"},as={class:"px-4 py-2 text-sm text-gray-700"},os={class:"px-4 py-2 text-sm text-gray-700"},ns={class:"px-4 py-2 text-sm text-gray-900"},ls={class:"px-4 py-2 text-sm text-gray-700"},is={class:"px-4 py-2 text-sm text-gray-700"},rs={class:"px-4 py-2 text-sm text-gray-700"},ds={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},cs={class:"w-full max-w-lg rounded-lg bg-white shadow-lg"},us={class:"flex items-center justify-between border-b px-4 py-3"},xs={key:0,class:"p-4 text-sm text-gray-700"},ps={class:"font-medium mb-1"},ys={class:"mb-2"},ms={key:0,class:"mb-2"},vs=["href"],gs={key:1,class:"prose max-w-none"},bs=ht({__name:"Dashboard",setup(hs){const d=p(null),c=p(!1),D=p(""),M=p(new Date),T=p("employee"),S=p([]),B=p(null),x=p(null),O=p(!1),K=p([]),$=p([]),f=p(null),A=p(!1),N=p([]),P=p(!1),V=async()=>{var s;P.value=!0;try{const t=await m.get("/admin/analytics/activity-logs",{params:{limit:100}});N.value=((s=t.data)==null?void 0:s.data)||[]}catch{N.value=[]}finally{P.value=!1}};let F=null;const g=k(()=>{var s,t;return!!((s=d.value)!=null&&s.clock_in)&&!((t=d.value)!=null&&t.clock_out)}),h=k(()=>{var s,t;return!!((s=d.value)!=null&&s.break_start)&&!((t=d.value)!=null&&t.break_end)}),et=k(()=>{var s,t;return((s=d.value)==null?void 0:s.lunch_start)&&!((t=d.value)!=null&&t.lunch_end)}),b=s=>s?(typeof s=="string"?new Date(s):s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"--",z=(s,t)=>{if(!s||!t)return"--";const l=new Date(s),u=new Date(t).getTime()-l.getTime(),v=Math.floor(u/36e5),R=Math.floor(u%36e5/6e4),a=Math.floor(u%6e4/1e3);return`${v}h ${R}m ${a}s`},H=k(()=>{const s=[];if(!d.value)return s;const t=d.value;return s.push({type:"Clock In",start:t.clock_in||null,end:null,duration:"--",status:t.clock_in?"Completed":"Not started"}),(t.break_start||t.break_end)&&s.push({type:"Break",start:t.break_start||null,end:t.break_end||null,duration:t.break_start&&t.break_end?z(t.break_start,t.break_end):t.break_start?"In progress":"--",status:t.break_start&&t.break_end?"Completed":t.break_start?"Active":"Scheduled"}),(t.lunch_start||t.lunch_end)&&s.push({type:"Lunch",start:t.lunch_start||null,end:t.lunch_end||null,duration:t.lunch_start&&t.lunch_end?z(t.lunch_start,t.lunch_end):t.lunch_start?"In progress":"--",status:t.lunch_start&&t.lunch_end?"Completed":t.lunch_start?"Active":"Scheduled"}),t.clock_out&&s.push({type:"Clock Out",start:t.clock_out||null,end:null,duration:"--",status:t.clock_out?"Completed":"Pending"}),s});_t(()=>{E(),st(),L(),j(),F=window.setInterval(()=>{M.value=new Date},1e3)}),kt(()=>{F&&window.clearInterval(F)});const E=async()=>{try{const s=await m.get("/time-entries/current");d.value=s.data,ut()}catch(s){d.value=null,D.value="No entry today",console.error("Error fetching current entry:",s)}},st=async()=>{var s;try{const l=(((s=(await m.get("/admin/users")).data)==null?void 0:s.data)||[]).find(r=>(r==null?void 0:r.id)&&(r==null?void 0:r.email));l!=null&&l.role&&(T.value=l.role),T.value==="admin"&&(await V(),setInterval(()=>{V()},5e3))}catch{}},L=async()=>{try{const s=await m.get("/my/tasks");S.value=s.data}catch{}},W=async()=>{try{await xt()}catch{}},q=async()=>{try{await pt()}catch{}},Q=async()=>{try{await yt()}catch{}},U=async()=>{try{await mt()}catch{}},j=async()=>{try{const s=await m.get("/tasks/today-entries");$.value=s.data||[];const t=($.value||[]).find(l=>l.clock_in&&!l.clock_out);x.value=t?t.task_id:null}catch{$.value=[]}},X=async s=>{try{const t=await m.get(`/tasks/${s}/sync`);f.value=t.data,A.value=!0}catch{A.value=!1}},at=async()=>{if(h.value){await U();return}g.value?await q():await W()},ot=async()=>{if(x.value){alert("Pause or stop the running task first.");return}h.value?await U():(g.value||await W(),await Q())},I=s=>s<10?`0${s}`:`${s}`,nt=k(()=>{var s,t;return h.value&&((s=d.value)!=null&&s.break_start)?new Date(d.value.break_start):g.value&&((t=d.value)!=null&&t.clock_in)?new Date(d.value.clock_in):null}),lt=k(()=>{const s=$.value.find(t=>t.clock_in&&!t.clock_out);return s?new Date(s.clock_in):null}),it=k(()=>{const s=nt.value;if(!s)return"00:00:00";const t=M.value.getTime()-s.getTime(),l=Math.max(0,Math.floor(t/1e3)),r=Math.floor(l/3600),u=Math.floor(l%3600/60),v=l%60;return`${I(r)}:${I(u)}:${I(v)}`}),rt=k(()=>{const s=lt.value;if(!s)return"00:00:00";const t=M.value.getTime()-s.getTime(),l=Math.max(0,Math.floor(t/1e3)),r=Math.floor(l/3600),u=Math.floor(l%3600/60),v=l%60;return`${I(r)}:${I(u)}:${I(v)}`}),dt=k(()=>{const s=d.value;if(!s||!s.clock_in)return 0;const t=new Date(s.clock_in),l=s.clock_out?new Date(s.clock_out):M.value;let r=Math.max(0,Math.floor((l.getTime()-t.getTime())/6e4));if(s.break_start&&s.break_end){const u=new Date(s.break_start),v=new Date(s.break_end);r-=Math.max(0,Math.floor((v.getTime()-u.getTime())/6e4))}else if(s.break_start&&!s.break_end){const u=new Date(s.break_start);r-=Math.max(0,Math.floor((M.value.getTime()-u.getTime())/6e4))}if(s.lunch_start&&s.lunch_end){const u=new Date(s.lunch_start),v=new Date(s.lunch_end);r-=Math.max(0,Math.floor((v.getTime()-u.getTime())/6e4))}else if(s.lunch_start&&!s.lunch_end){const u=new Date(s.lunch_start);r-=Math.max(0,Math.floor((M.value.getTime()-u.getTime())/6e4))}return(Math.max(0,r)/60).toFixed(2)}),ct=async()=>{try{O.value=!0,K.value=[d.value].filter(Boolean)}catch{O.value=!0,K.value=[]}},ut=()=>{!d.value||!d.value.clock_in?D.value="Not clocked in":d.value.clock_out?D.value="Clocked out":et.value?D.value="On lunch":h.value?D.value="On break":D.value="Clocked in"},xt=async s=>{var t,l;c.value=!0;try{const r={};await m.post("/time-entries/clock-in",r),await E(),await L()}catch(r){alert(((l=(t=r.response)==null?void 0:t.data)==null?void 0:l.message)||"Error clocking in")}finally{c.value=!1}},pt=async()=>{var s,t;c.value=!0;try{if(x.value){alert("Pause or stop the running task first."),c.value=!1;return}await m.post("/time-entries/clock-out"),await E(),await L()}catch(l){alert(((t=(s=l.response)==null?void 0:s.data)==null?void 0:t.message)||"Error clocking out")}finally{c.value=!1}},yt=async()=>{var s,t;c.value=!0;try{await m.post("/time-entries/break-start"),await E(),await L()}catch(l){alert(((t=(s=l.response)==null?void 0:s.data)==null?void 0:t.message)||"Error starting break")}finally{c.value=!1}},mt=async()=>{var s,t;c.value=!0;try{await m.post("/time-entries/break-end"),await E(),await L()}catch(l){alert(((t=(s=l.response)==null?void 0:s.data)==null?void 0:t.message)||"Error ending break")}finally{c.value=!1}},G=async s=>{var t,l;if(!g.value){alert("Please Time In first before starting a task.");return}if(h.value&&await U(),x.value&&x.value!==s)try{await m.post("/tasks/stop")}catch{}try{await m.post("/tasks/start",{task_id:s}),x.value=s,await j()}catch(r){alert(((l=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:l.message)||"Failed to start task")}},Y=async()=>{try{await m.post("/tasks/stop")}catch{}x.value=null,await j()},vt=async()=>{if(g.value){try{await m.post("/tasks/stop")}catch{await q()}x.value=null,await j()}};return(s,t)=>(n(),o(w,null,[Z(ft(bt),{title:"Dashboard"}),Z(Dt,null,{header:tt(()=>[...t[7]||(t[7]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Time Tracker Dashboard ",-1)])]),default:tt(()=>{var l,r,u,v,R;return[e("div",Mt,[e("div",$t,[T.value!=="admin"?(n(),o("div",It,[e("div",St,[e("div",Bt,[t[8]||(t[8]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Work Day Timer",-1)),e("p",Et,i(it.value),1),e("p",Lt,i(h.value?"On Break":g.value?"Working":"Idle"),1),e("div",Ot,[e("button",{onClick:at,disabled:c.value,class:J(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",g.value?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"])},i(g.value?"Time Out":"Time In"),11,At),e("button",{onClick:ot,disabled:c.value,class:J(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",h.value?"bg-orange-600 hover:bg-orange-700":"bg-yellow-600 hover:bg-yellow-700"])},i(h.value?"Break Out":"Break In"),11,Nt)])])]),e("div",Pt,[e("div",zt,[t[10]||(t[10]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Running Task",-1)),x.value?(n(),o("div",Ut,[e("button",{onClick:t[0]||(t[0]=a=>X(x.value)),class:"text-indigo-600 hover:underline text-sm"},i(((l=S.value.find(a=>a.id===x.value))==null?void 0:l.title)||"#"+x.value),1),e("p",jt,i(rt.value),1),e("div",Rt,[e("button",{onClick:t[1]||(t[1]=a=>Y()),disabled:c.value,class:"rounded-md bg-yellow-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-yellow-700"},"Pause",8,Vt)])])):(n(),o("div",Ft,[e("div",Ht,[wt(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>B.value=a),class:"rounded-md border-gray-300 text-sm shadow-sm"},[t[9]||(t[9]=e("option",{value:null},"Select a task",-1)),(n(!0),o(w,null,C(S.value,a=>(n(),o("option",{key:a.id,value:a.id},i(a.title),9,Wt))),128))],512),[[Tt,B.value]]),e("button",{onClick:t[3]||(t[3]=a=>B.value?G(B.value):void 0),disabled:c.value||!B.value,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700 disabled:opacity-50"},"Start",8,qt)]),S.value.length?_("",!0):(n(),o("p",Gt,"No tasks available."))]))])]),e("div",Jt,[e("div",Kt,[t[13]||(t[13]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Daily Logs",-1)),e("p",Qt,[Ct(i(dt.value),1),t[11]||(t[11]=e("span",{class:"text-sm font-normal text-gray-500"}," / 8 Hours",-1))]),e("div",{class:"mt-4 flex space-x-2"},[e("button",{onClick:ct,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-700"},"Daily Logs"),t[12]||(t[12]=e("button",{class:"rounded-md bg-yellow-500 px-3 py-1.5 text-xs font-semibold text-white hover:bg-yellow-600"},"Send Report",-1))])])])])):_("",!0),T.value==="admin"?(n(),o("div",Xt,[e("div",Yt,[e("div",Zt,[t[14]||(t[14]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Real-Time Activity Log",-1)),e("button",{onClick:V,disabled:P.value,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-500"},"Refresh",8,te)]),e("div",ee,[e("table",se,[t[16]||(t[16]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"User"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Action"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Description"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Time")])],-1)),e("tbody",ae,[(n(!0),o(w,null,C(N.value,a=>{var y;return n(),o("tr",{key:a.id},[e("td",oe,i(((y=a.user)==null?void 0:y.name)||"Unknown"),1),e("td",ne,i(a.action),1),e("td",le,i(a.description),1),e("td",ie,i(new Date(a.created_at).toLocaleString()),1)])}),128)),N.value.length===0&&!P.value?(n(),o("tr",re,[...t[15]||(t[15]=[e("td",{colspan:"4",class:"px-4 py-4 text-center text-sm text-gray-500"},"No activity logs found",-1)])])):_("",!0)])])])])])):_("",!0),T.value!=="admin"?(n(),o("div",de,[e("div",ce,[t[20]||(t[20]=e("div",{class:"flex items-center justify-between mb-3"},[e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"My Tasks")],-1)),e("div",ue,[e("table",xe,[t[19]||(t[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Actions")])],-1)),e("tbody",pe,[(n(!0),o(w,null,C(S.value,a=>(n(),o("tr",{key:a.id},[e("td",ye,[e("button",{onClick:y=>X(a.id),class:"hover:underline"},i(a.title),9,me)]),e("td",ve,[e("div",ge,[e("button",{onClick:y=>x.value===a.id?Y():G(a.id),disabled:c.value,class:J(["rounded-full p-2 text-white",x.value===a.id?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"]),"aria-label":x.value===a.id?"Pause":"Play"},[x.value!==a.id?(n(),o("svg",_e,[...t[17]||(t[17]=[e("path",{d:"M8 5v14l11-7z"},null,-1)])])):(n(),o("svg",ke,[...t[18]||(t[18]=[e("path",{d:"M6 5h4v14H6zM14 5h4v14h-4z"},null,-1)])]))],10,he)])])]))),128))])])])])])):_("",!0),e("div",fe,[e("div",be,[t[22]||(t[22]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Today's Time Events",-1)),H.value.length===0?(n(),o("div",we," No time entries recorded today. Clock in to start tracking time. ")):(n(),o("div",Te,[e("table",Ce,[t[21]||(t[21]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Event Type "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Start Time "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," End Time "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Duration "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Status ")])],-1)),e("tbody",De,[(n(!0),o(w,null,C(H.value,(a,y)=>(n(),o("tr",{key:y},[e("td",Me,i(a.type),1),e("td",$e,i(b(a.start)),1),e("td",Ie,i(b(a.end)),1),e("td",Se,i(a.duration),1),e("td",Be,[T.value!=="admin"?(n(),o("div",Ee,[e("button",{onClick:W,disabled:c.value||g.value,class:"rounded-md bg-green-600 px-2 py-1 text-xs font-semibold text-white hover:bg-green-700"},"Time In",8,Le),e("button",{onClick:Q,disabled:c.value||!g.value||h.value,class:"rounded-md bg-yellow-600 px-2 py-1 text-xs font-semibold text-white hover:bg-yellow-700"},"Break In",8,Oe),e("button",{onClick:U,disabled:c.value||!h.value,class:"rounded-md bg-orange-600 px-2 py-1 text-xs font-semibold text-white hover:bg-orange-700"},"Break Out",8,Ae),e("button",{onClick:q,disabled:c.value||!g.value,class:"rounded-md bg-red-600 px-2 py-1 text-xs font-semibold text-white hover:bg-red-700"},"Time Out",8,Ne)])):(n(),o("span",Pe,"Admin view"))])]))),128)),(n(!0),o(w,null,C($.value,a=>{var y;return n(),o("tr",{key:`task-${a.id}`},[e("td",ze," Task: "+i(((y=a.task)==null?void 0:y.title)||`#${a.task_id}`),1),e("td",Ue,i(b(a.clock_in)),1),e("td",je,i(b(a.clock_out)),1),e("td",Re,i(a.clock_in&&a.clock_out?z(a.clock_in,a.clock_out):a.clock_in?"In progress":"--"),1),e("td",Ve,[T.value!=="admin"?(n(),o("div",Fe,[e("button",{onClick:gt=>G(a.task_id),disabled:c.value,class:"rounded-md bg-green-600 px-2 py-1 text-xs font-semibold text-white hover:bg-green-700"},"Play",8,He),e("button",{onClick:t[4]||(t[4]=gt=>vt()),disabled:c.value,class:"rounded-md bg-red-600 px-2 py-1 text-xs font-semibold text-white hover:bg-red-700"},"Stop",8,We)])):(n(),o("span",qe,"Admin view"))])])}),128))])])]))])])]),O.value?(n(),o("div",Ge,[e("div",Je,[e("div",Ke,[t[23]||(t[23]=e("h4",{class:"text-md font-semibold"},"Daily Logs",-1)),e("button",{onClick:t[5]||(t[5]=a=>O.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs"},"Close")]),e("div",Qe,[d.value?(n(),o("div",Ye,[e("table",Ze,[t[24]||(t[24]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Event"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration")])],-1)),e("tbody",ts,[(n(!0),o(w,null,C(H.value,(a,y)=>(n(),o("tr",{key:y},[e("td",es,i(a.type),1),e("td",ss,i(b(a.start)),1),e("td",as,i(b(a.end)),1),e("td",os,i(a.duration),1)]))),128)),(n(!0),o(w,null,C($.value,a=>{var y;return n(),o("tr",{key:`modal-task-${a.id}`},[e("td",ns,"Task: "+i(((y=a.task)==null?void 0:y.title)||`#${a.task_id}`),1),e("td",ls,i(b(a.clock_in)),1),e("td",is,i(b(a.clock_out)),1),e("td",rs,i(a.clock_in&&a.clock_out?z(a.clock_in,a.clock_out):a.clock_in?"In progress":"--"),1)])}),128))])])])):(n(),o("div",Xe,"No entry today."))])])])):_("",!0),A.value?(n(),o("div",ds,[e("div",cs,[e("div",us,[t[25]||(t[25]=e("h4",{class:"text-md font-semibold"},"Task Details",-1)),e("button",{onClick:t[6]||(t[6]=a=>A.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs"},"Close")]),f.value?(n(),o("div",xs,[e("p",ps,i((r=f.value.task)==null?void 0:r.title),1),e("p",ys,"Status: "+i((u=f.value.task)==null?void 0:u.status),1),(v=f.value.clickup)!=null&&v.url?(n(),o("p",ms,[e("a",{href:f.value.clickup.url,target:"_blank",class:"text-indigo-600 hover:underline"},"Open in ClickUp",8,vs)])):_("",!0),(R=f.value.clickup)!=null&&R.text_content?(n(),o("div",gs,i(f.value.clickup.text_content),1)):_("",!0)])):_("",!0)])])):_("",!0)])]}),_:1})],64))}});export{bs as default};
