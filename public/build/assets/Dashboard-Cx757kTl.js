import{d as le,r as m,q as b,o as ie,z as re,A as de,c as d,a as Lt,u as ce,h as ue,w as Bt,b as e,e as v,f as c,n as E,t as r,k as kt,g as W,F as L,i as A,v as mt,j as xt}from"./app-D35D10-J.js";import{_ as me}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-DrfUz3yk.js";import{a as h}from"./api-Be1BQmd_.js";const xe={class:"py-12"},pe={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},ge={key:0,class:"border-b border-gray-200 mb-6"},ve={class:"-mb-px flex space-x-8"},ye={key:1},fe={key:0,class:"mb-6 grid gap-4 md:grid-cols-3"},he={class:"overflow-hidden bg-white shadow sm:rounded-lg"},ke={class:"px-4 py-5 sm:p-6"},be={class:"mt-2 text-3xl font-bold text-gray-900"},_e={class:"text-xs text-gray-500"},we={key:0,class:"mt-2"},Te={class:"text-sm text-gray-600"},De={class:"font-semibold"},Se={class:"mt-4 flex flex-wrap gap-2"},Me=["disabled"],Ce=["disabled"],$e={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Ne={class:"px-4 py-5 sm:p-6"},Ee={key:0,class:"mt-2"},Le={class:"text-2xl font-bold text-gray-900 mt-1"},Be={key:0,class:"text-sm font-normal text-gray-500"},Pe={class:"mt-3"},Ue=["disabled"],Ie={key:1,class:"mt-2"},He={class:"flex items-center gap-2 w-full"},We=["value"],Ae=["disabled"],je={key:0,class:"text-sm text-gray-500 mt-2"},Fe={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Oe={class:"px-4 py-5 sm:p-6"},Ve={class:"mt-2 text-3xl font-bold text-gray-900"},Re={key:1,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},ze={class:"px-4 py-5 sm:p-6"},qe={class:"flex items-center justify-between mb-4"},Ze=["disabled"],Ge={class:"overflow-x-auto"},Je={class:"min-w-full divide-y divide-gray-200"},Ke={class:"divide-y divide-gray-200 bg-white"},Qe={class:"px-4 py-4 text-sm text-gray-900"},Xe={class:"px-4 py-4 text-sm text-gray-500"},Ye={class:"px-4 py-4 text-sm text-gray-500"},ts={class:"px-4 py-4 text-sm text-gray-500"},es={key:0},ss={key:2,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},as={class:"px-4 py-5 sm:p-6"},os={class:"flex items-center justify-between mb-3"},ns={class:"flex items-center gap-2"},ls=["value"],is={class:"overflow-x-auto"},rs={class:"min-w-full divide-y divide-gray-200"},ds={class:"divide-y divide-gray-200 bg-white"},cs={class:"whitespace-nowrap px-6 py-4 text-sm text-indigo-600"},us=["onClick"],ms={class:"whitespace-nowrap px-6 py-4 text-sm"},xs={key:1,class:"text-sm text-gray-700"},ps={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},gs={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},vs={class:"whitespace-nowrap px-6 py-4 text-sm"},ys={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},fs={class:"flex items-center space-x-2"},hs=["onClick","disabled","aria-label"],ks={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},bs={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},_s=["value","onChange"],ws=["value"],Ts={key:0,value:"complete"},Ds={key:1,value:"done"},Ss={class:"flex items-center justify-between px-6 py-3 text-sm text-gray-600"},Ms={class:"space-x-2"},Cs=["disabled"],$s=["disabled"],Ns={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Es={class:"px-4 py-5 sm:p-6"},Ls={key:0,class:"text-center py-8 text-gray-500"},Bs={key:1,class:"overflow-x-auto"},Ps={class:"min-w-full divide-y divide-gray-200"},Us={class:"divide-y divide-gray-200"},Is={class:"px-4 py-4 text-sm text-gray-900"},Hs={class:"px-4 py-4 text-sm text-gray-500"},Ws={class:"px-4 py-4 text-sm text-gray-500"},As={class:"px-4 py-4 text-sm text-gray-900 font-semibold"},js={class:"px-4 py-4 text-sm text-gray-500"},Fs={class:"px-4 py-4 text-sm text-gray-500"},Os={key:2,class:"space-y-6"},Vs={class:"bg-white shadow rounded-lg p-4"},Rs={class:"grid gap-4 sm:grid-cols-2"},zs={class:"bg-white shadow rounded-lg p-5"},qs={class:"grid gap-4 sm:grid-cols-3 lg:grid-cols-5 text-sm"},Zs={class:"font-semibold"},Gs={class:"font-semibold"},Js={class:"font-semibold"},Ks={class:"font-semibold"},Qs={class:"bg-white shadow rounded-lg"},Xs={class:"overflow-x-auto"},Ys={class:"min-w-full divide-y divide-gray-200"},ta={class:"divide-y divide-gray-200"},ea={class:"px-4 py-4 text-sm text-gray-900"},sa={class:"px-4 py-4 text-sm text-gray-500"},aa={class:"px-4 py-4 text-sm text-gray-500"},oa={class:"px-4 py-4 text-sm text-gray-900 font-semibold"},na={class:"px-4 py-4 text-sm text-gray-500"},la={class:"px-4 py-4 text-sm text-gray-500"},ia={key:0},ra={key:0,class:"text-center py-8"},da={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},ca={class:"w-full max-w-2xl rounded-lg bg-white shadow-lg"},ua={class:"flex items-center justify-between border-b px-4 py-3"},ma={class:"p-4"},xa={key:0,class:"text-gray-500 text-sm"},pa={key:1,class:"overflow-x-auto"},ga={class:"min-w-full divide-y divide-gray-200"},va={class:"divide-y divide-gray-200 bg-white"},ya={class:"px-4 py-2 text-sm text-gray-900"},fa={class:"px-4 py-2 text-sm text-gray-700"},ha={class:"px-4 py-2 text-sm text-gray-700"},ka={class:"px-4 py-2 text-sm text-gray-700 font-semibold"},ba={class:"px-4 py-2 text-sm text-gray-700"},_a={class:"px-4 py-2 text-sm text-gray-700"},wa={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Ta={class:"w-full max-w-3xl max-h-[90vh] rounded-lg bg-white shadow-lg flex flex-col"},Da={class:"flex items-center justify-between border-b px-4 py-3 flex-shrink-0"},Sa={key:0,class:"p-6 text-sm text-gray-700 overflow-y-auto flex-1"},Ma={class:"mb-4 pb-4 border-b"},Ca={class:"font-semibold text-lg text-gray-900 mb-2"},$a={class:"flex items-center gap-3 flex-wrap"},Na={key:0,class:"text-sm"},Ea={key:1,class:"ml-1 text-gray-700"},La={key:1},Ba=["href"],Pa={key:0,class:"task-content"},Ua=["innerHTML"],Ia={key:1,class:"text-gray-500 italic"},Fa=le({__name:"Dashboard",setup(Ha){const g=m(null),f=m(!1),R=m(""),j=m(new Date),D=m("employee"),B=m([]),K=m(null),y=m(null),tt=m(!1),bt=m([]),Q=m([]),_=m(null),et=m(!1),z=m("dashboard"),q=m(""),_t=m([]),st=m(!1),w=m({workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}),T=m([]),pt=m(""),F=m(1),X=m(10),at=m("all"),ot=b(()=>{const s=new Set;return(B.value||[]).forEach(t=>{const a=(t.status||"").toString().trim();a&&s.add(a)}),Array.from(s).sort((t,a)=>t.localeCompare(a))}),nt=m("all"),lt=m(""),it=m(""),gt=b(()=>{const s=pt.value.trim().toLowerCase();let t=B.value;if(at.value!=="all"){const a=at.value.toLowerCase();t=t.filter(n=>(n.status||"").toLowerCase()===a)}if(nt.value!=="all"){const a=nt.value;t=t.filter(n=>(n.priority||"none").toLowerCase()===a)}if(lt.value){const a=new Date(lt.value).getTime();t=t.filter(n=>n.due_date?new Date(n.due_date).getTime()>=a:!1)}if(it.value){const a=new Date(it.value).getTime();t=t.filter(n=>n.due_date?new Date(n.due_date).getTime()<=a:!1)}return s?t.filter(a=>(a.title||"").toLowerCase().includes(s)):t}),rt=b(()=>Math.max(1,Math.ceil(gt.value.length/X.value))),Pt=b(()=>{const t=(Math.min(F.value,rt.value)-1)*X.value;return gt.value.slice(t,t+X.value)}),P=s=>{const t=Math.max(1,Math.min(s,rt.value));F.value=t},dt=m([]),ct=m(!1),vt=async()=>{var s;ct.value=!0;try{const t=await h.get("/admin/analytics/activity-logs",{params:{limit:100}});dt.value=((s=t.data)==null?void 0:s.data)||[]}catch{dt.value=[]}finally{ct.value=!1}};let yt=null;const O=b(()=>{var s,t;return!!((s=g.value)!=null&&s.clock_in)&&!((t=g.value)!=null&&t.clock_out)}),U=b(()=>{var s,t;return!!((s=g.value)!=null&&s.break_start)&&!((t=g.value)!=null&&t.break_end)}),Ut=b(()=>{var s,t;return((s=g.value)==null?void 0:s.lunch_start)&&!((t=g.value)!=null&&t.lunch_end)}),ut=b(()=>{const s=[];if(!g.value)return s;const t=g.value;if(t.clock_in&&t.clock_out){const a=Math.max(0,Math.floor((new Date(t.clock_out).getTime()-new Date(t.clock_in).getTime())/1e3)),n=t.break_start?new Date(t.break_start):null,l=t.break_end?new Date(t.break_end):null;let u=0;n&&l&&(u=Math.max(0,Math.floor((l.getTime()-n.getTime())/1e3)));const x=Math.max(0,a-u);s.push({name:"Work Hours",start:t.clock_in,end:t.clock_out,durationSeconds:x,breakDurationSeconds:u,notes:"-"})}if(t.break_start&&t.break_end){const a=Math.max(0,Math.floor((new Date(t.break_end).getTime()-new Date(t.break_start).getTime())/1e3));s.push({name:"Break",start:t.break_start,end:t.break_end,durationSeconds:a,breakDurationSeconds:a,notes:"-"})}return Q.value.forEach(a=>{var n;if(a.clock_in&&a.clock_out){const l=Math.max(0,Math.floor((new Date(a.clock_out).getTime()-new Date(a.clock_in).getTime())/1e3));s.push({name:((n=a.task)==null?void 0:n.title)||`Task #${a.task_id}`,start:a.clock_in,end:a.clock_out,durationSeconds:l,breakDurationSeconds:0,notes:"-"})}}),s.sort((a,n)=>{const l=new Date(a.start).getTime(),u=new Date(n.start).getTime();return(isNaN(u)?0:u)-(isNaN(l)?0:l)}),s});ie(()=>{const s=new Date;q.value=s.toISOString().split("T")[0],Y(),Ht(),I(),ht(),yt=window.setInterval(()=>{j.value=new Date},1e3)}),re(()=>{yt&&window.clearInterval(yt)});const Y=async()=>{try{const s=await h.get("/time-entries/current");g.value=s.data,Qt()}catch(s){g.value=null,R.value="No entry today",console.error("Error fetching current entry:",s)}},It=de(),Ht=async()=>{var t,a;const s=(t=It.props.auth)==null?void 0:t.user;if(s!=null&&s.role){const n=s.role;["admin","manager","employee","developer"].includes(n)&&(D.value=n)}else try{const l=(((a=(await h.get("/admin/users")).data)==null?void 0:a.data)||[]).find(u=>(u==null?void 0:u.id)&&(u==null?void 0:u.email));if(l!=null&&l.role){const u=l.role;["admin","manager","employee","developer"].includes(u)&&(D.value=u)}}catch{}D.value==="admin"&&(await vt(),setInterval(()=>{vt()},5e3))},I=async()=>{try{const s=await h.get("/my/tasks");B.value=s.data}catch{}},Wt=async()=>{var s,t,a;try{const l=((s=(await h.post("/my/clickup/sync-tasks")).data)==null?void 0:s.count)??0;await I(),alert(`Synced ${l} task(s) from ClickUp.`)}catch(n){alert(((a=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:a.error)||"Failed to sync tasks from ClickUp")}},wt=async()=>{try{await Xt()}catch{}},At=async()=>{try{await Yt()}catch{}},jt=async()=>{try{await te()}catch{}},ft=async()=>{try{await ee()}catch{}},ht=async()=>{try{const s=await h.get("/tasks/today-entries");Q.value=s.data||[];const t=(Q.value||[]).find(a=>a.clock_in&&!a.clock_out);y.value=t?t.task_id:null}catch{Q.value=[]}},Tt=async s=>{try{const t=await h.get(`/tasks/${s}/sync`);_.value=t.data,et.value=!0}catch{et.value=!1}},Ft=async()=>{if(U.value){await ft();return}O.value?await At():await wt()},Ot=async()=>{if(y.value){alert("Pause or stop the running task first.");return}U.value?await ft():(O.value||await wt(),await jt())},$=s=>s<10?`0${s}`:`${s}`,Vt=b(()=>{var s;return O.value&&((s=g.value)!=null&&s.clock_in)?new Date(g.value.clock_in):null}),Rt=b(()=>{var s;return U.value&&((s=g.value)!=null&&s.break_start)?new Date(g.value.break_start):null}),zt=b(()=>{const s=Q.value.find(t=>t.clock_in&&!t.clock_out);return s?new Date(s.clock_in):null}),qt=b(()=>{const s=Vt.value;if(!s)return"00:00:00";const t=j.value.getTime()-s.getTime(),a=Math.max(0,Math.floor(t/1e3)),n=Math.floor(a/3600),l=Math.floor(a%3600/60),u=a%60;return`${$(n)}:${$(l)}:${$(u)}`}),Zt=b(()=>{const s=Rt.value;if(!s)return"00:00:00";const t=j.value.getTime()-s.getTime(),a=Math.max(0,Math.floor(t/1e3)),n=Math.floor(a/3600),l=Math.floor(a%3600/60),u=a%60;return`${$(n)}:${$(l)}:${$(u)}`}),Gt=b(()=>{const s=zt.value;if(!s)return"00:00:00";const t=j.value.getTime()-s.getTime(),a=Math.max(0,Math.floor(t/1e3)),n=Math.floor(a/3600),l=Math.floor(a%3600/60),u=a%60;return`${$(n)}:${$(l)}:${$(u)}`}),Jt=b(()=>{const s=g.value;if(!s||!s.clock_in)return 0;const t=new Date(s.clock_in),a=s.clock_out?new Date(s.clock_out):j.value;let n=Math.max(0,Math.floor((a.getTime()-t.getTime())/6e4));if(s.break_start&&s.break_end){const l=new Date(s.break_start),u=new Date(s.break_end);n-=Math.max(0,Math.floor((u.getTime()-l.getTime())/6e4))}else if(s.break_start&&!s.break_end){const l=new Date(s.break_start);n-=Math.max(0,Math.floor((j.value.getTime()-l.getTime())/6e4))}if(s.lunch_start&&s.lunch_end){const l=new Date(s.lunch_start),u=new Date(s.lunch_end);n-=Math.max(0,Math.floor((u.getTime()-l.getTime())/6e4))}else if(s.lunch_start&&!s.lunch_end){const l=new Date(s.lunch_start);n-=Math.max(0,Math.floor((j.value.getTime()-l.getTime())/6e4))}return(Math.max(0,n)/60).toFixed(2)}),Kt=async()=>{try{tt.value=!0,bt.value=[g.value].filter(Boolean)}catch{tt.value=!0,bt.value=[]}},Qt=()=>{!g.value||!g.value.clock_in?R.value="Not clocked in":g.value.clock_out?R.value="Clocked out":Ut.value?R.value="On lunch":U.value?R.value="On break":R.value="Clocked in"},Xt=async s=>{var t,a;f.value=!0;try{const n={};await h.post("/time-entries/clock-in",n),await Y(),await I()}catch(n){alert(((a=(t=n.response)==null?void 0:t.data)==null?void 0:a.message)||"Error clocking in")}finally{f.value=!1}},Yt=async()=>{var s,t;f.value=!0;try{if(y.value){alert("Pause or stop the running task first."),f.value=!1;return}await h.post("/time-entries/clock-out"),await Y(),await I()}catch(a){alert(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Error clocking out")}finally{f.value=!1}},te=async()=>{var s,t;f.value=!0;try{await h.post("/time-entries/break-start"),await Y(),await I()}catch(a){alert(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Error starting break")}finally{f.value=!1}},ee=async()=>{var s,t;f.value=!0;try{await h.post("/time-entries/break-end"),await Y(),await I()}catch(a){alert(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Error ending break")}finally{f.value=!1}},Dt=async s=>{var t,a;if(!O.value){alert("Please Time In first before starting a task.");return}if(U.value&&await ft(),y.value&&y.value!==s)try{await h.post("/tasks/stop")}catch{}try{await h.post("/tasks/start",{task_id:s}),y.value=s,await ht()}catch(n){alert(((a=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to start task")}},St=async()=>{try{await h.post("/tasks/stop")}catch{}y.value=null,await ht()},se=async(s,t)=>{var n,l;if(!t)return;if(!confirm(`Are you sure you want to set this task to "${t}"?`)){await I();return}f.value=!0;try{await h.post(`/tasks/${s}/status`,{status:t}),await I()}catch(u){alert(((l=(n=u==null?void 0:u.response)==null?void 0:n.data)==null?void 0:l.message)||"Failed to update task status")}finally{f.value=!1}},Mt=async()=>{var s,t;if(q.value){st.value=!0;try{const a=await h.get("/my/time-entries",{params:{start_date:q.value,end_date:q.value}}),n=((s=a.data)==null?void 0:s.entries)||[];_t.value=n,T.value=[];let l=0,u=0,x=null,p=null;n.forEach(i=>{if(i.is_break||i.entry_type==="break"){const N=Z(i.clock_in),V=Z(i.clock_out);if(N&&V){const J=Math.max(0,Math.floor((V.getTime()-N.getTime())/1e3));u+=J,T.value.push({name:"Break",start:i.clock_in_formatted||i.clock_in,end:i.clock_out_formatted||i.clock_out,durationSeconds:J,breakDurationSeconds:J,notes:"-"})}return}const k=Z(i.clock_in),C=Z(i.clock_out);k&&(!x||k<x)&&(x=k,p=i.clock_in_formatted||i.clock_in);const H=i.task&&(i.task.title||i.task.name);if(k&&C&&!H){const N=Math.max(0,Math.floor((C.getTime()-k.getTime())/1e3));l+=N;const V=Z(i.lunch_start),J=Z(i.lunch_end);let Et=0;V&&J&&(Et=Math.max(0,Math.floor((J.getTime()-V.getTime())/1e3)));const ne=Math.max(0,N-Et);T.value.push({name:"Work Hours",start:i.clock_in_formatted||i.clock_in,end:i.clock_out_formatted||i.clock_out,durationSeconds:ne,breakDurationSeconds:0,notes:"-"})}if(H){const N=i.task.title||i.task.name;if(k&&C){const V=Math.max(0,Math.floor((C.getTime()-k.getTime())/1e3));T.value.push({name:N,start:i.clock_in_formatted||i.clock_in,end:i.clock_out_formatted||i.clock_out,durationSeconds:V,breakDurationSeconds:0,notes:"-"})}}}),T.value.sort((i,k)=>{const C=new Date(i.start).getTime(),H=new Date(k.start).getTime();return(isNaN(H)?0:H)-(isNaN(C)?0:C)});const M=T.value.filter(i=>i.name==="Work Hours").reduce((i,k)=>i+(k.durationSeconds||0),0),o=T.value.filter(i=>i.name==="Break").reduce((i,k)=>i+(k.durationSeconds||0),0);if((t=a.data)!=null&&t.daily_totals)w.value={workSeconds:M,breakSeconds:o,lunchSeconds:a.data.daily_totals.lunch_seconds||0,tasksCount:a.data.daily_totals.tasks_count||0,status:a.data.daily_totals.status||"No Entry",overtimeSeconds:a.data.daily_totals.overtime_seconds||0};else{const k=Math.max(0,M-28800);let C="No Entry";if(x){const H=(x.getUTCHours()+8)%24,N=x.getUTCMinutes();C=H<8||H===8&&N<=30?"Perfect":"Late"}w.value={workSeconds:M,breakSeconds:o,lunchSeconds:0,tasksCount:T.value.length,status:C,overtimeSeconds:k}}}catch(a){console.error("Error loading time entries",a),_t.value=[],T.value=[],w.value={workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}}finally{st.value=!1}}},Z=s=>{if(!s)return null;const t=s.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?/);if(t){const l=Number(t[1]),u=Number(t[2])-1,x=Number(t[3]),p=Number(t[4]),M=Number(t[5]),o=Number(t[6]||"0");return new Date(Date.UTC(l,u,x,p-8,M,o))}const a=s.includes("T")?s:s.replace(" ","T"),n=new Date(a);return isNaN(n.getTime())?null:n},G=s=>{if(!s)return"--";try{const a=new Date(s);if(!isNaN(a.getTime()))return a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Manila"})}catch{}const t=s.match(/\b(\d{1,2}):(\d{2})(?::(\d{2}))?/);if(t){let a=parseInt(t[1],10);const n=t[2],l=a>=12?"PM":"AM";return a=a%12,a===0&&(a=12),`${a}:${n} ${l}`}return"--"},S=s=>{const t=typeof s=="number"&&isFinite(s)?Math.max(0,Math.floor(s)):0,a=Math.floor(t/3600),n=Math.floor(t%3600/60),l=t%60,u=x=>x<10?`0${x}`:`${x}`;return`${u(a)}:${u(n)}:${u(l)}`},Ct=s=>{if(!s||s===0)return"--";const t=Math.floor(s/1e3);return S(t)},$t=s=>{if(!s)return"";const t=s.toLowerCase().trim();return t==="to do"||t==="todo"?"text-gray-700":t.includes("complete")||t.includes("done")||t.includes("finished")?"bg-green-100 text-green-800":t.includes("progress")||t.includes("doing")||t.includes("in progress")||t.includes("working")?"bg-blue-100 text-blue-800":t.includes("pending")||t.includes("waiting")?"bg-yellow-100 text-yellow-800":t.includes("blocked")||t.includes("stuck")?"bg-red-100 text-red-800":t.includes("review")||t.includes("testing")?"bg-purple-100 text-purple-800":t.includes("cancel")||t.includes("closed")?"bg-gray-100 text-gray-800":"bg-indigo-100 text-indigo-800"},ae=s=>{if(!s)return"bg-gray-100 text-gray-800";const t=s.toLowerCase().trim();return t==="urgent"||t==="critical"?"bg-red-100 text-red-800":t==="high"?"bg-orange-100 text-orange-800":t==="normal"||t==="medium"?"bg-yellow-100 text-yellow-800":t==="low"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"},Nt=s=>{if(!s)return!1;const t=s.toLowerCase().trim();return t!=="to do"&&t!=="todo"},oe=s=>{if(!s)return"";const t=s.split(`
`),a=[];let n=!1,l=[];for(let x=0;x<t.length;x++){const p=t[x].trim();if(!p){n&&l.length>0&&(a.push(`<ul class="list-disc ml-6 mb-3 space-y-1">${l.join("")}</ul>`),l=[],n=!1),a.length>0&&!a[a.length-1].startsWith("<")&&a.push('</p><p class="mb-2">');continue}if(p.match(/^#{1,3}\s+/)){n&&l.length>0&&(a.push(`<ul class="list-disc ml-6 mb-3 space-y-1">${l.join("")}</ul>`),l=[],n=!1),p.startsWith("###")?a.push(`<h3 class="font-semibold text-gray-900 mt-4 mb-2 text-base">${p.replace(/^###\s+/,"")}</h3>`):p.startsWith("##")?a.push(`<h2 class="font-bold text-gray-900 mt-5 mb-3 text-lg">${p.replace(/^##\s+/,"")}</h2>`):p.startsWith("#")&&a.push(`<h1 class="font-bold text-gray-900 mt-6 mb-4 text-xl">${p.replace(/^#\s+/,"")}</h1>`);continue}if(p.match(/^[\-\*â€¢]\s+/)){n||(n=!0);const o=p.replace(/^[\-\*â€¢]\s+/,"").trim();l.push(`<li class="mb-1">${o}</li>`);continue}if(p.match(/^\d+\.\s+/)){n||(n=!0);const o=p.replace(/^\d+\.\s+/,"").trim();l.push(`<li class="mb-1 list-decimal">${o}</li>`);continue}n&&l.length>0&&(a.push(`<ul class="list-disc ml-6 mb-3 space-y-1">${l.join("")}</ul>`),l=[],n=!1);let M=p.replace(/\*\*(.+?)\*\*/g,'<strong class="font-semibold">$1</strong>').replace(/\*(.+?)\*/g,'<em class="italic">$1</em>');a.push(M)}n&&l.length>0&&a.push(`<ul class="list-disc ml-6 mb-3 space-y-1">${l.join("")}</ul>`);let u=a.join("<br>");return u.startsWith("<")||(u='<p class="mb-2">'+u),u.endsWith(">")||(u=u+"</p>"),u};return(s,t)=>(c(),d(L,null,[Lt(ce(ue),{title:"Dashboard"}),Lt(me,null,{header:Bt(()=>[...t[23]||(t[23]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Time Tracker Dashboard ",-1)])]),default:Bt(()=>{var a,n,l,u,x,p,M;return[e("div",xe,[e("div",pe,[D.value!=="admin"?(c(),d("div",ge,[e("nav",ve,[e("button",{onClick:t[0]||(t[0]=o=>z.value="dashboard"),class:E(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",z.value==="dashboard"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Dashboard ",2),e("button",{onClick:t[1]||(t[1]=o=>{z.value="time-entries",Mt()}),class:E(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",z.value==="time-entries"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Time Entries ",2)])])):v("",!0),z.value==="dashboard"||D.value==="admin"||D.value==="developer"?(c(),d("div",ye,[D.value!=="admin"?(c(),d("div",fe,[e("div",he,[e("div",ke,[t[25]||(t[25]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Work Day Timer",-1)),e("p",be,r(qt.value),1),e("p",_e,r(O.value?"Working":"Idle"),1),U.value?(c(),d("div",we,[e("p",Te,[t[24]||(t[24]=kt("Break Timer: ",-1)),e("span",De,r(Zt.value),1)])])):v("",!0),e("div",Se,[e("button",{onClick:Ft,disabled:f.value,class:E(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",O.value?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"])},r(O.value?"Time Out":"Time In"),11,Me),e("button",{onClick:Ot,disabled:f.value,class:E(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",U.value?"bg-orange-600 hover:bg-orange-700":"bg-yellow-600 hover:bg-yellow-700"])},r(U.value?"Break Out":"Break In"),11,Ce)])])]),e("div",$e,[e("div",Ne,[t[27]||(t[27]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Running Task",-1)),y.value?(c(),d("div",Ee,[e("button",{onClick:t[2]||(t[2]=o=>Tt(y.value)),class:"text-indigo-600 hover:underline text-sm"},r(((a=B.value.find(o=>o.id===y.value))==null?void 0:a.title)||"#"+y.value),1),e("p",Le,[kt(r(Gt.value),1),(n=B.value.find(o=>o.id===y.value))!=null&&n.estimated_time?(c(),d("span",Be," / "+r(Ct((l=B.value.find(o=>o.id===y.value))==null?void 0:l.estimated_time)),1)):v("",!0)]),e("div",Pe,[e("button",{onClick:t[3]||(t[3]=o=>St()),disabled:f.value,class:"rounded-md bg-yellow-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-yellow-700"},"Pause",8,Ue)])])):(c(),d("div",Ie,[e("div",He,[W(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>K.value=o),class:"w-full rounded-md border-gray-300 text-sm shadow-sm"},[t[26]||(t[26]=e("option",{value:null},"Select a task",-1)),(c(!0),d(L,null,A(B.value,o=>(c(),d("option",{key:o.id,value:o.id},r(o.title),9,We))),128))],512),[[mt,K.value]]),e("button",{onClick:t[5]||(t[5]=o=>K.value?Dt(K.value):void 0),disabled:f.value||!K.value,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700 disabled:opacity-50"},"Start",8,Ae)]),B.value.length?v("",!0):(c(),d("p",je,"No tasks available."))]))])]),e("div",Fe,[e("div",Oe,[t[29]||(t[29]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Daily Logs",-1)),e("p",Ve,[kt(r(Jt.value),1),t[28]||(t[28]=e("span",{class:"text-sm font-normal text-gray-500"}," / 8 Hours",-1))]),e("div",{class:"mt-4 flex space-x-2"},[e("button",{onClick:Kt,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-700"},"Daily Logs")])])])])):v("",!0),D.value==="admin"?(c(),d("div",Re,[e("div",ze,[e("div",qe,[t[30]||(t[30]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Real-Time Activity Log",-1)),e("button",{onClick:vt,disabled:ct.value,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-500"},"Refresh",8,Ze)]),e("div",Ge,[e("table",Je,[t[32]||(t[32]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"User"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Action"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Description"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Time")])],-1)),e("tbody",Ke,[(c(!0),d(L,null,A(dt.value,o=>{var i;return c(),d("tr",{key:o.id},[e("td",Qe,r(((i=o.user)==null?void 0:i.name)||"Unknown"),1),e("td",Xe,r(o.action),1),e("td",Ye,r(o.description),1),e("td",ts,r(new Date(o.created_at).toLocaleString()),1)])}),128)),dt.value.length===0&&!ct.value?(c(),d("tr",es,[...t[31]||(t[31]=[e("td",{colspan:"4",class:"px-4 py-4 text-center text-sm text-gray-500"},"No activity logs found",-1)])])):v("",!0)])])])])])):v("",!0),D.value!=="admin"?(c(),d("div",ss,[e("div",as,[e("div",os,[t[36]||(t[36]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"My Tasks",-1)),e("div",ns,[e("button",{onClick:Wt,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700"},"Refresh from ClickUp"),W(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>pt.value=o),onInput:t[7]||(t[7]=o=>P(1)),type:"text",placeholder:"Search tasks",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[xt,pt.value]]),W(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>at.value=o),onChange:t[9]||(t[9]=o=>P(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[t[33]||(t[33]=e("option",{value:"all"},"All",-1)),(c(!0),d(L,null,A(ot.value,o=>(c(),d("option",{key:o,value:o},r(o),9,ls))),128))],544),[[mt,at.value]]),W(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>nt.value=o),onChange:t[11]||(t[11]=o=>P(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...t[34]||(t[34]=[e("option",{value:"all"},"All priorities",-1),e("option",{value:"urgent"},"Urgent",-1),e("option",{value:"high"},"High",-1),e("option",{value:"normal"},"Normal",-1),e("option",{value:"low"},"Low",-1),e("option",{value:"none"},"None",-1)])],544),[[mt,nt.value]]),W(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>lt.value=o),onChange:t[13]||(t[13]=o=>P(1)),type:"date",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[xt,lt.value]]),W(e("input",{"onUpdate:modelValue":t[14]||(t[14]=o=>it.value=o),onChange:t[15]||(t[15]=o=>P(1)),type:"date",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[xt,it.value]]),W(e("select",{"onUpdate:modelValue":t[16]||(t[16]=o=>X.value=o),onChange:t[17]||(t[17]=o=>P(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...t[35]||(t[35]=[e("option",{value:5},"5",-1),e("option",{value:10},"10",-1),e("option",{value:20},"20",-1),e("option",{value:50},"50",-1)])],544),[[mt,X.value,void 0,{number:!0}]])])]),e("div",is,[e("table",rs,[t[40]||(t[40]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Due Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Estimated Time"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Priority"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Actions")])],-1)),e("tbody",ds,[(c(!0),d(L,null,A(Pt.value,o=>(c(),d("tr",{key:o.id},[e("td",cs,[e("button",{onClick:i=>Tt(o.id),class:"hover:underline"},r(o.title),9,us)]),e("td",ms,[Nt(o.status)?(c(),d("span",{key:0,class:E(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold",$t(o.status)])},r(o.status||"â€”"),3)):(c(),d("span",xs,r(o.status||"â€”"),1))]),e("td",ps,r(o.due_date?new Date(o.due_date).toLocaleDateString():"--"),1),e("td",gs,r(Ct(o.estimated_time)),1),e("td",vs,[e("span",{class:E(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold",ae(o.priority||null)])},r(o.priority||"None"),3)]),e("td",ys,[e("div",fs,[e("button",{onClick:i=>y.value===o.id?St():Dt(o.id),disabled:f.value,class:E(["rounded-full p-2 text-white",y.value===o.id?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"]),"aria-label":y.value===o.id?"Pause":"Play"},[y.value!==o.id?(c(),d("svg",ks,[...t[37]||(t[37]=[e("path",{d:"M8 5v14l11-7z"},null,-1)])])):(c(),d("svg",bs,[...t[38]||(t[38]=[e("path",{d:"M6 5h4v14H6zM14 5h4v14h-4z"},null,-1)])]))],10,hs),e("select",{value:o.status||"",onChange:i=>se(o.id,i.target.value),class:"rounded-md border-gray-300 text-xs shadow-sm"},[t[39]||(t[39]=e("option",{disabled:"",value:""},"Set statusâ€¦",-1)),(c(!0),d(L,null,A(ot.value,i=>(c(),d("option",{key:i+o.id,value:i},r(i),9,ws))),128)),ot.value.includes("complete")?v("",!0):(c(),d("option",Ts,"complete")),ot.value.includes("done")?v("",!0):(c(),d("option",Ds,"done"))],40,_s)])])]))),128))])]),e("div",Ss,[e("div",null," Page "+r(F.value)+" of "+r(rt.value)+" â€¢ "+r(gt.value.length)+" total ",1),e("div",Ms,[e("button",{onClick:t[18]||(t[18]=o=>P(F.value-1)),disabled:F.value<=1,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Prev",8,Cs),e("button",{onClick:t[19]||(t[19]=o=>P(F.value+1)),disabled:F.value>=rt.value,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Next",8,$s)])])])])])):v("",!0),e("div",Ns,[e("div",Es,[t[42]||(t[42]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Today's Time Events",-1)),ut.value.length===0?(c(),d("div",Ls," No time entries recorded today. Clock in to start tracking time. ")):(c(),d("div",Bs,[e("table",Ps,[t[41]||(t[41]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),e("tbody",Us,[(c(!0),d(L,null,A(ut.value,(o,i)=>(c(),d("tr",{key:i},[e("td",Is,r(o.name),1),e("td",Hs,r(G(o.start)),1),e("td",Ws,r(G(o.end)),1),e("td",As,r(S(o.durationSeconds)),1),e("td",js,r(S(o.breakDurationSeconds||0)),1),e("td",Fs,r(o.notes||"-"),1)]))),128))])])]))])])])):v("",!0),z.value==="time-entries"&&D.value!=="admin"?(c(),d("div",Os,[e("div",Vs,[e("div",Rs,[e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),W(e("input",{"onUpdate:modelValue":t[20]||(t[20]=o=>q.value=o),onChange:Mt,type:"date",class:"w-full rounded-md border-gray-300 shadow-sm"},null,544),[[xt,q.value]])])])]),e("div",zs,[t[49]||(t[49]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Daily Summary",-1)),e("div",qs,[e("div",null,[t[44]||(t[44]=e("div",{class:"text-gray-500"},"ðŸ•’ Time In Hours",-1)),e("div",Zs,r(S(w.value.workSeconds)),1)]),e("div",null,[t[45]||(t[45]=e("div",{class:"text-gray-500"},"â˜• Total Breaks",-1)),e("div",Gs,r(S(w.value.breakSeconds)),1)]),e("div",null,[t[46]||(t[46]=e("div",{class:"text-gray-500"},"ðŸ“‹ Entries",-1)),e("div",Js,r(w.value.tasksCount),1)]),e("div",null,[t[47]||(t[47]=e("div",{class:"text-gray-500"},"â° Status",-1)),e("div",{class:E(["font-semibold",{"text-green-700":w.value.status==="Perfect","text-yellow-700":w.value.status==="Late","text-gray-700":w.value.status==="No Entry"}])},r(w.value.status),3)]),e("div",null,[t[48]||(t[48]=e("div",{class:"text-gray-500"},"âš¡ Overtime",-1)),e("div",Ks,r(S(w.value.overtimeSeconds)),1)])])]),e("div",Qs,[e("div",Xs,[e("table",Ys,[t[51]||(t[51]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),e("tbody",ta,[(c(!0),d(L,null,A(T.value,(o,i)=>(c(),d("tr",{key:i},[e("td",ea,r(o.name),1),e("td",sa,r(G(o.start)),1),e("td",aa,r(G(o.end)),1),e("td",oa,r(S(o.durationSeconds)),1),e("td",na,r(S(o.breakDurationSeconds||0)),1),e("td",la,r(o.notes||"-"),1)]))),128)),T.value.length===0&&!st.value?(c(),d("tr",ia,[...t[50]||(t[50]=[e("td",{colspan:"6",class:"px-4 py-4 text-center text-sm text-gray-500"},"No entries for selected day",-1)])])):v("",!0)])])]),st.value?(c(),d("div",ra,[...t[52]||(t[52]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),e("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):v("",!0)])])):v("",!0)]),tt.value?(c(),d("div",da,[e("div",ca,[e("div",ua,[t[53]||(t[53]=e("h4",{class:"text-md font-semibold"},"Daily Logs",-1)),e("button",{onClick:t[21]||(t[21]=o=>tt.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs"},"Close")]),e("div",ma,[ut.value.length===0?(c(),d("div",xa,"No entry today.")):(c(),d("div",pa,[e("table",ga,[t[54]||(t[54]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),e("tbody",va,[(c(!0),d(L,null,A(ut.value,(o,i)=>(c(),d("tr",{key:i},[e("td",ya,r(o.name),1),e("td",fa,r(G(o.start)),1),e("td",ha,r(G(o.end)),1),e("td",ka,r(S(o.durationSeconds)),1),e("td",ba,r(S(o.breakDurationSeconds||0)),1),e("td",_a,r(o.notes||"-"),1)]))),128))])])]))])])])):v("",!0),et.value?(c(),d("div",wa,[e("div",Ta,[e("div",Da,[t[55]||(t[55]=e("h4",{class:"text-md font-semibold"},"Task Details",-1)),e("button",{onClick:t[22]||(t[22]=o=>et.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs hover:bg-gray-200"},"Close")]),_.value?(c(),d("div",Sa,[e("div",Ma,[e("h2",Ca,r((u=_.value.task)==null?void 0:u.title),1),e("div",$a,[(x=_.value.task)!=null&&x.status?(c(),d("span",Na,[t[56]||(t[56]=e("span",{class:"text-gray-600"},"Status:",-1)),Nt(_.value.task.status)?(c(),d("span",{key:0,class:E(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold ml-1",$t(_.value.task.status)])},r(_.value.task.status),3)):(c(),d("span",Ea,r(_.value.task.status),1))])):v("",!0),(p=_.value.clickup)!=null&&p.url?(c(),d("span",La,[e("a",{href:_.value.clickup.url,target:"_blank",class:"text-indigo-600 hover:underline text-sm font-medium"},"Open in ClickUp â†’",8,Ba)])):v("",!0)])]),(M=_.value.clickup)!=null&&M.text_content?(c(),d("div",Pa,[e("div",{innerHTML:oe(_.value.clickup.text_content),class:"prose prose-sm max-w-none"},null,8,Ua)])):(c(),d("div",Ia," No additional details available. "))])):v("",!0)])])):v("",!0)])]}),_:1})],64))}});export{Fa as default};
