import{d as te,r as m,q as h,o as ee,z as se,c as i,a as Ct,u as ae,h as oe,w as Nt,b as e,e as p,f as d,n as L,t as l,g as B,F as D,i as U,v as mt,k as ne,j as xt}from"./app-Ch8h721m.js";import{_ as le}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-CP9YQzZj.js";import{a as y}from"./api-Dry9JM8M.js";const re={class:"py-12"},ie={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},de={key:0,class:"border-b border-gray-200 mb-6"},ue={class:"-mb-px flex space-x-8"},ce={key:1},me={key:0,class:"mb-6 grid gap-4 md:grid-cols-3"},xe={class:"overflow-hidden bg-white shadow sm:rounded-lg"},ge={class:"px-4 py-5 sm:p-6"},pe={class:"mt-2 text-3xl font-bold text-gray-900"},ve={class:"text-xs text-gray-500"},ye={class:"mt-4 flex flex-wrap gap-2"},fe=["disabled"],ke=["disabled"],he={class:"overflow-hidden bg-white shadow sm:rounded-lg"},be={class:"px-4 py-5 sm:p-6"},_e={key:0,class:"mt-2"},we={class:"text-2xl font-bold text-gray-900 mt-1"},Te={class:"mt-3"},De=["disabled"],Se={key:1,class:"mt-2"},Me={class:"flex items-center gap-2 w-full"},Ce=["value"],Ne=["disabled"],$e={key:0,class:"text-sm text-gray-500 mt-2"},Ee={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Le={class:"px-4 py-5 sm:p-6"},Be={class:"mt-2 text-3xl font-bold text-gray-900"},Ue={key:1,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},Pe={class:"px-4 py-5 sm:p-6"},Ie={class:"flex items-center justify-between mb-4"},Ae=["disabled"],Oe={class:"overflow-x-auto"},Ve={class:"min-w-full divide-y divide-gray-200"},Fe={class:"divide-y divide-gray-200 bg-white"},He={class:"px-4 py-4 text-sm text-gray-900"},We={class:"px-4 py-4 text-sm text-gray-500"},je={class:"px-4 py-4 text-sm text-gray-500"},ze={class:"px-4 py-4 text-sm text-gray-500"},Re={key:0},qe={key:2,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},Ze={class:"px-4 py-5 sm:p-6"},Ge={class:"flex items-center justify-between mb-3"},Je={class:"flex items-center gap-2"},Ke=["value"],Qe={class:"overflow-x-auto"},Xe={class:"min-w-full divide-y divide-gray-200"},Ye={class:"divide-y divide-gray-200 bg-white"},ts={class:"whitespace-nowrap px-6 py-4 text-sm text-indigo-600"},es=["onClick"],ss={class:"whitespace-nowrap px-6 py-4 text-sm"},as={key:1,class:"text-sm text-gray-700"},os={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},ns={class:"whitespace-nowrap px-6 py-4 text-sm"},ls={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},rs={class:"flex items-center space-x-2"},is=["onClick","disabled","aria-label"],ds={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},us={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},cs=["value","onChange"],ms=["value"],xs={key:0,value:"complete"},gs={key:1,value:"done"},ps={class:"flex items-center justify-between px-6 py-3 text-sm text-gray-600"},vs={class:"space-x-2"},ys=["disabled"],fs=["disabled"],ks={class:"overflow-hidden bg-white shadow sm:rounded-lg"},hs={class:"px-4 py-5 sm:p-6"},bs={key:0,class:"text-center py-8 text-gray-500"},_s={key:1,class:"overflow-x-auto"},ws={class:"min-w-full divide-y divide-gray-200"},Ts={class:"divide-y divide-gray-200"},Ds={class:"px-4 py-4 text-sm text-gray-900"},Ss={class:"px-4 py-4 text-sm text-gray-500"},Ms={class:"px-4 py-4 text-sm text-gray-500"},Cs={class:"px-4 py-4 text-sm text-gray-900 font-semibold"},Ns={class:"px-4 py-4 text-sm text-gray-500"},$s={class:"px-4 py-4 text-sm text-gray-500"},Es={key:2,class:"space-y-6"},Ls={class:"bg-white shadow rounded-lg p-4"},Bs={class:"grid gap-4 sm:grid-cols-2"},Us={class:"bg-white shadow rounded-lg p-5"},Ps={class:"grid gap-4 sm:grid-cols-3 lg:grid-cols-5 text-sm"},Is={class:"font-semibold"},As={class:"font-semibold"},Os={class:"font-semibold"},Vs={class:"font-semibold"},Fs={class:"bg-white shadow rounded-lg"},Hs={class:"overflow-x-auto"},Ws={class:"min-w-full divide-y divide-gray-200"},js={class:"divide-y divide-gray-200"},zs={class:"px-4 py-4 text-sm text-gray-900"},Rs={class:"px-4 py-4 text-sm text-gray-500"},qs={class:"px-4 py-4 text-sm text-gray-500"},Zs={class:"px-4 py-4 text-sm text-gray-900 font-semibold"},Gs={class:"px-4 py-4 text-sm text-gray-500"},Js={class:"px-4 py-4 text-sm text-gray-500"},Ks={key:0},Qs={key:0,class:"text-center py-8"},Xs={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Ys={class:"w-full max-w-2xl rounded-lg bg-white shadow-lg"},ta={class:"flex items-center justify-between border-b px-4 py-3"},ea={class:"p-4"},sa={key:0,class:"text-gray-500 text-sm"},aa={key:1,class:"overflow-x-auto"},oa={class:"min-w-full divide-y divide-gray-200"},na={class:"divide-y divide-gray-200 bg-white"},la={class:"px-4 py-2 text-sm text-gray-900"},ra={class:"px-4 py-2 text-sm text-gray-700"},ia={class:"px-4 py-2 text-sm text-gray-700"},da={class:"px-4 py-2 text-sm text-gray-700 font-semibold"},ua={class:"px-4 py-2 text-sm text-gray-700"},ca={class:"px-4 py-2 text-sm text-gray-700"},ma={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},xa={class:"w-full max-w-lg rounded-lg bg-white shadow-lg"},ga={class:"flex items-center justify-between border-b px-4 py-3"},pa={key:0,class:"p-4 text-sm text-gray-700"},va={class:"font-medium mb-1"},ya={class:"mb-2"},fa={key:0,class:"mb-2"},ka=["href"],ha={key:1,class:"prose max-w-none"},Da=te({__name:"Dashboard",setup(ba){const x=m(null),v=m(!1),O=m(""),V=m(new Date),S=m("employee"),F=m([]),q=m(null),f=m(null),Q=m(!1),ht=m([]),Z=m([]),M=m(null),X=m(!1),H=m("dashboard"),W=m(""),bt=m([]),Y=m(!1),b=m({workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}),_=m([]),gt=m(""),P=m(1),G=m(10),tt=m("all"),et=h(()=>{const s=new Set;return(F.value||[]).forEach(t=>{const a=(t.status||"").toString().trim();a&&s.add(a)}),Array.from(s).sort((t,a)=>t.localeCompare(a))}),st=m("all"),at=m(""),ot=m(""),pt=h(()=>{const s=gt.value.trim().toLowerCase();let t=F.value;if(tt.value!=="all"){const a=tt.value.toLowerCase();t=t.filter(n=>(n.status||"").toLowerCase()===a)}if(st.value!=="all"){const a=st.value;t=t.filter(n=>(n.priority||"none").toLowerCase()===a)}if(at.value){const a=new Date(at.value).getTime();t=t.filter(n=>n.due_date?new Date(n.due_date).getTime()>=a:!1)}if(ot.value){const a=new Date(ot.value).getTime();t=t.filter(n=>n.due_date?new Date(n.due_date).getTime()<=a:!1)}return s?t.filter(a=>(a.title||"").toLowerCase().includes(s)):t}),nt=h(()=>Math.max(1,Math.ceil(pt.value.length/G.value))),$t=h(()=>{const t=(Math.min(P.value,nt.value)-1)*G.value;return pt.value.slice(t,t+G.value)}),C=s=>{const t=Math.max(1,Math.min(s,nt.value));P.value=t},lt=m([]),rt=m(!1),vt=async()=>{var s;rt.value=!0;try{const t=await y.get("/admin/analytics/activity-logs",{params:{limit:100}});lt.value=((s=t.data)==null?void 0:s.data)||[]}catch{lt.value=[]}finally{rt.value=!1}};let yt=null;const I=h(()=>{var s,t;return!!((s=x.value)!=null&&s.clock_in)&&!((t=x.value)!=null&&t.clock_out)}),N=h(()=>{var s,t;return!!((s=x.value)!=null&&s.break_start)&&!((t=x.value)!=null&&t.break_end)}),Et=h(()=>{var s,t;return((s=x.value)==null?void 0:s.lunch_start)&&!((t=x.value)!=null&&t.lunch_end)}),it=h(()=>{const s=[];if(!x.value)return s;const t=x.value;if(t.clock_in&&t.clock_out){const a=Math.max(0,Math.floor((new Date(t.clock_out).getTime()-new Date(t.clock_in).getTime())/1e3)),n=t.break_start?new Date(t.break_start):null,u=t.break_end?new Date(t.break_end):null;let c=0;n&&u&&(c=Math.max(0,Math.floor((u.getTime()-n.getTime())/1e3)));const g=Math.max(0,a-c);s.push({name:"Work Hours",start:t.clock_in,end:t.clock_out,durationSeconds:g,breakDurationSeconds:c,notes:"-"})}if(t.break_start&&t.break_end){const a=Math.max(0,Math.floor((new Date(t.break_end).getTime()-new Date(t.break_start).getTime())/1e3));s.push({name:"Break",start:t.break_start,end:t.break_end,durationSeconds:a,breakDurationSeconds:a,notes:"-"})}return Z.value.forEach(a=>{var n;if(a.clock_in&&a.clock_out){const u=Math.max(0,Math.floor((new Date(a.clock_out).getTime()-new Date(a.clock_in).getTime())/1e3));s.push({name:((n=a.task)==null?void 0:n.title)||`Task #${a.task_id}`,start:a.clock_in,end:a.clock_out,durationSeconds:u,breakDurationSeconds:0,notes:"-"})}}),s.sort((a,n)=>{const u=new Date(a.start).getTime(),c=new Date(n.start).getTime();return(isNaN(c)?0:c)-(isNaN(u)?0:u)}),s});ee(()=>{const s=new Date;W.value=s.toISOString().split("T")[0],J(),Lt(),$(),kt(),yt=window.setInterval(()=>{V.value=new Date},1e3)}),se(()=>{yt&&window.clearInterval(yt)});const J=async()=>{try{const s=await y.get("/time-entries/current");x.value=s.data,zt()}catch(s){x.value=null,O.value="No entry today",console.error("Error fetching current entry:",s)}},Lt=async()=>{var s;try{const a=(((s=(await y.get("/admin/users")).data)==null?void 0:s.data)||[]).find(n=>(n==null?void 0:n.id)&&(n==null?void 0:n.email));a!=null&&a.role&&(S.value=a.role),S.value==="admin"&&(await vt(),setInterval(()=>{vt()},5e3))}catch{}},$=async()=>{try{const s=await y.get("/my/tasks");F.value=s.data}catch{}},Bt=async()=>{var s,t,a;try{const u=((s=(await y.post("/my/clickup/sync-tasks")).data)==null?void 0:s.count)??0;await $(),alert(`Synced ${u} task(s) from ClickUp.`)}catch(n){alert(((a=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:a.error)||"Failed to sync tasks from ClickUp")}},_t=async()=>{try{await Rt()}catch{}},Ut=async()=>{try{await qt()}catch{}},Pt=async()=>{try{await Zt()}catch{}},ft=async()=>{try{await Gt()}catch{}},kt=async()=>{try{const s=await y.get("/tasks/today-entries");Z.value=s.data||[];const t=(Z.value||[]).find(a=>a.clock_in&&!a.clock_out);f.value=t?t.task_id:null}catch{Z.value=[]}},wt=async s=>{try{const t=await y.get(`/tasks/${s}/sync`);M.value=t.data,X.value=!0}catch{X.value=!1}},It=async()=>{if(N.value){await ft();return}I.value?await Ut():await _t()},At=async()=>{if(f.value){alert("Pause or stop the running task first.");return}N.value?await ft():(I.value||await _t(),await Pt())},j=s=>s<10?`0${s}`:`${s}`,Ot=h(()=>{var s,t;return N.value&&((s=x.value)!=null&&s.break_start)?new Date(x.value.break_start):I.value&&((t=x.value)!=null&&t.clock_in)?new Date(x.value.clock_in):null}),Vt=h(()=>{const s=Z.value.find(t=>t.clock_in&&!t.clock_out);return s?new Date(s.clock_in):null}),Ft=h(()=>{const s=Ot.value;if(!s)return"00:00:00";const t=V.value.getTime()-s.getTime(),a=Math.max(0,Math.floor(t/1e3)),n=Math.floor(a/3600),u=Math.floor(a%3600/60),c=a%60;return`${j(n)}:${j(u)}:${j(c)}`}),Ht=h(()=>{const s=Vt.value;if(!s)return"00:00:00";const t=V.value.getTime()-s.getTime(),a=Math.max(0,Math.floor(t/1e3)),n=Math.floor(a/3600),u=Math.floor(a%3600/60),c=a%60;return`${j(n)}:${j(u)}:${j(c)}`}),Wt=h(()=>{const s=x.value;if(!s||!s.clock_in)return 0;const t=new Date(s.clock_in),a=s.clock_out?new Date(s.clock_out):V.value;let n=Math.max(0,Math.floor((a.getTime()-t.getTime())/6e4));if(s.break_start&&s.break_end){const u=new Date(s.break_start),c=new Date(s.break_end);n-=Math.max(0,Math.floor((c.getTime()-u.getTime())/6e4))}else if(s.break_start&&!s.break_end){const u=new Date(s.break_start);n-=Math.max(0,Math.floor((V.value.getTime()-u.getTime())/6e4))}if(s.lunch_start&&s.lunch_end){const u=new Date(s.lunch_start),c=new Date(s.lunch_end);n-=Math.max(0,Math.floor((c.getTime()-u.getTime())/6e4))}else if(s.lunch_start&&!s.lunch_end){const u=new Date(s.lunch_start);n-=Math.max(0,Math.floor((V.value.getTime()-u.getTime())/6e4))}return(Math.max(0,n)/60).toFixed(2)}),jt=async()=>{try{Q.value=!0,ht.value=[x.value].filter(Boolean)}catch{Q.value=!0,ht.value=[]}},zt=()=>{!x.value||!x.value.clock_in?O.value="Not clocked in":x.value.clock_out?O.value="Clocked out":Et.value?O.value="On lunch":N.value?O.value="On break":O.value="Clocked in"},Rt=async s=>{var t,a;v.value=!0;try{const n={};await y.post("/time-entries/clock-in",n),await J(),await $()}catch(n){alert(((a=(t=n.response)==null?void 0:t.data)==null?void 0:a.message)||"Error clocking in")}finally{v.value=!1}},qt=async()=>{var s,t;v.value=!0;try{if(f.value){alert("Pause or stop the running task first."),v.value=!1;return}await y.post("/time-entries/clock-out"),await J(),await $()}catch(a){alert(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Error clocking out")}finally{v.value=!1}},Zt=async()=>{var s,t;v.value=!0;try{await y.post("/time-entries/break-start"),await J(),await $()}catch(a){alert(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Error starting break")}finally{v.value=!1}},Gt=async()=>{var s,t;v.value=!0;try{await y.post("/time-entries/break-end"),await J(),await $()}catch(a){alert(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Error ending break")}finally{v.value=!1}},Tt=async s=>{var t,a;if(!I.value){alert("Please Time In first before starting a task.");return}if(N.value&&await ft(),f.value&&f.value!==s)try{await y.post("/tasks/stop")}catch{}try{await y.post("/tasks/start",{task_id:s}),f.value=s,await kt()}catch(n){alert(((a=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to start task")}},Dt=async()=>{try{await y.post("/tasks/stop")}catch{}f.value=null,await kt()},Jt=async(s,t)=>{var n,u;if(!t)return;if(!confirm(`Are you sure you want to set this task to "${t}"?`)){await $();return}v.value=!0;try{await y.post(`/tasks/${s}/status`,{status:t}),await $()}catch(c){alert(((u=(n=c==null?void 0:c.response)==null?void 0:n.data)==null?void 0:u.message)||"Failed to update task status")}finally{v.value=!1}},St=async()=>{var s,t;if(W.value){Y.value=!0;try{const a=await y.get("/my/time-entries",{params:{start_date:W.value,end_date:W.value}}),n=((s=a.data)==null?void 0:s.entries)||[];bt.value=n,_.value=[];let u=0,c=0,g=null,o=null;if(n.forEach(r=>{const k=z(r.clock_in),T=z(r.clock_out);k&&(!g||k<g)&&(g=k,o=r.clock_in_formatted||r.clock_in);const E=r.task&&(r.task.title||r.task.name);if(k&&T&&!E){const A=Math.max(0,Math.floor((T.getTime()-k.getTime())/1e3));u+=A;const ut=z(r.break_start),Mt=z(r.break_end);let ct=0;ut&&Mt&&(ct=Math.max(0,Math.floor((Mt.getTime()-ut.getTime())/1e3)),c+=ct);const Yt=Math.max(0,A-ct);_.value.push({name:"Work Hours",start:r.clock_in_formatted||r.clock_in,end:r.clock_out_formatted||r.clock_out,durationSeconds:Yt,breakDurationSeconds:ct,notes:"-"})}if(E){const A=r.task.title||r.task.name;if(k&&T){const ut=Math.max(0,Math.floor((T.getTime()-k.getTime())/1e3));_.value.push({name:A,start:r.clock_in_formatted||r.clock_in,end:r.clock_out_formatted||r.clock_out,durationSeconds:ut,breakDurationSeconds:0,notes:"-"})}}const K=z(r.break_start),dt=z(r.break_end);if(K&&dt){const A=Math.max(0,Math.floor((dt.getTime()-K.getTime())/1e3));_.value.push({name:"Break",start:r.break_start_formatted||r.break_start,end:r.break_end_formatted||r.break_end,durationSeconds:A,breakDurationSeconds:A,notes:"-"})}}),_.value.sort((r,k)=>{const T=new Date(r.start).getTime(),E=new Date(k.start).getTime();return(isNaN(E)?0:E)-(isNaN(T)?0:T)}),(t=a.data)!=null&&t.daily_totals)b.value={workSeconds:a.data.daily_totals.work_seconds||0,breakSeconds:a.data.daily_totals.break_seconds||0,lunchSeconds:a.data.daily_totals.lunch_seconds||0,tasksCount:a.data.daily_totals.tasks_count||0,status:a.data.daily_totals.status||"No Entry",overtimeSeconds:a.data.daily_totals.overtime_seconds||0};else{const k=Math.max(0,u-c),T=Math.max(0,k-28800);let E="No Entry";if(g){const K=(g.getUTCHours()+8)%24,dt=g.getUTCMinutes();E=K<8||K===8&&dt<=30?"Perfect":"Late"}b.value={workSeconds:k,breakSeconds:c,lunchSeconds:0,tasksCount:_.value.length,status:E,overtimeSeconds:T}}}catch(a){console.error("Error loading time entries",a),bt.value=[],_.value=[],b.value={workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}}finally{Y.value=!1}}},z=s=>{if(!s)return null;const t=s.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?/);if(t){const u=Number(t[1]),c=Number(t[2])-1,g=Number(t[3]),o=Number(t[4]),r=Number(t[5]),k=Number(t[6]||"0");return new Date(Date.UTC(u,c,g,o-8,r,k))}const a=s.includes("T")?s:s.replace(" ","T"),n=new Date(a);return isNaN(n.getTime())?null:n},R=s=>{if(!s)return"--";try{const a=new Date(s);if(!isNaN(a.getTime()))return a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Manila"})}catch{}const t=s.match(/\b(\d{1,2}):(\d{2})(?::(\d{2}))?/);if(t){let a=parseInt(t[1],10);const n=t[2],u=a>=12?"PM":"AM";return a=a%12,a===0&&(a=12),`${a}:${n} ${u}`}return"--"},w=s=>{const t=typeof s=="number"&&isFinite(s)?Math.max(0,Math.floor(s)):0,a=Math.floor(t/3600),n=Math.floor(t%3600/60),u=t%60,c=g=>g<10?`0${g}`:`${g}`;return`${c(a)}:${c(n)}:${c(u)}`},Kt=s=>{if(!s)return"";const t=s.toLowerCase().trim();return t==="to do"||t==="todo"?"text-gray-700":t.includes("complete")||t.includes("done")||t.includes("finished")?"bg-green-100 text-green-800":t.includes("progress")||t.includes("doing")||t.includes("in progress")||t.includes("working")?"bg-blue-100 text-blue-800":t.includes("pending")||t.includes("waiting")?"bg-yellow-100 text-yellow-800":t.includes("blocked")||t.includes("stuck")?"bg-red-100 text-red-800":t.includes("review")||t.includes("testing")?"bg-purple-100 text-purple-800":t.includes("cancel")||t.includes("closed")?"bg-gray-100 text-gray-800":"bg-indigo-100 text-indigo-800"},Qt=s=>{if(!s)return"bg-gray-100 text-gray-800";const t=s.toLowerCase().trim();return t==="urgent"||t==="critical"?"bg-red-100 text-red-800":t==="high"?"bg-orange-100 text-orange-800":t==="normal"||t==="medium"?"bg-yellow-100 text-yellow-800":t==="low"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"},Xt=s=>{if(!s)return!1;const t=s.toLowerCase().trim();return t!=="to do"&&t!=="todo"};return(s,t)=>(d(),i(D,null,[Ct(ae(oe),{title:"Dashboard"}),Ct(le,null,{header:Nt(()=>[...t[23]||(t[23]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Time Tracker Dashboard ",-1)])]),default:Nt(()=>{var a,n,u,c,g;return[e("div",re,[e("div",ie,[S.value!=="admin"?(d(),i("div",de,[e("nav",ue,[e("button",{onClick:t[0]||(t[0]=o=>H.value="dashboard"),class:L(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",H.value==="dashboard"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Dashboard ",2),e("button",{onClick:t[1]||(t[1]=o=>{H.value="time-entries",St()}),class:L(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",H.value==="time-entries"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Time Entries ",2)])])):p("",!0),H.value==="dashboard"||S.value==="admin"?(d(),i("div",ce,[S.value!=="admin"?(d(),i("div",me,[e("div",xe,[e("div",ge,[t[24]||(t[24]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Work Day Timer",-1)),e("p",pe,l(Ft.value),1),e("p",ve,l(N.value?"On Break":I.value?"Working":"Idle"),1),e("div",ye,[e("button",{onClick:It,disabled:v.value,class:L(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",I.value?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"])},l(I.value?"Time Out":"Time In"),11,fe),e("button",{onClick:At,disabled:v.value,class:L(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",N.value?"bg-orange-600 hover:bg-orange-700":"bg-yellow-600 hover:bg-yellow-700"])},l(N.value?"Break Out":"Break In"),11,ke)])])]),e("div",he,[e("div",be,[t[26]||(t[26]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Running Task",-1)),f.value?(d(),i("div",_e,[e("button",{onClick:t[2]||(t[2]=o=>wt(f.value)),class:"text-indigo-600 hover:underline text-sm"},l(((a=F.value.find(o=>o.id===f.value))==null?void 0:a.title)||"#"+f.value),1),e("p",we,l(Ht.value),1),e("div",Te,[e("button",{onClick:t[3]||(t[3]=o=>Dt()),disabled:v.value,class:"rounded-md bg-yellow-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-yellow-700"},"Pause",8,De)])])):(d(),i("div",Se,[e("div",Me,[B(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>q.value=o),class:"w-full rounded-md border-gray-300 text-sm shadow-sm"},[t[25]||(t[25]=e("option",{value:null},"Select a task",-1)),(d(!0),i(D,null,U(F.value,o=>(d(),i("option",{key:o.id,value:o.id},l(o.title),9,Ce))),128))],512),[[mt,q.value]]),e("button",{onClick:t[5]||(t[5]=o=>q.value?Tt(q.value):void 0),disabled:v.value||!q.value,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700 disabled:opacity-50"},"Start",8,Ne)]),F.value.length?p("",!0):(d(),i("p",$e,"No tasks available."))]))])]),e("div",Ee,[e("div",Le,[t[28]||(t[28]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Daily Logs",-1)),e("p",Be,[ne(l(Wt.value),1),t[27]||(t[27]=e("span",{class:"text-sm font-normal text-gray-500"}," / 8 Hours",-1))]),e("div",{class:"mt-4 flex space-x-2"},[e("button",{onClick:jt,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-700"},"Daily Logs")])])])])):p("",!0),S.value==="admin"?(d(),i("div",Ue,[e("div",Pe,[e("div",Ie,[t[29]||(t[29]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Real-Time Activity Log",-1)),e("button",{onClick:vt,disabled:rt.value,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-500"},"Refresh",8,Ae)]),e("div",Oe,[e("table",Ve,[t[31]||(t[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"User"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Action"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Description"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Time")])],-1)),e("tbody",Fe,[(d(!0),i(D,null,U(lt.value,o=>{var r;return d(),i("tr",{key:o.id},[e("td",He,l(((r=o.user)==null?void 0:r.name)||"Unknown"),1),e("td",We,l(o.action),1),e("td",je,l(o.description),1),e("td",ze,l(new Date(o.created_at).toLocaleString()),1)])}),128)),lt.value.length===0&&!rt.value?(d(),i("tr",Re,[...t[30]||(t[30]=[e("td",{colspan:"4",class:"px-4 py-4 text-center text-sm text-gray-500"},"No activity logs found",-1)])])):p("",!0)])])])])])):p("",!0),S.value!=="admin"?(d(),i("div",qe,[e("div",Ze,[e("div",Ge,[t[35]||(t[35]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"My Tasks",-1)),e("div",Je,[e("button",{onClick:Bt,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700"},"Refresh from ClickUp"),B(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>gt.value=o),onInput:t[7]||(t[7]=o=>C(1)),type:"text",placeholder:"Search tasks",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[xt,gt.value]]),B(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>tt.value=o),onChange:t[9]||(t[9]=o=>C(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[t[32]||(t[32]=e("option",{value:"all"},"All",-1)),(d(!0),i(D,null,U(et.value,o=>(d(),i("option",{key:o,value:o},l(o),9,Ke))),128))],544),[[mt,tt.value]]),B(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>st.value=o),onChange:t[11]||(t[11]=o=>C(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...t[33]||(t[33]=[e("option",{value:"all"},"All priorities",-1),e("option",{value:"urgent"},"Urgent",-1),e("option",{value:"high"},"High",-1),e("option",{value:"normal"},"Normal",-1),e("option",{value:"low"},"Low",-1),e("option",{value:"none"},"None",-1)])],544),[[mt,st.value]]),B(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>at.value=o),onChange:t[13]||(t[13]=o=>C(1)),type:"date",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[xt,at.value]]),B(e("input",{"onUpdate:modelValue":t[14]||(t[14]=o=>ot.value=o),onChange:t[15]||(t[15]=o=>C(1)),type:"date",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[xt,ot.value]]),B(e("select",{"onUpdate:modelValue":t[16]||(t[16]=o=>G.value=o),onChange:t[17]||(t[17]=o=>C(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...t[34]||(t[34]=[e("option",{value:5},"5",-1),e("option",{value:10},"10",-1),e("option",{value:20},"20",-1),e("option",{value:50},"50",-1)])],544),[[mt,G.value,void 0,{number:!0}]])])]),e("div",Qe,[e("table",Xe,[t[39]||(t[39]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Due Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Priority"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Actions")])],-1)),e("tbody",Ye,[(d(!0),i(D,null,U($t.value,o=>(d(),i("tr",{key:o.id},[e("td",ts,[e("button",{onClick:r=>wt(o.id),class:"hover:underline"},l(o.title),9,es)]),e("td",ss,[Xt(o.status)?(d(),i("span",{key:0,class:L(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold",Kt(o.status)])},l(o.status||"â€”"),3)):(d(),i("span",as,l(o.status||"â€”"),1))]),e("td",os,l(o.due_date?new Date(o.due_date).toLocaleDateString():"--"),1),e("td",ns,[e("span",{class:L(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold",Qt(o.priority||null)])},l(o.priority||"None"),3)]),e("td",ls,[e("div",rs,[e("button",{onClick:r=>f.value===o.id?Dt():Tt(o.id),disabled:v.value,class:L(["rounded-full p-2 text-white",f.value===o.id?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"]),"aria-label":f.value===o.id?"Pause":"Play"},[f.value!==o.id?(d(),i("svg",ds,[...t[36]||(t[36]=[e("path",{d:"M8 5v14l11-7z"},null,-1)])])):(d(),i("svg",us,[...t[37]||(t[37]=[e("path",{d:"M6 5h4v14H6zM14 5h4v14h-4z"},null,-1)])]))],10,is),e("select",{value:o.status||"",onChange:r=>Jt(o.id,r.target.value),class:"rounded-md border-gray-300 text-xs shadow-sm"},[t[38]||(t[38]=e("option",{disabled:"",value:""},"Set statusâ€¦",-1)),(d(!0),i(D,null,U(et.value,r=>(d(),i("option",{key:r+o.id,value:r},l(r),9,ms))),128)),et.value.includes("complete")?p("",!0):(d(),i("option",xs,"complete")),et.value.includes("done")?p("",!0):(d(),i("option",gs,"done"))],40,cs)])])]))),128))])]),e("div",ps,[e("div",null," Page "+l(P.value)+" of "+l(nt.value)+" â€¢ "+l(pt.value.length)+" total ",1),e("div",vs,[e("button",{onClick:t[18]||(t[18]=o=>C(P.value-1)),disabled:P.value<=1,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Prev",8,ys),e("button",{onClick:t[19]||(t[19]=o=>C(P.value+1)),disabled:P.value>=nt.value,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Next",8,fs)])])])])])):p("",!0),e("div",ks,[e("div",hs,[t[41]||(t[41]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Today's Time Events",-1)),it.value.length===0?(d(),i("div",bs," No time entries recorded today. Clock in to start tracking time. ")):(d(),i("div",_s,[e("table",ws,[t[40]||(t[40]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),e("tbody",Ts,[(d(!0),i(D,null,U(it.value,(o,r)=>(d(),i("tr",{key:r},[e("td",Ds,l(o.name),1),e("td",Ss,l(R(o.start)),1),e("td",Ms,l(R(o.end)),1),e("td",Cs,l(w(o.durationSeconds)),1),e("td",Ns,l(w(o.breakDurationSeconds||0)),1),e("td",$s,l(o.notes||"-"),1)]))),128))])])]))])])])):p("",!0),H.value==="time-entries"&&S.value!=="admin"?(d(),i("div",Es,[e("div",Ls,[e("div",Bs,[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),B(e("input",{"onUpdate:modelValue":t[20]||(t[20]=o=>W.value=o),onChange:St,type:"date",class:"w-full rounded-md border-gray-300 shadow-sm"},null,544),[[xt,W.value]])])])]),e("div",Us,[t[48]||(t[48]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Daily Summary",-1)),e("div",Ps,[e("div",null,[t[43]||(t[43]=e("div",{class:"text-gray-500"},"ðŸ•’ Time In Hours",-1)),e("div",Is,l(w(b.value.workSeconds)),1)]),e("div",null,[t[44]||(t[44]=e("div",{class:"text-gray-500"},"â˜• Total Breaks",-1)),e("div",As,l(w(b.value.breakSeconds)),1)]),e("div",null,[t[45]||(t[45]=e("div",{class:"text-gray-500"},"ðŸ“‹ Entries",-1)),e("div",Os,l(b.value.tasksCount),1)]),e("div",null,[t[46]||(t[46]=e("div",{class:"text-gray-500"},"â° Status",-1)),e("div",{class:L(["font-semibold",{"text-green-700":b.value.status==="Perfect","text-yellow-700":b.value.status==="Late","text-gray-700":b.value.status==="No Entry"}])},l(b.value.status),3)]),e("div",null,[t[47]||(t[47]=e("div",{class:"text-gray-500"},"âš¡ Overtime",-1)),e("div",Vs,l(w(b.value.overtimeSeconds)),1)])])]),e("div",Fs,[e("div",Hs,[e("table",Ws,[t[50]||(t[50]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),e("tbody",js,[(d(!0),i(D,null,U(_.value,(o,r)=>(d(),i("tr",{key:r},[e("td",zs,l(o.name),1),e("td",Rs,l(R(o.start)),1),e("td",qs,l(R(o.end)),1),e("td",Zs,l(w(o.durationSeconds)),1),e("td",Gs,l(w(o.breakDurationSeconds||0)),1),e("td",Js,l(o.notes||"-"),1)]))),128)),_.value.length===0&&!Y.value?(d(),i("tr",Ks,[...t[49]||(t[49]=[e("td",{colspan:"6",class:"px-4 py-4 text-center text-sm text-gray-500"},"No entries for selected day",-1)])])):p("",!0)])])]),Y.value?(d(),i("div",Qs,[...t[51]||(t[51]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),e("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):p("",!0)])])):p("",!0)]),Q.value?(d(),i("div",Xs,[e("div",Ys,[e("div",ta,[t[52]||(t[52]=e("h4",{class:"text-md font-semibold"},"Daily Logs",-1)),e("button",{onClick:t[21]||(t[21]=o=>Q.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs"},"Close")]),e("div",ea,[it.value.length===0?(d(),i("div",sa,"No entry today.")):(d(),i("div",aa,[e("table",oa,[t[53]||(t[53]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),e("tbody",na,[(d(!0),i(D,null,U(it.value,(o,r)=>(d(),i("tr",{key:r},[e("td",la,l(o.name),1),e("td",ra,l(R(o.start)),1),e("td",ia,l(R(o.end)),1),e("td",da,l(w(o.durationSeconds)),1),e("td",ua,l(w(o.breakDurationSeconds||0)),1),e("td",ca,l(o.notes||"-"),1)]))),128))])])]))])])])):p("",!0),X.value?(d(),i("div",ma,[e("div",xa,[e("div",ga,[t[54]||(t[54]=e("h4",{class:"text-md font-semibold"},"Task Details",-1)),e("button",{onClick:t[22]||(t[22]=o=>X.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs"},"Close")]),M.value?(d(),i("div",pa,[e("p",va,l((n=M.value.task)==null?void 0:n.title),1),e("p",ya,"Status: "+l((u=M.value.task)==null?void 0:u.status),1),(c=M.value.clickup)!=null&&c.url?(d(),i("p",fa,[e("a",{href:M.value.clickup.url,target:"_blank",class:"text-indigo-600 hover:underline"},"Open in ClickUp",8,ka)])):p("",!0),(g=M.value.clickup)!=null&&g.text_content?(d(),i("div",ha,l(M.value.clickup.text_content),1)):p("",!0)])):p("",!0)])])):p("",!0)])]}),_:1})],64))}});export{Da as default};
