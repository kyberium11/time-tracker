import{d as Mt,r,c as ot,o as Dt,w as z,a as i,b as xt,u as Ut,h as Lt,e as gt,f as t,n as N,g as n,i as f,t as a,j as at,F as k,k as C,l as I,v as lt,m as Nt}from"./app-BJimZqhH.js";import{_ as $t}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-CcPuln5n.js";import{a as F}from"./api-ChlijbJn.js";const Ht={class:"py-12"},At={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},Et={class:"border-b border-gray-200 mb-6"},Pt={class:"-mb-px flex space-x-8"},jt={key:0,class:"space-y-8"},Bt={class:"space-y-6"},Ft={class:"flex flex-wrap items-center justify-between gap-3"},Rt={key:0,class:"text-sm text-gray-500"},Vt={class:"flex items-center gap-2"},Wt=["disabled"],Ot={key:0,class:"h-3 w-3 animate-spin rounded-full border-2 border-indigo-500 border-t-transparent"},zt={key:0,class:"bg-white shadow rounded-lg p-10 text-center text-sm text-gray-500"},It={key:1,class:"bg-red-50 border border-red-200 text-red-700 rounded-lg p-6 flex flex-col gap-4"},qt={class:"text-sm"},Zt={key:2,class:"space-y-8"},Gt={class:"grid gap-4 md:grid-cols-2 xl:grid-cols-3"},Qt={class:"text-sm font-semibold uppercase tracking-wide text-gray-500"},Yt={class:"mt-2 text-3xl font-bold"},Jt={class:"mt-2 text-sm text-gray-600"},Kt={class:"grid gap-6 lg:grid-cols-2"},Xt={class:"rounded-xl bg-white shadow-sm"},te={class:"border-b border-gray-100 px-5 py-4"},ee={class:"text-sm text-gray-500"},se={key:0,class:"divide-y divide-gray-100"},oe={class:"font-medium text-gray-900"},ae={class:"text-sm text-gray-500"},le={key:0,class:"ml-1 text-gray-400"},ie={class:"text-right"},ne={class:"text-sm font-semibold text-indigo-600"},re={class:"text-xs text-gray-500"},de={key:1,class:"px-5 py-6 text-sm text-gray-500"},ce={class:"rounded-xl bg-white shadow-sm"},ue={class:"space-y-4 px-5 py-6"},me={class:"text-sm font-medium text-gray-600"},ve={class:"text-sm font-semibold text-gray-900 text-right"},xe={class:"space-y-6"},ge={class:"bg-white shadow rounded-lg p-4"},pe={class:"flex justify-between items-end gap-4"},ye={class:"flex-1"},he={key:0,class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4"},fe={class:"bg-white overflow-hidden shadow rounded-lg"},_e={class:"p-5"},be={class:"flex items-center"},we={class:"ml-5 w-0 flex-1"},ke={class:"text-2xl font-semibold text-gray-900"},Se={class:"bg-white overflow-hidden shadow rounded-lg"},Te={class:"p-5"},Ce={class:"flex items-center"},Me={class:"ml-5 w-0 flex-1"},De={class:"text-2xl font-semibold text-gray-900"},Ue={class:"bg-white overflow-hidden shadow rounded-lg"},Le={class:"p-5"},Ne={class:"flex items-center"},$e={class:"ml-5 w-0 flex-1"},He={class:"text-2xl font-semibold text-gray-900"},Ae={class:"bg-white overflow-hidden shadow rounded-lg"},Ee={class:"p-5"},Pe={class:"flex items-center"},je={class:"ml-5 w-0 flex-1"},Be={class:"text-2xl font-semibold text-gray-900"},Fe={key:1,class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3"},Re={class:"bg-white overflow-hidden shadow rounded-lg p-5"},Ve={class:"text-3xl font-semibold text-gray-900"},We={class:"bg-white overflow-hidden shadow rounded-lg p-5"},Oe={class:"text-3xl font-semibold text-gray-900"},ze={class:"bg-white overflow-hidden shadow rounded-lg p-5"},Ie={class:"text-3xl font-semibold text-gray-900"},qe={key:2,class:"bg-white shadow rounded-lg"},Ze={class:"px-4 py-5 sm:p-6"},Ge={class:"min-w-full divide-y divide-gray-200"},Qe={class:"divide-y divide-gray-200"},Ye={class:"px-4 py-4 text-sm text-gray-900"},Je={class:"px-4 py-4 text-sm text-gray-500"},Ke={class:"px-4 py-4 text-sm text-gray-500"},Xe={key:3,class:"text-center py-12"},ts={key:1,class:"space-y-6"},es={class:"bg-white shadow rounded-lg p-4"},ss={class:"grid gap-4 sm:grid-cols-3"},os=["value"],as={class:"flex items-end gap-2"},ls=["disabled"],is=["disabled"],ns={class:"bg-white shadow rounded-lg p-5"},rs={class:"grid gap-4 sm:grid-cols-3 lg:grid-cols-5 text-sm"},ds={class:"font-semibold"},cs={class:"font-semibold"},us={class:"font-semibold"},ms={class:"font-semibold"},vs={class:"bg-white shadow rounded-lg"},xs={class:"overflow-x-auto"},gs={class:"min-w-full divide-y divide-gray-200"},ps={class:"divide-y divide-gray-200"},ys={class:"px-4 py-4 text-sm text-gray-900"},hs={class:"px-4 py-4 text-sm text-gray-500"},fs={class:"px-4 py-4 text-sm text-gray-500"},_s={class:"px-4 py-4 text-sm text-gray-900 font-semibold"},bs={class:"px-4 py-4 text-sm text-gray-500"},ws={class:"px-4 py-4 text-sm text-gray-500"},ks={key:0},Ss={key:0,class:"text-center py-8"},Ts={key:2,class:"space-y-6"},Cs={class:"bg-white shadow rounded-lg p-4"},Ms={class:"flex justify-between items-center mb-4"},Ds={class:"flex items-center gap-2"},Us={class:"grid gap-4 sm:grid-cols-2"},Ls={class:"bg-white shadow rounded-lg"},Ns={class:"overflow-x-auto"},$s={class:"min-w-full divide-y divide-gray-200"},Hs={class:"divide-y divide-gray-200 bg-white"},As={class:"px-4 py-4 whitespace-nowrap"},Es={class:"flex items-center"},Ps={class:"flex-shrink-0 h-10 w-10"},js={class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},Bs={class:"text-indigo-600 font-medium"},Fs={class:"ml-4"},Rs={class:"text-sm font-medium text-gray-900"},Vs={class:"text-sm text-gray-500"},Ws={class:"px-4 py-4 whitespace-nowrap"},Os={class:"px-4 py-4"},zs={class:"text-sm text-gray-900"},Is={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-500"},qs={class:"text-xs text-gray-400"},Zs={key:0},Gs={key:0,class:"text-center py-8"},Qs="Asia/Manila",to=Mt({__name:"Analytics",setup(Ys){const v=r(null),q=r(!0),R=r(null),$=r(!1),Z=async()=>{var o,e;try{R.value=null;const{data:s}=await F.get("/admin/analytics/summary");v.value=s}catch(s){console.error(s),R.value=((e=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:e.error)||"Unable to load analytics summary.",v.value=null}finally{q.value=!1,$.value=!1}},it=async()=>{$.value=!0,await Z()},G=o=>`${o.toFixed(2)} h`,H=o=>o.toLocaleString(),Q=o=>new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),nt=o=>new Date(o).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),pt=o=>{if(o===null)return"--";const e=Math.floor(o/60),s=o%60;return e===0?`${s}m`:`${e}h ${s}m`},yt=o=>o?new Date(o).toLocaleString("en-US",{hour:"numeric",minute:"2-digit"}):"--",ht=ot(()=>{if(!v.value)return[];const o=v.value.totals;return[{title:"Hours Logged Today",value:G(o.hours_today),subtitle:"Completed work hours",accent:"border-blue-500 bg-blue-50 text-blue-700"},{title:"Hours Logged This Week",value:G(o.hours_week),subtitle:"Monâ€“Sun total",accent:"border-indigo-500 bg-indigo-50 text-indigo-700"},{title:"Active Users Today",value:H(o.active_users_today),subtitle:"Unique employees with activity",accent:"border-emerald-500 bg-emerald-50 text-emerald-700"},{title:"Active Users This Week",value:H(o.active_users_week),subtitle:"Unique employees this week",accent:"border-teal-500 bg-teal-50 text-teal-700"},{title:"Avg Hours / User (Week)",value:G(o.average_hours_per_user_week),subtitle:"Hours per active user",accent:"border-purple-500 bg-purple-50 text-purple-700"},{title:"Open Clock-ins",value:H(o.open_entries),subtitle:"Users still on the clock",accent:"border-amber-500 bg-amber-50 text-amber-700"}]}),ft=ot(()=>{if(!v.value)return[];const o=v.value.totals;return[{label:"Late clock-ins today",value:H(o.late_clock_ins_today)},{label:"Completed entries today",value:H(o.total_entries_today)},{label:"Week window",value:`${Q(v.value.dates.week_start)} â†’ ${Q(v.value.dates.week_end)}`},{label:"Report generated",value:nt(v.value.generated_at)}]}),rt=ot(()=>{var o;return(((o=v.value)==null?void 0:o.open_entries.length)??0)>0}),y=r("overview"),A=r("month"),p=r(null),M=r(!1),d=r(null),x=r(""),D=r([]),dt=r([]),V=r(!1),_=r([]),b=r({workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0});r([]);const Y=r([]),W=r(!1),E=r(""),_t=r(Date.now()),J=o=>{if(typeof o=="string"&&/h\s+\d{2}m\s+\d{2}s/.test(o))return o;const e=Number(o);if(!isFinite(e))return"00h 00m 00s";const s=Math.round(e*3600),m=Math.floor(s/3600),h=Math.floor(s%3600/60),c=s%60,g=S=>S<10?`0${S}`:`${S}`;return`${g(m)}h ${g(h)}m ${g(c)}s`},P=o=>{const e=typeof o=="number"&&isFinite(o)?Math.max(0,Math.floor(o)):0,s=Math.floor(e/3600),m=Math.floor(e%3600/60),h=e%60,c=g=>g<10?`0${g}`:`${g}`;return`${c(s)}:${c(m)}:${c(h)}`},K=o=>{if(!o)return"--";try{const s=new Date(o);if(!isNaN(s.getTime()))return s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:Qs})}catch{}const e=o.match(/\b(\d{1,2}):(\d{2})(?::(\d{2}))?/);if(e){let s=parseInt(e[1],10);const m=e[2],h=s>=12?"PM":"AM";return s=s%12,s===0&&(s=12),`${s}:${m} ${h}`}return"--"},U=o=>{if(!o)return null;const e=o.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?/);if(e){const h=Number(e[1]),c=Number(e[2])-1,g=Number(e[3]),S=Number(e[4]),et=Number(e[5]),st=Number(e[6]||"0");return new Date(Date.UTC(h,c,g,S-8,et,st))}const s=o.includes("T")?o:o.replace(" ","T"),m=new Date(s);return isNaN(m.getTime())?null:m},X=async()=>{M.value=!0;try{const o=await F.get("/admin/analytics/overview",{params:{period:A.value}});p.value=o.data}catch(o){console.error("Error loading overview:",o),alert("Failed to load overview data")}finally{M.value=!1}},bt=async()=>{try{const o=await F.get("/admin/analytics/users");D.value=o.data,!d.value&&D.value.length>0&&(d.value=D.value[0].id)}catch(o){console.error("Error loading users:",o)}},tt=async()=>{var o;if(d.value){V.value=!0;try{const e=await F.get(`/admin/analytics/user/${d.value}`,{params:{start_date:x.value,end_date:x.value}}),s=((o=e.data)==null?void 0:o.entries)||e.data||[];dt.value=s,_.value=[];let m=0,h=0,c=null;s.forEach(l=>{var ut,mt;if(l.entry_type==="break"||l.is_break){const T=U(l.clock_in),B=U(l.clock_out);if(T&&B){const L=Math.max(0,Math.floor((B.getTime()-T.getTime())/1e3));h+=L,_.value.push({name:"Break",start:l.clock_in_formatted||l.clock_in,end:l.clock_out_formatted||l.clock_out,durationSeconds:L,breakDurationSeconds:L,notes:"-"})}return}const u=U(l.clock_in),w=U(l.clock_out);u&&(!c||u<c)&&(c=u);const j=!!l.task&&(l.task.title||l.task.name);if(u&&w&&!j){const T=Math.max(0,Math.floor((w.getTime()-u.getTime())/1e3));m+=T;const B=U(l.lunch_start),L=U(l.lunch_end);let vt=0;B&&L&&(vt=Math.max(0,Math.floor((L.getTime()-B.getTime())/1e3)));const Ct=Math.max(0,T-vt);_.value.push({name:"Work Hours",start:l.clock_in_formatted||l.clock_in,end:l.clock_out_formatted||l.clock_out,durationSeconds:Ct,breakDurationSeconds:0,notes:"-"})}if(j&&u&&w){const T=Math.max(0,Math.floor((w.getTime()-u.getTime())/1e3));_.value.push({name:((ut=l.task)==null?void 0:ut.title)||((mt=l.task)==null?void 0:mt.name)||"Task",start:l.clock_in_formatted||l.clock_in,end:l.clock_out_formatted||l.clock_out,durationSeconds:T,breakDurationSeconds:0,notes:"-"})}}),_.value.sort((l,u)=>{const w=new Date(l.start??"").getTime(),j=new Date(u.start??"").getTime();return(isNaN(j)?0:j)-(isNaN(w)?0:w)});const g=_.value.filter(l=>l.name==="Work Hours").reduce((l,u)=>l+(u.durationSeconds||0),0),S=_.value.filter(l=>l.name==="Break").reduce((l,u)=>l+(u.durationSeconds||0),0),et=8*3600,st=Math.max(0,g-et);let ct="No Entry";if(c){const l=c,u=(l.getUTCHours()+8)%24,w=l.getUTCMinutes();ct=u<8||u===8&&w<=30?"Perfect":"Late"}b.value={workSeconds:g,breakSeconds:S,lunchSeconds:0,tasksCount:_.value.length,status:ct,overtimeSeconds:st}}catch(e){console.error("Error loading user daily analytics",e),dt.value=[],b.value={workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}}finally{V.value=!1}}},O=async(o=!1)=>{o||(W.value=!0);try{const e={limit:100};E.value&&(e.action=E.value);const s=await F.get("/admin/analytics/activity-logs",{params:e});Y.value=s.data.data,_t.value=Date.now()}catch(e){console.error("Error loading activity logs:",e),o||alert("Failed to load activity logs")}finally{W.value=!1}},wt=()=>{const o=new URLSearchParams({period:A.value,start_date:x.value,end_date:x.value});window.location.href=`/api/admin/analytics/export/csv?${o.toString()}`},kt=()=>{const o=new URLSearchParams({period:A.value,start_date:x.value,end_date:x.value});window.location.href=`/api/admin/analytics/export/pdf?${o.toString()}`},St=()=>{if(!d.value){alert("Please select a user first");return}const o=new URLSearchParams({user_id:String(d.value),start_date:x.value,end_date:x.value});window.location.href=`/api/admin/analytics/user-summary/export/csv?${o.toString()}`},Tt=()=>{if(!d.value){alert("Please select a user first");return}const o=new URLSearchParams({user_id:String(d.value),start_date:x.value,end_date:x.value});window.location.href=`/api/admin/analytics/user-summary/export/pdf?${o.toString()}`};return Dt(()=>{const o=new Date;x.value=o.toISOString().split("T")[0],X(),bt(),O(),Z()}),z(y,o=>{o==="overview"?(Z(),X()):o==="summary"?(!d.value&&D.value.length>0&&(d.value=D.value[0].id),d.value&&tt()):o==="activity"&&O(!0)}),z(d,o=>{y.value==="summary"&&o&&tt()}),z(x,()=>{y.value==="summary"&&d.value&&tt()}),z(E,()=>{y.value==="activity"&&O(!0)}),(o,e)=>(n(),i(k,null,[xt(Ut(Lt),{title:"Analytics"}),xt($t,null,{header:gt(()=>[...e[8]||(e[8]=[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Analytics & Reports ",-1)])]),default:gt(()=>[t("div",Ht,[t("div",At,[t("div",Et,[t("nav",Pt,[t("button",{onClick:e[0]||(e[0]=s=>y.value="overview"),class:N(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",y.value==="overview"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Overview ",2),t("button",{onClick:e[1]||(e[1]=s=>y.value="summary"),class:N(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",y.value==="summary"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," User Summary ",2),t("button",{onClick:e[2]||(e[2]=s=>y.value="activity"),class:N(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",y.value==="activity"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Activity Log ",2)])]),y.value==="overview"?(n(),i("div",jt,[t("section",Bt,[t("div",Ft,[t("div",null,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Company Health Overview",-1)),v.value?(n(),i("p",Rt," As of "+a(nt(v.value.generated_at)),1)):f("",!0)]),t("div",Vt,[t("button",{type:"button",onClick:it,disabled:$.value||q.value,class:"inline-flex items-center gap-2 rounded-md border border-indigo-200 bg-white px-4 py-2 text-sm font-medium text-indigo-600 shadow-sm transition hover:bg-indigo-50 disabled:cursor-not-allowed disabled:border-gray-200 disabled:text-gray-400"},[$.value?(n(),i("span",Ot)):f("",!0),t("span",null,a($.value?"Refreshingâ€¦":"Refresh"),1)],8,Wt)])]),q.value?(n(),i("div",zt,[...e[10]||(e[10]=[t("div",{class:"mx-auto mb-3 h-8 w-8 animate-spin rounded-full border-b-2 border-indigo-600"},null,-1),at(" Loading analytics summaryâ€¦ ",-1)])])):R.value?(n(),i("div",It,[t("div",null,[e[11]||(e[11]=t("h4",{class:"font-semibold text-red-800"},"We couldnâ€™t load the analytics overview.",-1)),t("p",qt,a(R.value),1)]),t("div",null,[t("button",{type:"button",onClick:it,class:"inline-flex items-center rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-red-500"}," Try again ")])])):v.value?(n(),i("div",Zt,[t("div",Gt,[(n(!0),i(k,null,C(ht.value,s=>(n(),i("div",{key:s.title,class:N(["rounded-xl border bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:shadow-md",s.accent])},[t("h4",Qt,a(s.title),1),t("p",Yt,a(s.value),1),t("p",Jt,a(s.subtitle),1)],2))),128))]),t("div",Kt,[t("div",Xt,[t("div",te,[e[12]||(e[12]=t("h4",{class:"text-base font-semibold text-gray-800"},"Whoâ€™s still on the clock",-1)),t("p",ee,a(rt.value?"Top 10 current sessions":"No one is clocked in right now."),1)]),rt.value?(n(),i("div",se,[(n(!0),i(k,null,C(v.value.open_entries,s=>(n(),i("div",{key:s.entry_id,class:"flex items-center justify-between gap-3 px-5 py-4"},[t("div",null,[t("p",oe,a(s.user.name||"Unknown User"),1),t("p",ae,[at(a(s.user.email||"No email listed")+" ",1),s.user.team?(n(),i("span",le,"Â· "+a(s.user.team),1)):f("",!0)])]),t("div",ie,[t("p",ne,a(pt(s.minutes_running)),1),t("p",re,"since "+a(yt(s.clock_in)),1)])]))),128))])):(n(),i("div",de," All clocks are cleared for today. Great job! "))]),t("div",ce,[e[13]||(e[13]=t("div",{class:"border-b border-gray-100 px-5 py-4"},[t("h4",{class:"text-base font-semibold text-gray-800"},"At a glance"),t("p",{class:"text-sm text-gray-500"},"Quick context for today and the week.")],-1)),t("dl",ue,[(n(!0),i(k,null,C(ft.value,s=>(n(),i("div",{key:s.label,class:"flex items-center justify-between gap-4"},[t("dt",me,a(s.label),1),t("dd",ve,a(s.value),1)]))),128))])])])])):f("",!0)]),t("section",xe,[t("div",ge,[t("div",pe,[t("div",ye,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Period",-1)),I(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>A.value=s),onChange:X,class:"rounded-md border-gray-300 shadow-sm"},[...e[14]||(e[14]=[t("option",{value:"daily"},"Daily",-1),t("option",{value:"weekly"},"Weekly",-1),t("option",{value:"monthly"},"Monthly",-1),t("option",{value:"ytd"},"Year to Date",-1)])],544),[[lt,A.value]])]),t("div",{class:"flex gap-2"},[t("button",{onClick:wt,class:"rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-500"}," Export CSV "),t("button",{onClick:kt,class:"rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-500"}," Export PDF ")])])]),p.value&&!M.value?(n(),i("div",he,[t("div",fe,[t("div",_e,[t("div",be,[e[17]||(e[17]=t("div",{class:"flex-shrink-0"},[t("div",{class:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center"},[t("svg",{class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])])],-1)),t("div",we,[t("dl",null,[e[16]||(e[16]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Employees",-1)),t("dd",ke,a(p.value.statistics.total_employees),1)])])])])]),t("div",Se,[t("div",Te,[t("div",Ce,[e[19]||(e[19]=t("div",{class:"flex-shrink-0"},[t("div",{class:"h-8 w-8 rounded-full bg-green-500 flex items-center justify-center"},[t("svg",{class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),t("div",Me,[t("dl",null,[e[18]||(e[18]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Hours",-1)),t("dd",De,a(p.value.statistics.total_hms||J(p.value.statistics.total_hours)),1)])])])])]),t("div",Ue,[t("div",Le,[t("div",Ne,[e[21]||(e[21]=t("div",{class:"flex-shrink-0"},[t("div",{class:"h-8 w-8 rounded-full bg-yellow-500 flex items-center justify-center"},[t("svg",{class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])])],-1)),t("div",$e,[t("dl",null,[e[20]||(e[20]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Lates",-1)),t("dd",He,a(p.value.statistics.lates_count),1)])])])])]),t("div",Ae,[t("div",Ee,[t("div",Pe,[e[23]||(e[23]=t("div",{class:"flex-shrink-0"},[t("div",{class:"h-8 w-8 rounded-full bg-purple-500 flex items-center justify-center"},[t("svg",{class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),t("div",je,[t("dl",null,[e[22]||(e[22]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Overtime",-1)),t("dd",Be,a(p.value.statistics.overtime_count),1)])])])])])])):f("",!0),p.value&&!M.value?(n(),i("div",Fe,[t("div",Re,[e[24]||(e[24]=t("h4",{class:"text-sm font-medium text-gray-500 mb-2"},"Average Hours",-1)),t("p",Ve,a(J(p.value.statistics.average_hours)),1)]),t("div",We,[e[25]||(e[25]=t("h4",{class:"text-sm font-medium text-gray-500 mb-2"},"Perfect Attendance",-1)),t("p",Oe,a(p.value.statistics.perfect_attendance_count),1)]),t("div",ze,[e[26]||(e[26]=t("h4",{class:"text-sm font-medium text-gray-500 mb-2"},"Undertime",-1)),t("p",Ie,a(p.value.statistics.undertime_count),1)])])):f("",!0),p.value&&!M.value?(n(),i("div",qe,[t("div",Ze,[e[28]||(e[28]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Top Employees",-1)),t("table",Ge,[e[27]||(e[27]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Name"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Total Hours"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Entries")])],-1)),t("tbody",Qe,[(n(!0),i(k,null,C(p.value.top_employees,s=>(n(),i("tr",{key:s.id},[t("td",Ye,a(s.name),1),t("td",Je,a(J(s.total_hours)),1),t("td",Ke,a(s.entries_count),1)]))),128))])])])])):f("",!0),M.value?(n(),i("div",Xe,[...e[29]||(e[29]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loadingâ€¦",-1)])])):f("",!0)])])):y.value==="summary"?(n(),i("div",ts,[t("div",es,[t("div",ss,[t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"User",-1)),I(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>d.value=s),class:"w-full rounded-md border-gray-300 shadow-sm"},[e[30]||(e[30]=t("option",{value:null},"Select User",-1)),(n(!0),i(k,null,C(D.value,s=>(n(),i("option",{key:s.id,value:s.id},a(s.name),9,os))),128))],512),[[lt,d.value]])]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),I(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>x.value=s),type:"date",class:"w-full rounded-md border-gray-300 shadow-sm"},null,512),[[Nt,x.value]])]),t("div",as,[t("button",{onClick:St,disabled:!d.value,class:"flex-1 rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed"}," Export CSV ",8,ls),t("button",{onClick:Tt,disabled:!d.value,class:"flex-1 rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-500 disabled:bg-gray-400 disabled:cursor-not-allowed"}," Export PDF ",8,is)])])]),t("div",ns,[e[38]||(e[38]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Daily Summary",-1)),t("div",rs,[t("div",null,[e[33]||(e[33]=t("div",{class:"text-gray-500"},"ðŸ•’ Time In Hours",-1)),t("div",ds,a(P(b.value.workSeconds)),1)]),t("div",null,[e[34]||(e[34]=t("div",{class:"text-gray-500"},"â˜• Total Breaks",-1)),t("div",cs,a(P(b.value.breakSeconds)),1)]),t("div",null,[e[35]||(e[35]=t("div",{class:"text-gray-500"},"ðŸ“‹ Entries",-1)),t("div",us,a(b.value.tasksCount),1)]),t("div",null,[e[36]||(e[36]=t("div",{class:"text-gray-500"},"â° Status",-1)),t("div",{class:N(["font-semibold",{"text-green-700":b.value.status==="Perfect","text-yellow-700":b.value.status==="Late","text-gray-700":b.value.status==="No Entry"}])},a(b.value.status),3)]),t("div",null,[e[37]||(e[37]=t("div",{class:"text-gray-500"},"âš¡ Overtime",-1)),t("div",ms,a(P(b.value.overtimeSeconds)),1)])])]),t("div",vs,[t("div",xs,[t("table",gs,[e[40]||(e[40]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),t("tbody",ps,[(n(!0),i(k,null,C(_.value,(s,m)=>(n(),i("tr",{key:m},[t("td",ys,a(s.name),1),t("td",hs,a(K(s.start)),1),t("td",fs,a(K(s.end)),1),t("td",_s,a(P(s.durationSeconds)),1),t("td",bs,a(P(s.breakDurationSeconds||0)),1),t("td",ws,a(s.notes||"-"),1)]))),128)),_.value.length===0&&!V.value?(n(),i("tr",ks,[...e[39]||(e[39]=[t("td",{colspan:"6",class:"px-4 py-4 text-center text-sm text-gray-500"},"No entries for selected day",-1)])])):f("",!0)])])]),V.value?(n(),i("div",Ss,[...e[41]||(e[41]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):f("",!0)])])):(n(),i("div",Ts,[t("div",Cs,[t("div",Ms,[e[43]||(e[43]=t("h3",{class:"text-lg font-medium text-gray-900"},"Real-Time Activity Log",-1)),t("div",Ds,[e[42]||(e[42]=t("div",{class:"flex items-center gap-2 text-sm text-gray-600"},[t("span",{class:"inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t("span",null,"Live Updates")],-1)),t("button",{onClick:e[6]||(e[6]=s=>O()),class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-indigo-500"}," Refresh ")])]),t("div",Us,[t("div",null,[e[45]||(e[45]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter by Action",-1)),I(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>E.value=s),class:"w-full rounded-md border-gray-300 shadow-sm"},[...e[44]||(e[44]=[t("option",{value:""},"All Actions",-1),t("option",{value:"clock_in"},"Clock In",-1),t("option",{value:"clock_out"},"Clock Out",-1),t("option",{value:"break_start"},"Break Start",-1),t("option",{value:"break_end"},"Break End",-1),t("option",{value:"lunch_start"},"Lunch Start",-1),t("option",{value:"lunch_end"},"Lunch End",-1)])],512),[[lt,E.value]])])])]),t("div",Ls,[t("div",Ns,[t("table",$s,[e[47]||(e[47]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"User"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Action"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Description"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Time")])],-1)),t("tbody",Hs,[(n(!0),i(k,null,C(Y.value,s=>{var m,h,c;return n(),i("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",As,[t("div",Es,[t("div",Ps,[t("div",js,[t("span",Bs,a((m=s.user)!=null&&m.name?s.user.name.charAt(0).toUpperCase():"?"),1)])]),t("div",Fs,[t("div",Rs,a(((h=s.user)==null?void 0:h.name)||"Unknown User"),1),t("div",Vs,a((c=s.user)==null?void 0:c.email),1)])])]),t("td",Ws,[t("span",{class:N(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":s.action==="clock_in","bg-red-100 text-red-800":s.action==="clock_out","bg-yellow-100 text-yellow-800":s.action.includes("break"),"bg-blue-100 text-blue-800":s.action.includes("lunch")}])},a(s.action.replace("_"," ").replace(/\b\w/g,g=>g.toUpperCase())),3)]),t("td",Os,[t("div",zs,a(s.description),1)]),t("td",Is,[at(a(Q(s.created_at))+" ",1),t("div",qs,a(K(s.created_at)),1)])])}),128)),Y.value.length===0&&!W.value?(n(),i("tr",Zs,[...e[46]||(e[46]=[t("td",{colspan:"4",class:"px-4 py-4 text-center text-sm text-gray-500"},"No activity logs found",-1)])])):f("",!0)])])]),W.value?(n(),i("div",Gs,[...e[48]||(e[48]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):f("",!0)])]))])])]),_:1})],64))}});export{to as default};
