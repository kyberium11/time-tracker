import{d as Et,r as c,q as g,o as Pt,z as At,c as n,a as pt,u as Nt,h as Ot,w as xt,b as e,e as k,f as i,t as r,n as nt,g as M,F as T,i as $,v as X,k as Ut,j as it}from"./app-CR5BoScY.js";import{_ as Vt}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-CUcec24M.js";import{a as m}from"./api-BN1pwsbH.js";const jt={class:"py-12"},zt={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},Ft={key:0,class:"mb-6 grid gap-4 md:grid-cols-3"},Rt={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Ht={class:"px-4 py-5 sm:p-6"},Wt={class:"mt-2 text-3xl font-bold text-gray-900"},qt={class:"text-xs text-gray-500"},Gt={class:"mt-4 flex flex-wrap gap-2"},Jt=["disabled"],Kt=["disabled"],Qt={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Xt={class:"px-4 py-5 sm:p-6"},Yt={key:0,class:"mt-2"},Zt={class:"text-2xl font-bold text-gray-900 mt-1"},te={class:"mt-3"},ee=["disabled"],se={key:1,class:"mt-2"},ae={class:"flex items-center gap-2 w-full"},oe=["value"],le=["disabled"],ne={key:0,class:"text-sm text-gray-500 mt-2"},ie={class:"overflow-hidden bg-white shadow sm:rounded-lg"},re={class:"px-4 py-5 sm:p-6"},de={class:"mt-2 text-3xl font-bold text-gray-900"},ce={key:1,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},ue={class:"px-4 py-5 sm:p-6"},pe={class:"flex items-center justify-between mb-4"},xe=["disabled"],ve={class:"overflow-x-auto"},me={class:"min-w-full divide-y divide-gray-200"},ye={class:"divide-y divide-gray-200 bg-white"},ge={class:"px-4 py-4 text-sm text-gray-900"},he={class:"px-4 py-4 text-sm text-gray-500"},_e={class:"px-4 py-4 text-sm text-gray-500"},ke={class:"px-4 py-4 text-sm text-gray-500"},fe={key:0},we={key:2,class:"mb-6 overflow-hidden bg-white shadow sm:rounded-lg"},be={class:"px-4 py-5 sm:p-6"},Te={class:"flex items-center justify-between mb-3"},Ce={class:"flex items-center gap-2"},De={class:"overflow-x-auto"},Me={class:"min-w-full divide-y divide-gray-200"},$e={class:"divide-y divide-gray-200 bg-white"},Se={class:"whitespace-nowrap px-6 py-4 text-sm text-indigo-600"},Ie=["onClick"],Le={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},Be={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},Ee={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},Pe={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-900"},Ae={class:"flex items-center space-x-2"},Ne=["onClick","disabled","aria-label"],Oe={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},Ue={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},Ve=["onClick","disabled"],je={key:1,class:"text-xs text-green-700 font-medium"},ze={class:"flex items-center justify-between px-6 py-3 text-sm text-gray-600"},Fe={class:"space-x-2"},Re=["disabled"],He=["disabled"],We={class:"overflow-hidden bg-white shadow sm:rounded-lg"},qe={class:"px-4 py-5 sm:p-6"},Ge={key:0,class:"text-center py-8 text-gray-500"},Je={key:1,class:"overflow-x-auto"},Ke={class:"min-w-full divide-y divide-gray-200"},Qe={class:"divide-y divide-gray-200 bg-white"},Xe={class:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900"},Ye={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},Ze={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},ts={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},es={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},ss={key:0,class:"flex items-center space-x-2"},as=["disabled"],os=["disabled"],ls=["disabled"],ns=["disabled"],is={key:1,class:"text-xs text-gray-400"},rs={class:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900"},ds={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},cs={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},us={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},ps={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500"},xs={key:0,class:"flex items-center space-x-2"},vs=["onClick","disabled"],ms=["disabled"],ys={key:1,class:"text-xs text-gray-400"},gs={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},hs={class:"w-full max-w-2xl rounded-lg bg-white shadow-lg"},_s={class:"flex items-center justify-between border-b px-4 py-3"},ks={class:"p-4"},fs={key:0,class:"text-gray-500 text-sm"},ws={key:1,class:"overflow-x-auto"},bs={class:"min-w-full divide-y divide-gray-200"},Ts={class:"divide-y divide-gray-200 bg-white"},Cs={class:"px-4 py-2 text-sm text-gray-900"},Ds={class:"px-4 py-2 text-sm text-gray-700"},Ms={class:"px-4 py-2 text-sm text-gray-700"},$s={class:"px-4 py-2 text-sm text-gray-700"},Ss={class:"px-4 py-2 text-sm text-gray-900"},Is={class:"px-4 py-2 text-sm text-gray-700"},Ls={class:"px-4 py-2 text-sm text-gray-700"},Bs={class:"px-4 py-2 text-sm text-gray-700"},Es={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Ps={class:"w-full max-w-lg rounded-lg bg-white shadow-lg"},As={class:"flex items-center justify-between border-b px-4 py-3"},Ns={key:0,class:"p-4 text-sm text-gray-700"},Os={class:"font-medium mb-1"},Us={class:"mb-2"},Vs={key:0,class:"mb-2"},js=["href"],zs={key:1,class:"prose max-w-none"},qs=Et({__name:"Dashboard",setup(Fs){const u=c(null),d=c(!1),S=c(""),I=c(new Date),C=c("employee"),P=c([]),A=c(null),x=c(null),U=c(!1),rt=c([]),L=c([]),f=c(null),V=c(!1),Y=c(""),D=c(1),N=c(10),j=c("all"),z=c("all"),F=c(""),R=c(""),Z=g(()=>{const s=Y.value.trim().toLowerCase();let t=P.value;if(j.value!=="all"&&(t=t.filter(o=>(o.status||"active").toLowerCase()===j.value)),z.value!=="all"){const o=z.value;t=t.filter(l=>(l.priority||"none").toLowerCase()===o)}if(F.value){const o=new Date(F.value).getTime();t=t.filter(l=>l.due_date?new Date(l.due_date).getTime()>=o:!1)}if(R.value){const o=new Date(R.value).getTime();t=t.filter(l=>l.due_date?new Date(l.due_date).getTime()<=o:!1)}return s?t.filter(o=>(o.title||"").toLowerCase().includes(s)):t}),H=g(()=>Math.max(1,Math.ceil(Z.value.length/N.value))),vt=g(()=>{const t=(Math.min(D.value,H.value)-1)*N.value;return Z.value.slice(t,t+N.value)}),w=s=>{const t=Math.max(1,Math.min(s,H.value));D.value=t},W=c([]),q=c(!1),tt=async()=>{var s;q.value=!0;try{const t=await m.get("/admin/analytics/activity-logs",{params:{limit:100}});W.value=((s=t.data)==null?void 0:s.data)||[]}catch{W.value=[]}finally{q.value=!1}};let et=null;const h=g(()=>{var s,t;return!!((s=u.value)!=null&&s.clock_in)&&!((t=u.value)!=null&&t.clock_out)}),_=g(()=>{var s,t;return!!((s=u.value)!=null&&s.break_start)&&!((t=u.value)!=null&&t.break_end)}),mt=g(()=>{var s,t;return((s=u.value)==null?void 0:s.lunch_start)&&!((t=u.value)!=null&&t.lunch_end)}),b=s=>s?(typeof s=="string"?new Date(s):s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"--",G=(s,t)=>{if(!s||!t)return"--";const o=new Date(s),p=new Date(t).getTime()-o.getTime(),y=Math.floor(p/36e5),Q=Math.floor(p%36e5/6e4),a=Math.floor(p%6e4/1e3);return`${y}h ${Q}m ${a}s`},st=g(()=>{const s=[];if(!u.value)return s;const t=u.value;return s.push({type:"Clock In",start:t.clock_in||null,end:null,duration:"--",status:t.clock_in?"Completed":"Not started"}),(t.break_start||t.break_end)&&s.push({type:"Break",start:t.break_start||null,end:t.break_end||null,duration:t.break_start&&t.break_end?G(t.break_start,t.break_end):t.break_start?"In progress":"--",status:t.break_start&&t.break_end?"Completed":t.break_start?"Active":"Scheduled"}),(t.lunch_start||t.lunch_end)&&s.push({type:"Lunch",start:t.lunch_start||null,end:t.lunch_end||null,duration:t.lunch_start&&t.lunch_end?G(t.lunch_start,t.lunch_end):t.lunch_start?"In progress":"--",status:t.lunch_start&&t.lunch_end?"Completed":t.lunch_start?"Active":"Scheduled"}),t.clock_out&&s.push({type:"Clock Out",start:t.clock_out||null,end:null,duration:"--",status:t.clock_out?"Completed":"Pending"}),s});Pt(()=>{O(),yt(),B(),K(),et=window.setInterval(()=>{I.value=new Date},1e3)}),At(()=>{et&&window.clearInterval(et)});const O=async()=>{try{const s=await m.get("/time-entries/current");u.value=s.data,Ct()}catch(s){u.value=null,S.value="No entry today",console.error("Error fetching current entry:",s)}},yt=async()=>{var s;try{const o=(((s=(await m.get("/admin/users")).data)==null?void 0:s.data)||[]).find(l=>(l==null?void 0:l.id)&&(l==null?void 0:l.email));o!=null&&o.role&&(C.value=o.role),C.value==="admin"&&(await tt(),setInterval(()=>{tt()},5e3))}catch{}},B=async()=>{try{const s=await m.get("/my/tasks");P.value=s.data}catch{}},at=async()=>{try{await Dt()}catch{}},ot=async()=>{try{await Mt()}catch{}},dt=async()=>{try{await $t()}catch{}},J=async()=>{try{await St()}catch{}},K=async()=>{try{const s=await m.get("/tasks/today-entries");L.value=s.data||[];const t=(L.value||[]).find(o=>o.clock_in&&!o.clock_out);x.value=t?t.task_id:null}catch{L.value=[]}},ct=async s=>{try{const t=await m.get(`/tasks/${s}/sync`);f.value=t.data,V.value=!0}catch{V.value=!1}},gt=async()=>{if(_.value){await J();return}h.value?await ot():await at()},ht=async()=>{if(x.value){alert("Pause or stop the running task first.");return}_.value?await J():(h.value||await at(),await dt())},E=s=>s<10?`0${s}`:`${s}`,_t=g(()=>{var s,t;return _.value&&((s=u.value)!=null&&s.break_start)?new Date(u.value.break_start):h.value&&((t=u.value)!=null&&t.clock_in)?new Date(u.value.clock_in):null}),kt=g(()=>{const s=L.value.find(t=>t.clock_in&&!t.clock_out);return s?new Date(s.clock_in):null}),ft=g(()=>{const s=_t.value;if(!s)return"00:00:00";const t=I.value.getTime()-s.getTime(),o=Math.max(0,Math.floor(t/1e3)),l=Math.floor(o/3600),p=Math.floor(o%3600/60),y=o%60;return`${E(l)}:${E(p)}:${E(y)}`}),wt=g(()=>{const s=kt.value;if(!s)return"00:00:00";const t=I.value.getTime()-s.getTime(),o=Math.max(0,Math.floor(t/1e3)),l=Math.floor(o/3600),p=Math.floor(o%3600/60),y=o%60;return`${E(l)}:${E(p)}:${E(y)}`}),bt=g(()=>{const s=u.value;if(!s||!s.clock_in)return 0;const t=new Date(s.clock_in),o=s.clock_out?new Date(s.clock_out):I.value;let l=Math.max(0,Math.floor((o.getTime()-t.getTime())/6e4));if(s.break_start&&s.break_end){const p=new Date(s.break_start),y=new Date(s.break_end);l-=Math.max(0,Math.floor((y.getTime()-p.getTime())/6e4))}else if(s.break_start&&!s.break_end){const p=new Date(s.break_start);l-=Math.max(0,Math.floor((I.value.getTime()-p.getTime())/6e4))}if(s.lunch_start&&s.lunch_end){const p=new Date(s.lunch_start),y=new Date(s.lunch_end);l-=Math.max(0,Math.floor((y.getTime()-p.getTime())/6e4))}else if(s.lunch_start&&!s.lunch_end){const p=new Date(s.lunch_start);l-=Math.max(0,Math.floor((I.value.getTime()-p.getTime())/6e4))}return(Math.max(0,l)/60).toFixed(2)}),Tt=async()=>{try{U.value=!0,rt.value=[u.value].filter(Boolean)}catch{U.value=!0,rt.value=[]}},Ct=()=>{!u.value||!u.value.clock_in?S.value="Not clocked in":u.value.clock_out?S.value="Clocked out":mt.value?S.value="On lunch":_.value?S.value="On break":S.value="Clocked in"},Dt=async s=>{var t,o;d.value=!0;try{const l={};await m.post("/time-entries/clock-in",l),await O(),await B()}catch(l){alert(((o=(t=l.response)==null?void 0:t.data)==null?void 0:o.message)||"Error clocking in")}finally{d.value=!1}},Mt=async()=>{var s,t;d.value=!0;try{if(x.value){alert("Pause or stop the running task first."),d.value=!1;return}await m.post("/time-entries/clock-out"),await O(),await B()}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error clocking out")}finally{d.value=!1}},$t=async()=>{var s,t;d.value=!0;try{await m.post("/time-entries/break-start"),await O(),await B()}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error starting break")}finally{d.value=!1}},St=async()=>{var s,t;d.value=!0;try{await m.post("/time-entries/break-end"),await O(),await B()}catch(o){alert(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error ending break")}finally{d.value=!1}},lt=async s=>{var t,o;if(!h.value){alert("Please Time In first before starting a task.");return}if(_.value&&await J(),x.value&&x.value!==s)try{await m.post("/tasks/stop")}catch{}try{await m.post("/tasks/start",{task_id:s}),x.value=s,await K()}catch(l){alert(((o=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:o.message)||"Failed to start task")}},ut=async()=>{try{await m.post("/tasks/stop")}catch{}x.value=null,await K()},It=async()=>{if(h.value){try{await m.post("/tasks/stop")}catch{await ot()}x.value=null,await K()}},Lt=async s=>{var t,o;d.value=!0;try{await m.post(`/tasks/${s}/status`,{status:"complete"}),await B()}catch(l){alert(((o=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:o.message)||"Failed to complete task")}finally{d.value=!1}};return(s,t)=>(i(),n(T,null,[pt(Nt(Ot),{title:"Dashboard"}),pt(Vt,null,{header:xt(()=>[...t[21]||(t[21]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Time Tracker Dashboard ",-1)])]),default:xt(()=>{var o,l,p,y,Q;return[e("div",jt,[e("div",zt,[C.value!=="admin"?(i(),n("div",Ft,[e("div",Rt,[e("div",Ht,[t[22]||(t[22]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Work Day Timer",-1)),e("p",Wt,r(ft.value),1),e("p",qt,r(_.value?"On Break":h.value?"Working":"Idle"),1),e("div",Gt,[e("button",{onClick:gt,disabled:d.value,class:nt(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",h.value?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"])},r(h.value?"Time Out":"Time In"),11,Jt),e("button",{onClick:ht,disabled:d.value,class:nt(["rounded-md px-3 py-1.5 text-xs font-semibold text-white",_.value?"bg-orange-600 hover:bg-orange-700":"bg-yellow-600 hover:bg-yellow-700"])},r(_.value?"Break Out":"Break In"),11,Kt)])])]),e("div",Qt,[e("div",Xt,[t[24]||(t[24]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Running Task",-1)),x.value?(i(),n("div",Yt,[e("button",{onClick:t[0]||(t[0]=a=>ct(x.value)),class:"text-indigo-600 hover:underline text-sm"},r(((o=P.value.find(a=>a.id===x.value))==null?void 0:o.title)||"#"+x.value),1),e("p",Zt,r(wt.value),1),e("div",te,[e("button",{onClick:t[1]||(t[1]=a=>ut()),disabled:d.value,class:"rounded-md bg-yellow-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-yellow-700"},"Pause",8,ee)])])):(i(),n("div",se,[e("div",ae,[M(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>A.value=a),class:"w-full rounded-md border-gray-300 text-sm shadow-sm"},[t[23]||(t[23]=e("option",{value:null},"Select a task",-1)),(i(!0),n(T,null,$(P.value,a=>(i(),n("option",{key:a.id,value:a.id},r(a.title),9,oe))),128))],512),[[X,A.value]]),e("button",{onClick:t[3]||(t[3]=a=>A.value?lt(A.value):void 0),disabled:d.value||!A.value,class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-green-700 disabled:opacity-50"},"Start",8,le)]),P.value.length?k("",!0):(i(),n("p",ne,"No tasks available."))]))])]),e("div",ie,[e("div",re,[t[27]||(t[27]=e("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Daily Logs",-1)),e("p",de,[Ut(r(bt.value),1),t[25]||(t[25]=e("span",{class:"text-sm font-normal text-gray-500"}," / 8 Hours",-1))]),e("div",{class:"mt-4 flex space-x-2"},[e("button",{onClick:Tt,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-700"},"Daily Logs"),t[26]||(t[26]=e("button",{class:"rounded-md bg-yellow-500 px-3 py-1.5 text-xs font-semibold text-white hover:bg-yellow-600"},"Send Report",-1))])])])])):k("",!0),C.value==="admin"?(i(),n("div",ce,[e("div",ue,[e("div",pe,[t[28]||(t[28]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Real-Time Activity Log",-1)),e("button",{onClick:tt,disabled:q.value,class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-500"},"Refresh",8,xe)]),e("div",ve,[e("table",me,[t[30]||(t[30]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"User"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Action"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Description"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Time")])],-1)),e("tbody",ye,[(i(!0),n(T,null,$(W.value,a=>{var v;return i(),n("tr",{key:a.id},[e("td",ge,r(((v=a.user)==null?void 0:v.name)||"Unknown"),1),e("td",he,r(a.action),1),e("td",_e,r(a.description),1),e("td",ke,r(new Date(a.created_at).toLocaleString()),1)])}),128)),W.value.length===0&&!q.value?(i(),n("tr",fe,[...t[29]||(t[29]=[e("td",{colspan:"4",class:"px-4 py-4 text-center text-sm text-gray-500"},"No activity logs found",-1)])])):k("",!0)])])])])])):k("",!0),C.value!=="admin"?(i(),n("div",we,[e("div",be,[e("div",Te,[t[34]||(t[34]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"My Tasks",-1)),e("div",Ce,[M(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>Y.value=a),onInput:t[5]||(t[5]=a=>w(1)),type:"text",placeholder:"Search tasks",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[it,Y.value]]),M(e("select",{"onUpdate:modelValue":t[6]||(t[6]=a=>j.value=a),onChange:t[7]||(t[7]=a=>w(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...t[31]||(t[31]=[e("option",{value:"all"},"All",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"complete"},"Complete",-1)])],544),[[X,j.value]]),M(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>z.value=a),onChange:t[9]||(t[9]=a=>w(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...t[32]||(t[32]=[e("option",{value:"all"},"All priorities",-1),e("option",{value:"urgent"},"Urgent",-1),e("option",{value:"high"},"High",-1),e("option",{value:"normal"},"Normal",-1),e("option",{value:"low"},"Low",-1),e("option",{value:"none"},"None",-1)])],544),[[X,z.value]]),M(e("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>F.value=a),onChange:t[11]||(t[11]=a=>w(1)),type:"date",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[it,F.value]]),M(e("input",{"onUpdate:modelValue":t[12]||(t[12]=a=>R.value=a),onChange:t[13]||(t[13]=a=>w(1)),type:"date",class:"rounded-md border-gray-300 text-sm shadow-sm"},null,544),[[it,R.value]]),M(e("select",{"onUpdate:modelValue":t[14]||(t[14]=a=>N.value=a),onChange:t[15]||(t[15]=a=>w(1)),class:"rounded-md border-gray-300 text-sm shadow-sm"},[...t[33]||(t[33]=[e("option",{value:5},"5",-1),e("option",{value:10},"10",-1),e("option",{value:20},"20",-1),e("option",{value:50},"50",-1)])],544),[[X,N.value,void 0,{number:!0}]])])]),e("div",De,[e("table",Me,[t[37]||(t[37]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Due Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Priority"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Actions")])],-1)),e("tbody",$e,[(i(!0),n(T,null,$(vt.value,a=>(i(),n("tr",{key:a.id},[e("td",Se,[e("button",{onClick:v=>ct(a.id),class:"hover:underline"},r(a.title),9,Ie)]),e("td",Le,r(a.status||"active"),1),e("td",Be,r(a.due_date?new Date(a.due_date).toLocaleDateString():"--"),1),e("td",Ee,r(a.priority||"--"),1),e("td",Pe,[e("div",Ae,[e("button",{onClick:v=>x.value===a.id?ut():lt(a.id),disabled:d.value,class:nt(["rounded-full p-2 text-white",x.value===a.id?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"]),"aria-label":x.value===a.id?"Pause":"Play"},[x.value!==a.id?(i(),n("svg",Oe,[...t[35]||(t[35]=[e("path",{d:"M8 5v14l11-7z"},null,-1)])])):(i(),n("svg",Ue,[...t[36]||(t[36]=[e("path",{d:"M6 5h4v14H6zM14 5h4v14h-4z"},null,-1)])]))],10,Ne),(a.status||"active")!=="complete"?(i(),n("button",{key:0,onClick:v=>Lt(a.id),disabled:d.value,class:"rounded-md bg-gray-900 px-3 py-1.5 text-xs font-semibold text-white hover:bg-black"},"Complete",8,Ve)):(i(),n("span",je,"Completed"))])])]))),128))])]),e("div",ze,[e("div",null," Page "+r(D.value)+" of "+r(H.value)+" • "+r(Z.value.length)+" total ",1),e("div",Fe,[e("button",{onClick:t[16]||(t[16]=a=>w(D.value-1)),disabled:D.value<=1,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Prev",8,Re),e("button",{onClick:t[17]||(t[17]=a=>w(D.value+1)),disabled:D.value>=H.value,class:"rounded-md border px-3 py-1 disabled:opacity-50"},"Next",8,He)])])])])])):k("",!0),e("div",We,[e("div",qe,[t[39]||(t[39]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Today's Time Events",-1)),st.value.length===0?(i(),n("div",Ge," No time entries recorded today. Clock in to start tracking time. ")):(i(),n("div",Je,[e("table",Ke,[t[38]||(t[38]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Event Type "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Start Time "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," End Time "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Duration "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Status ")])],-1)),e("tbody",Qe,[(i(!0),n(T,null,$(st.value,(a,v)=>(i(),n("tr",{key:v},[e("td",Xe,r(a.type),1),e("td",Ye,r(b(a.start)),1),e("td",Ze,r(b(a.end)),1),e("td",ts,r(a.duration),1),e("td",es,[C.value!=="admin"?(i(),n("div",ss,[e("button",{onClick:at,disabled:d.value||h.value,class:"rounded-md bg-green-600 px-2 py-1 text-xs font-semibold text-white hover:bg-green-700"},"Time In",8,as),e("button",{onClick:dt,disabled:d.value||!h.value||_.value,class:"rounded-md bg-yellow-600 px-2 py-1 text-xs font-semibold text-white hover:bg-yellow-700"},"Break In",8,os),e("button",{onClick:J,disabled:d.value||!_.value,class:"rounded-md bg-orange-600 px-2 py-1 text-xs font-semibold text-white hover:bg-orange-700"},"Break Out",8,ls),e("button",{onClick:ot,disabled:d.value||!h.value,class:"rounded-md bg-red-600 px-2 py-1 text-xs font-semibold text-white hover:bg-red-700"},"Time Out",8,ns)])):(i(),n("span",is,"Admin view"))])]))),128)),(i(!0),n(T,null,$(L.value,a=>{var v;return i(),n("tr",{key:`task-${a.id}`},[e("td",rs," Task: "+r(((v=a.task)==null?void 0:v.title)||`#${a.task_id}`),1),e("td",ds,r(b(a.clock_in)),1),e("td",cs,r(b(a.clock_out)),1),e("td",us,r(a.clock_in&&a.clock_out?G(a.clock_in,a.clock_out):a.clock_in?"In progress":"--"),1),e("td",ps,[C.value!=="admin"?(i(),n("div",xs,[e("button",{onClick:Bt=>lt(a.task_id),disabled:d.value,class:"rounded-md bg-green-600 px-2 py-1 text-xs font-semibold text-white hover:bg-green-700"},"Play",8,vs),e("button",{onClick:t[18]||(t[18]=Bt=>It()),disabled:d.value,class:"rounded-md bg-red-600 px-2 py-1 text-xs font-semibold text-white hover:bg-red-700"},"Stop",8,ms)])):(i(),n("span",ys,"Admin view"))])])}),128))])])]))])])]),U.value?(i(),n("div",gs,[e("div",hs,[e("div",_s,[t[40]||(t[40]=e("h4",{class:"text-md font-semibold"},"Daily Logs",-1)),e("button",{onClick:t[19]||(t[19]=a=>U.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs"},"Close")]),e("div",ks,[u.value?(i(),n("div",ws,[e("table",bs,[t[41]||(t[41]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Event"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),e("th",{class:"px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration")])],-1)),e("tbody",Ts,[(i(!0),n(T,null,$(st.value,(a,v)=>(i(),n("tr",{key:v},[e("td",Cs,r(a.type),1),e("td",Ds,r(b(a.start)),1),e("td",Ms,r(b(a.end)),1),e("td",$s,r(a.duration),1)]))),128)),(i(!0),n(T,null,$(L.value,a=>{var v;return i(),n("tr",{key:`modal-task-${a.id}`},[e("td",Ss,"Task: "+r(((v=a.task)==null?void 0:v.title)||`#${a.task_id}`),1),e("td",Is,r(b(a.clock_in)),1),e("td",Ls,r(b(a.clock_out)),1),e("td",Bs,r(a.clock_in&&a.clock_out?G(a.clock_in,a.clock_out):a.clock_in?"In progress":"--"),1)])}),128))])])])):(i(),n("div",fs,"No entry today."))])])])):k("",!0),V.value?(i(),n("div",Es,[e("div",Ps,[e("div",As,[t[42]||(t[42]=e("h4",{class:"text-md font-semibold"},"Task Details",-1)),e("button",{onClick:t[20]||(t[20]=a=>V.value=!1),class:"rounded-md bg-gray-100 px-2 py-1 text-xs"},"Close")]),f.value?(i(),n("div",Ns,[e("p",Os,r((l=f.value.task)==null?void 0:l.title),1),e("p",Us,"Status: "+r((p=f.value.task)==null?void 0:p.status),1),(y=f.value.clickup)!=null&&y.url?(i(),n("p",Vs,[e("a",{href:f.value.clickup.url,target:"_blank",class:"text-indigo-600 hover:underline"},"Open in ClickUp",8,js)])):k("",!0),(Q=f.value.clickup)!=null&&Q.text_content?(i(),n("div",zs,r(f.value.clickup.text_content),1)):k("",!0)])):k("",!0)])])):k("",!0)])]}),_:1})],64))}});export{qs as default};
