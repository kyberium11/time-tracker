import{d as nt,r as u,o as it,c as i,a as X,u as rt,h as dt,w as Z,b as t,e as h,n as S,f as r,g as E,v as O,t as a,F as C,i as A,j as ct,k as ut}from"./app-Cio9VxBy.js";import{_ as mt}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-BiAeWWES.js";import{a as H}from"./api-6hSyXT4l.js";const vt={class:"py-12"},xt={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},gt={class:"border-b border-gray-200 mb-6"},pt={class:"-mb-px flex space-x-8"},yt={key:0,class:"space-y-6"},ht={class:"bg-white shadow rounded-lg p-4"},ft={class:"flex justify-between items-end gap-4"},_t={class:"flex-1"},bt={key:0,class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4"},wt={class:"bg-white overflow-hidden shadow rounded-lg"},kt={class:"p-5"},Tt={class:"flex items-center"},Mt={class:"ml-5 w-0 flex-1"},St={class:"text-2xl font-semibold text-gray-900"},Ct={class:"bg-white overflow-hidden shadow rounded-lg"},Dt={class:"p-5"},Lt={class:"flex items-center"},Nt={class:"ml-5 w-0 flex-1"},Ut={class:"text-2xl font-semibold text-gray-900"},$t={class:"bg-white overflow-hidden shadow rounded-lg"},Et={class:"p-5"},At={class:"flex items-center"},Ht={class:"ml-5 w-0 flex-1"},jt={class:"text-2xl font-semibold text-gray-900"},Bt={class:"bg-white overflow-hidden shadow rounded-lg"},Pt={class:"p-5"},Vt={class:"flex items-center"},Ft={class:"ml-5 w-0 flex-1"},zt={class:"text-2xl font-semibold text-gray-900"},It={key:1,class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3"},Ot={class:"bg-white overflow-hidden shadow rounded-lg p-5"},Rt={class:"text-3xl font-semibold text-gray-900"},Wt={class:"bg-white overflow-hidden shadow rounded-lg p-5"},qt={class:"text-3xl font-semibold text-gray-900"},Yt={class:"bg-white overflow-hidden shadow rounded-lg p-5"},Gt={class:"text-3xl font-semibold text-gray-900"},Jt={key:2,class:"bg-white shadow rounded-lg"},Kt={class:"px-4 py-5 sm:p-6"},Qt={class:"min-w-full divide-y divide-gray-200"},Xt={class:"divide-y divide-gray-200"},Zt={class:"px-4 py-4 text-sm text-gray-900"},te={class:"px-4 py-4 text-sm text-gray-500"},ee={class:"px-4 py-4 text-sm text-gray-500"},se={key:3,class:"text-center py-12"},oe={key:1,class:"space-y-6"},ae={class:"bg-white shadow rounded-lg p-4"},le={class:"grid gap-4 sm:grid-cols-3"},ne=["value"],ie={class:"bg-white shadow rounded-lg p-5"},re={class:"grid gap-4 sm:grid-cols-3 lg:grid-cols-6 text-sm"},de={class:"font-semibold"},ce={class:"font-semibold"},ue={class:"font-semibold"},me={class:"font-semibold"},ve={class:"font-semibold"},xe={class:"bg-white shadow rounded-lg"},ge={class:"overflow-x-auto"},pe={class:"min-w-full divide-y divide-gray-200"},ye={class:"divide-y divide-gray-200"},he={class:"px-4 py-4 text-sm text-gray-900"},fe={class:"px-4 py-4 text-sm text-gray-500"},_e={class:"px-4 py-4 text-sm text-gray-500"},be={class:"px-4 py-4 text-sm text-gray-900 font-semibold"},we={class:"px-4 py-4 text-sm text-gray-500"},ke={class:"px-4 py-4 text-sm text-gray-500"},Te={key:0},Me={key:0,class:"text-center py-8"},Se={key:2,class:"space-y-6"},Ce={class:"bg-white shadow rounded-lg p-4"},De={class:"flex justify-between items-center mb-4"},Le={class:"flex items-center gap-2"},Ne={class:"grid gap-4 sm:grid-cols-2"},Ue={class:"bg-white shadow rounded-lg"},$e={class:"overflow-x-auto"},Ee={class:"min-w-full divide-y divide-gray-200"},Ae={class:"divide-y divide-gray-200 bg-white"},He={class:"px-4 py-4 whitespace-nowrap"},je={class:"flex items-center"},Be={class:"flex-shrink-0 h-10 w-10"},Pe={class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},Ve={class:"text-indigo-600 font-medium"},Fe={class:"ml-4"},ze={class:"text-sm font-medium text-gray-900"},Ie={class:"text-sm text-gray-500"},Oe={class:"px-4 py-4 whitespace-nowrap"},Re={class:"px-4 py-4"},We={class:"text-sm text-gray-900"},qe={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-500"},Ye={class:"text-xs text-gray-400"},Ge={key:0},Je={key:0,class:"text-center py-8"},ts=nt({__name:"Analytics",setup(Ke){const p=u("overview");u(!1);const w=u("month"),x=u(null),b=u(!1),D=u(null),f=u(""),R=u([]),L=u([]),N=u(!1),y=u({workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0});u([]);const j=u([]),U=u(!1),$=u(""),tt=u(Date.now());it(()=>{const o=new Date;f.value=o.toISOString().split("T")[0],W(),et(),p.value==="summary"&&B(),k(),setInterval(()=>{p.value==="activity"&&k(!0)},5e3)});const W=async()=>{b.value=!0;try{const o=await H.get("/admin/analytics/overview",{params:{period:w.value}});x.value=o.data}catch(o){console.error("Error loading overview:",o),alert("Failed to load overview data")}finally{b.value=!1}},et=async()=>{try{const o=await H.get("/admin/analytics/users");R.value=o.data}catch(o){console.error("Error loading users:",o)}},B=async()=>{var o;if(D.value){N.value=!0;try{const e=await H.get(`/admin/analytics/user/${D.value}`,{params:{start_date:f.value,end_date:f.value}}),s=((o=e.data)==null?void 0:o.entries)||e.data||[];L.value=s;let l=0,d=0,c=0,n=0,m=null;s.forEach(g=>{const T=v(g.clock_in),Y=v(g.clock_out);if(T&&(!m||T<m)&&(m=T),T&&Y){let I=Math.max(0,Math.floor((Y.getTime()-T.getTime())/1e3));const G=v(g.break_start),J=v(g.break_end);if(G&&J){const M=Math.max(0,Math.floor((J.getTime()-G.getTime())/1e3));d+=M,I-=M}const K=v(g.lunch_start),Q=v(g.lunch_end);if(K&&Q){const M=Math.max(0,Math.floor((Q.getTime()-K.getTime())/1e3));c+=M,I-=M}l+=Math.max(0,I)}g.task&&(g.task.title||g.task.name)&&(n+=1)});const F=8*3600,z=Math.max(0,l-F);let q="No Entry";if(m){const g=new Date(m);g.setHours(8,30,0,0),q=m.getTime()<=g.getTime()?"Perfect":"Late"}y.value={workSeconds:l,breakSeconds:d,lunchSeconds:c,tasksCount:n,status:q,overtimeSeconds:z}}catch(e){console.error("Error loading user daily analytics",e),L.value=[],y.value={workSeconds:0,breakSeconds:0,lunchSeconds:0,tasksCount:0,status:"No Entry",overtimeSeconds:0}}finally{N.value=!1}}},k=async(o=!1)=>{o||(U.value=!0);try{const e={limit:100};$.value&&(e.action=$.value);const s=await H.get("/admin/analytics/activity-logs",{params:e});j.value=s.data.data,tt.value=Date.now()}catch(e){console.error("Error loading activity logs:",e),o||alert("Failed to load activity logs")}finally{U.value=!1}},st=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),P=o=>{if(!o)return"--";const e=o.match(/\b(\d{2}):(\d{2})(?::(\d{2}))?/);if(e){let s=parseInt(e[1],10);const l=e[2],d=s>=12?"PM":"AM";return s=s%12,s===0&&(s=12),`${s}:${l} ${d}`}try{const s=new Date(o);if(!isNaN(s.getTime()))return s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}catch{}return"--"},V=o=>{if(typeof o=="string"&&/h\s+\d{2}m\s+\d{2}s/.test(o))return o;const e=Number(o);if(!isFinite(e))return"00h 00m 00s";const s=Math.round(e*3600),l=Math.floor(s/3600),d=Math.floor(s%3600/60),c=s%60,n=m=>m<10?`0${m}`:`${m}`;return`${n(l)}h ${n(d)}m ${n(c)}s`},_=o=>{const e=typeof o=="number"&&isFinite(o)?Math.max(0,Math.floor(o)):0,s=Math.floor(e/3600),l=Math.floor(e%3600/60),d=e%60,c=n=>n<10?`0${n}`:`${n}`;return`${c(s)}:${c(l)}:${c(d)}`},v=o=>{if(!o)return null;const e=o.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?/);if(e){const d=Number(e[1]),c=Number(e[2])-1,n=Number(e[3]),m=Number(e[4]),F=Number(e[5]),z=Number(e[6]||"0");return new Date(Date.UTC(d,c,n,m,F,z))}const s=o.includes("T")?o:o.replace(" ","T"),l=new Date(s);return isNaN(l.getTime())?null:l},ot=o=>{if(o.duration_hms_colon&&o.duration_hms_colon!=="00:00:00")return o.duration_hms_colon;if(typeof o.duration_seconds=="number"&&o.duration_seconds>0)return _(o.duration_seconds);if(!o.clock_in||!o.clock_out)return"--";const e=v(o.clock_in),s=v(o.clock_out);if(!e||!s)return"00:00:00";let l=Math.max(0,Math.floor((s.getTime()-e.getTime())/1e3));const d=v(o.break_start||null),c=v(o.break_end||null);d&&c&&(l-=Math.max(0,Math.floor((c.getTime()-d.getTime())/1e3)));const n=v(o.lunch_start||null),m=v(o.lunch_end||null);return n&&m&&(l-=Math.max(0,Math.floor((m.getTime()-n.getTime())/1e3))),_(Math.max(0,l))},at=()=>{const o=new URLSearchParams({period:w.value,start_date:f.value,end_date:f.value});window.location.href=`/api/admin/analytics/export/csv?${o.toString()}`},lt=()=>{const o=new URLSearchParams({period:w.value,start_date:f.value,end_date:f.value});window.location.href=`/api/admin/analytics/export/pdf?${o.toString()}`};return(o,e)=>(r(),i(C,null,[X(rt(dt),{title:"Analytics"}),X(mt,null,{header:Z(()=>[...e[9]||(e[9]=[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Analytics & Reports ",-1)])]),default:Z(()=>[t("div",vt,[t("div",xt,[t("div",gt,[t("nav",pt,[t("button",{onClick:e[0]||(e[0]=s=>p.value="overview"),class:S(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",p.value==="overview"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Overview ",2),t("button",{onClick:e[1]||(e[1]=s=>p.value="summary"),class:S(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",p.value==="summary"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," User Summary ",2),t("button",{onClick:e[2]||(e[2]=s=>{p.value="activity",k()}),class:S(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",p.value==="activity"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"])}," Activity Log ",2)])]),p.value==="overview"?(r(),i("div",yt,[t("div",ht,[t("div",ft,[t("div",_t,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Period",-1)),E(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>w.value=s),onChange:W,class:"rounded-md border-gray-300 shadow-sm"},[...e[10]||(e[10]=[t("option",{value:"daily"},"Daily",-1),t("option",{value:"weekly"},"Weekly",-1),t("option",{value:"monthly"},"Monthly",-1),t("option",{value:"ytd"},"Year to Date",-1)])],544),[[O,w.value]])]),t("div",{class:"flex gap-2"},[t("button",{onClick:at,class:"rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-500"}," Export CSV "),t("button",{onClick:lt,class:"rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-500"}," Export PDF ")])])]),x.value&&!b.value?(r(),i("div",bt,[t("div",wt,[t("div",kt,[t("div",Tt,[e[13]||(e[13]=t("div",{class:"flex-shrink-0"},[t("div",{class:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center"},[t("svg",{class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])])],-1)),t("div",Mt,[t("dl",null,[e[12]||(e[12]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Employees",-1)),t("dd",St,a(x.value.statistics.total_employees),1)])])])])]),t("div",Ct,[t("div",Dt,[t("div",Lt,[e[15]||(e[15]=t("div",{class:"flex-shrink-0"},[t("div",{class:"h-8 w-8 rounded-full bg-green-500 flex items-center justify-center"},[t("svg",{class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),t("div",Nt,[t("dl",null,[e[14]||(e[14]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Hours",-1)),t("dd",Ut,a(x.value.statistics.total_hms||V(x.value.statistics.total_hours)),1)])])])])]),t("div",$t,[t("div",Et,[t("div",At,[e[17]||(e[17]=t("div",{class:"flex-shrink-0"},[t("div",{class:"h-8 w-8 rounded-full bg-yellow-500 flex items-center justify-center"},[t("svg",{class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])])],-1)),t("div",Ht,[t("dl",null,[e[16]||(e[16]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Lates",-1)),t("dd",jt,a(x.value.statistics.lates_count),1)])])])])]),t("div",Bt,[t("div",Pt,[t("div",Vt,[e[19]||(e[19]=t("div",{class:"flex-shrink-0"},[t("div",{class:"h-8 w-8 rounded-full bg-purple-500 flex items-center justify-center"},[t("svg",{class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),t("div",Ft,[t("dl",null,[e[18]||(e[18]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Overtime",-1)),t("dd",zt,a(x.value.statistics.overtime_count),1)])])])])])])):h("",!0),x.value&&!b.value?(r(),i("div",It,[t("div",Ot,[e[20]||(e[20]=t("h4",{class:"text-sm font-medium text-gray-500 mb-2"},"Average Hours",-1)),t("p",Rt,a(V(x.value.statistics.average_hours)),1)]),t("div",Wt,[e[21]||(e[21]=t("h4",{class:"text-sm font-medium text-gray-500 mb-2"},"Perfect Attendance",-1)),t("p",qt,a(x.value.statistics.perfect_attendance_count),1)]),t("div",Yt,[e[22]||(e[22]=t("h4",{class:"text-sm font-medium text-gray-500 mb-2"},"Undertime",-1)),t("p",Gt,a(x.value.statistics.undertime_count),1)])])):h("",!0),x.value&&!b.value?(r(),i("div",Jt,[t("div",Kt,[e[24]||(e[24]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Top Employees",-1)),t("table",Qt,[e[23]||(e[23]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Name"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Total Hours"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Entries")])],-1)),t("tbody",Xt,[(r(!0),i(C,null,A(x.value.top_employees,s=>(r(),i("tr",{key:s.id},[t("td",Zt,a(s.name),1),t("td",te,a(V(s.total_hours)),1),t("td",ee,a(s.entries_count),1)]))),128))])])])])):h("",!0),b.value?(r(),i("div",se,[...e[25]||(e[25]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):h("",!0)])):h("",!0),p.value==="summary"?(r(),i("div",oe,[t("div",ae,[t("div",le,[t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"User",-1)),E(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>D.value=s),onChange:B,class:"w-full rounded-md border-gray-300 shadow-sm"},[e[26]||(e[26]=t("option",{value:null},"Select User",-1)),(r(!0),i(C,null,A(R.value,s=>(r(),i("option",{key:s.id,value:s.id},a(s.name),9,ne))),128))],544),[[O,D.value]])]),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),E(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>f.value=s),onChange:B,type:"date",class:"w-full rounded-md border-gray-300 shadow-sm"},null,544),[[ct,f.value]])])])]),t("div",ie,[e[35]||(e[35]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"},"Daily Summary",-1)),t("div",re,[t("div",null,[e[29]||(e[29]=t("div",{class:"text-gray-500"},"🕒 Time In Hours",-1)),t("div",de,a(_(y.value.workSeconds)),1)]),t("div",null,[e[30]||(e[30]=t("div",{class:"text-gray-500"},"☕ Total Breaks",-1)),t("div",ce,a(_(y.value.breakSeconds)),1)]),t("div",null,[e[31]||(e[31]=t("div",{class:"text-gray-500"},"🍱 Total Lunch",-1)),t("div",ue,a(_(y.value.lunchSeconds)),1)]),t("div",null,[e[32]||(e[32]=t("div",{class:"text-gray-500"},"📋 Tasks Done",-1)),t("div",me,a(y.value.tasksCount),1)]),t("div",null,[e[33]||(e[33]=t("div",{class:"text-gray-500"},"⏰ Status",-1)),t("div",{class:S(["font-semibold",{"text-green-700":y.value.status==="Perfect","text-yellow-700":y.value.status==="Late","text-gray-700":y.value.status==="No Entry"}])},a(y.value.status),3)]),t("div",null,[e[34]||(e[34]=t("div",{class:"text-gray-500"},"⚡ Overtime",-1)),t("div",ve,a(_(y.value.overtimeSeconds)),1)])])]),t("div",xe,[t("div",ge,[t("table",pe,[e[37]||(e[37]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Task"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Start Time"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"End Time"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Duration"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Break Duration"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Notes")])],-1)),t("tbody",ye,[(r(!0),i(C,null,A(L.value,s=>{var l,d;return r(),i("tr",{key:s.id},[t("td",he,a(((l=s.task)==null?void 0:l.title)||((d=s.task)==null?void 0:d.name)||"Work"),1),t("td",fe,a(P(s.clock_in)),1),t("td",_e,a(P(s.clock_out)),1),t("td",be,a(ot(s)),1),t("td",we,a((()=>{const c=v(s.break_start),n=v(s.break_end);return c&&n?_(Math.max(0,Math.floor((n.getTime()-c.getTime())/1e3))):"00:00:00"})()),1),t("td",ke,a(s.lunch_start&&s.lunch_end?"Lunch":"-"),1)])}),128)),L.value.length===0&&!N.value?(r(),i("tr",Te,[...e[36]||(e[36]=[t("td",{colspan:"6",class:"px-4 py-4 text-center text-sm text-gray-500"},"No entries for selected day",-1)])])):h("",!0)])])]),N.value?(r(),i("div",Me,[...e[38]||(e[38]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):h("",!0)])])):h("",!0),p.value==="activity"?(r(),i("div",Se,[t("div",Ce,[t("div",De,[e[40]||(e[40]=t("h3",{class:"text-lg font-medium text-gray-900"},"Real-Time Activity Log",-1)),t("div",Le,[e[39]||(e[39]=t("div",{class:"flex items-center gap-2 text-sm text-gray-600"},[t("span",{class:"inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t("span",null,"Live Updates")],-1)),t("button",{onClick:e[6]||(e[6]=s=>k()),class:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-indigo-500"}," Refresh ")])]),t("div",Ne,[t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter by Action",-1)),E(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>$.value=s),onChange:e[8]||(e[8]=s=>k()),class:"w-full rounded-md border-gray-300 shadow-sm"},[...e[41]||(e[41]=[t("option",{value:""},"All Actions",-1),t("option",{value:"clock_in"},"Clock In",-1),t("option",{value:"clock_out"},"Clock Out",-1),t("option",{value:"break_start"},"Break Start",-1),t("option",{value:"break_end"},"Break End",-1),t("option",{value:"lunch_start"},"Lunch Start",-1),t("option",{value:"lunch_end"},"Lunch End",-1)])],544),[[O,$.value]])])])]),t("div",Ue,[t("div",$e,[t("table",Ee,[e[44]||(e[44]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"User"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Action"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Description"),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"},"Time")])],-1)),t("tbody",Ae,[(r(!0),i(C,null,A(j.value,s=>{var l,d,c;return r(),i("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",He,[t("div",je,[t("div",Be,[t("div",Pe,[t("span",Ve,a((l=s.user)!=null&&l.name?s.user.name.charAt(0).toUpperCase():"?"),1)])]),t("div",Fe,[t("div",ze,a(((d=s.user)==null?void 0:d.name)||"Unknown User"),1),t("div",Ie,a((c=s.user)==null?void 0:c.email),1)])])]),t("td",Oe,[t("span",{class:S(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":s.action==="clock_in","bg-red-100 text-red-800":s.action==="clock_out","bg-yellow-100 text-yellow-800":s.action.includes("break"),"bg-blue-100 text-blue-800":s.action.includes("lunch")}])},a(s.action.replace("_"," ").replace(/\b\w/g,n=>n.toUpperCase())),3)]),t("td",Re,[t("div",We,a(s.description),1)]),t("td",qe,[ut(a(st(s.created_at))+" ",1),t("div",Ye,a(P(s.created_at)),1)])])}),128)),j.value.length===0&&!U.value?(r(),i("tr",Ge,[...e[43]||(e[43]=[t("td",{colspan:"4",class:"px-4 py-4 text-center text-sm text-gray-500"},"No activity logs found",-1)])])):h("",!0)])])]),U.value?(r(),i("div",Je,[...e[45]||(e[45]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading...",-1)])])):h("",!0)])])):h("",!0)])])]),_:1})],64))}});export{ts as default};
